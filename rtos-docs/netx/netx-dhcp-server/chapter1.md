---
title: Bölüm 1-Azure RTOS NetX DHCP sunucusuna giriş
description: Uygulama, dinamik olarak istek yapmak ve bir IP adresi almak için Azure RTOS NetX DHCP sunucusuyla iletişim kurar.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 17438a20ad3da64c88c3d6bb19a4887c2c6e354e
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104826794"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-dhcp-server"></a><span data-ttu-id="16f42-103">Bölüm 1-Azure RTOS NetX DHCP sunucusuna giriş</span><span class="sxs-lookup"><span data-stu-id="16f42-103">Chapter 1 - Introduction to Azure RTOS NetX DHCP Server</span></span>

<span data-ttu-id="16f42-104">NetX 'te, uygulamanın IP adresi *nx_ip_create* hizmet çağrısına sağlanan parametrelerden biridir.</span><span class="sxs-lookup"><span data-stu-id="16f42-104">In NetX, the application's IP address is one of the supplied parameters to the *nx_ip_create* service call.</span></span> <span data-ttu-id="16f42-105">IP adresi, statik olarak veya Kullanıcı Yapılandırması aracılığıyla uygulama tarafından biliniyorsa, IP adresi sağlamak sorun vermez.</span><span class="sxs-lookup"><span data-stu-id="16f42-105">Supplying the IP address poses no problem if the IP address is known to the application, either statically or through user configuration.</span></span> <span data-ttu-id="16f42-106">Ancak, uygulamanın IP adresinin ne olduğunu bilmediğini veya ilgilenmediğini bir örnek vardır.</span><span class="sxs-lookup"><span data-stu-id="16f42-106">However, there are some instances where the application doesn't know or care what its IP address is.</span></span> <span data-ttu-id="16f42-107">Bu gibi durumlarda, *nx_ip_create* işlevine sıfır bir IP adresi sağlanması gerekir ve uygulama, dinamik olarak istek ve bir IP adresi almak için Azure RTOS NETX DHCP sunucusuyla iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="16f42-107">In such situations, a zero IP address should be supplied to the *nx_ip_create* function and the application establishes communication with its Azure RTOS NetX DHCP server to dynamically request and obtain an IP address.</span></span>

## <a name="dynamic-ip-address-assignment"></a><span data-ttu-id="16f42-108">Dinamik IP adresi ataması</span><span class="sxs-lookup"><span data-stu-id="16f42-108">Dynamic IP Address Assignment</span></span>

<span data-ttu-id="16f42-109">Ağdan dinamik bir IP adresi elde etmek için kullanılan temel hizmet, ters adres çözümleme protokolüdür (RARP).</span><span class="sxs-lookup"><span data-stu-id="16f42-109">The basic service used to obtain a dynamic IP address from the network is the Reverse Address Resolution Protocol (RARP).</span></span> <span data-ttu-id="16f42-110">Bu protokol ARP ile benzerdir, ancak başka bir ağ düğümünün MAC adresini bulmak yerine kendisi için bir IP adresi almak üzere tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="16f42-110">This protocol is similar to ARP, except it is designed to obtain an IP address for itself instead of finding the MAC address for another network node.</span></span> <span data-ttu-id="16f42-111">Düşük düzey RARP iletisi yerel ağda yayınlanır ve ağ üzerindeki bir sunucunun, dinamik olarak ayrılan IP adresi içeren bir RARP yanıtıyla yanıt vermesi için bir sorumluluğudur.</span><span class="sxs-lookup"><span data-stu-id="16f42-111">The low-level RARP message is broadcast on the local network and it is the responsibility of a server on the network to respond with an RARP response, which contains a dynamically allocated IP address.</span></span>

<span data-ttu-id="16f42-112">RARP, IP adreslerinin dinamik ayırması için bir hizmet sunmakla birlikte, birkaç eksiklikleri vardır.</span><span class="sxs-lookup"><span data-stu-id="16f42-112">Although RARP provides a service for dynamic allocation of IP addresses, it has several shortcomings.</span></span> <span data-ttu-id="16f42-113">En çok kullanılan eksiklik, RARP 'nin yalnızca IP adresinin dinamik olarak ayrılmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="16f42-113">The most glaring deficiency is that RARP only provides dynamic allocation of the IP address.</span></span> <span data-ttu-id="16f42-114">Çoğu durumda, bir cihazın ağa doğru bir şekilde katılması için daha fazla bilgi gereklidir.</span><span class="sxs-lookup"><span data-stu-id="16f42-114">In most situations, more information is necessary in order for a device to properly participate on a network.</span></span> <span data-ttu-id="16f42-115">Bir IP adresine ek olarak, çoğu cihaz ağ maskesine ve ağ geçidi IP adresine ihtiyaç duyar.</span><span class="sxs-lookup"><span data-stu-id="16f42-115">In addition to an IP address, most devices need the network mask and the gateway IP address.</span></span> <span data-ttu-id="16f42-116">Bir DNS sunucusunun IP adresi ve diğer ağ bilgileri de gerekli olabilir.</span><span class="sxs-lookup"><span data-stu-id="16f42-116">The IP address of a DNS server and other network information may also be needed.</span></span> <span data-ttu-id="16f42-117">RARP 'nin bu bilgileri sağlama yeteneği yoktur.</span><span class="sxs-lookup"><span data-stu-id="16f42-117">RARP does not have the ability to provide this information.</span></span>

## <a name="rarp-alternatives"></a><span data-ttu-id="16f42-118">RARP alternatifleri</span><span class="sxs-lookup"><span data-stu-id="16f42-118">RARP Alternatives</span></span>

<span data-ttu-id="16f42-119">RARP 'nin eksiklikleri aşılabilmesi için, araştırmacılar Önyükleme Protokolü (BOOTP) adlı daha kapsamlı bir IP adresi ayırma mekanizması geliştirmiştir.</span><span class="sxs-lookup"><span data-stu-id="16f42-119">In order to overcome the deficiencies of RARP, researchers developed a more comprehensive IP address allocation mechanism called the Bootstrap Protocol (BOOTP).</span></span> <span data-ttu-id="16f42-120">Bu protokol, IP adresi dinamik olarak tahsis etme ve ayrıca ek önemli ağ bilgileri sağlama yeteneğine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="16f42-120">This protocol has the ability to dynamically allocate an IP address and also provide additional important network information.</span></span> <span data-ttu-id="16f42-121">Ancak, BOOTP 'nin statik ağ yapılandırmalarına yönelik olarak tasarlanma dezavantajı vardır.</span><span class="sxs-lookup"><span data-stu-id="16f42-121">However, BOOTP has the drawback of being designed for static network configurations.</span></span> <span data-ttu-id="16f42-122">Hızlı veya otomatik adres atamaya izin vermez.</span><span class="sxs-lookup"><span data-stu-id="16f42-122">It does not allow for quick or automated address assignment.</span></span>

<span data-ttu-id="16f42-123">Dinamik ana bilgisayar Yapılandırma Protokolü (DHCP) son derece yararlı olacaktır.</span><span class="sxs-lookup"><span data-stu-id="16f42-123">This is where the Dynamic Host Configuration Protocol (DHCP) is extremely useful.</span></span> <span data-ttu-id="16f42-124">DHCP, belirli bir süre boyunca istemciye bir IP adresi "kiralamaya" kadar, tam otomatik IP sunucusu ayırması ve tamamen dinamik IP adresi ayırmayı içerecek şekilde, BOOTP 'nin temel işlevlerini genişletmek için tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="16f42-124">DHCP is designed to extend the basic functionality of BOOTP to include completely automated IP server allocation and completely dynamic IP address allocation through "leasing" an IP address to a client for a specified period of time.</span></span> <span data-ttu-id="16f42-125">DHCP, IP adreslerini BOOTP gibi statik bir şekilde ayırmak üzere de yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="16f42-125">DHCP can also be configured to allocate IP addresses in a static manner like BOOTP.</span></span>

## <a name="dhcp-messages"></a><span data-ttu-id="16f42-126">DHCP Iletileri</span><span class="sxs-lookup"><span data-stu-id="16f42-126">DHCP Messages</span></span>

<span data-ttu-id="16f42-127">DHCP, BOOTP işlevselliğini önemli ölçüde iyileştirse de DHCP, BOOTP ile aynı ileti biçimini kullanır ve BOOTP ile aynı satıcı seçeneklerini destekler.</span><span class="sxs-lookup"><span data-stu-id="16f42-127">Although DHCP greatly enhances the functionality of BOOTP, DHCP uses the same message format as BOOTP and supports the same vendor options as BOOTP.</span></span> <span data-ttu-id="16f42-128">DHCP, işlevini gerçekleştirmek için aşağıdaki şekilde DHCP 'ye özgü yedi seçenek sunar:</span><span class="sxs-lookup"><span data-stu-id="16f42-128">In order to perform its function, DHCP introduces seven new DHCP-specific options, as follows:</span></span>

| <span data-ttu-id="16f42-129">Seçenek</span><span class="sxs-lookup"><span data-stu-id="16f42-129">Option</span></span>     | <span data-ttu-id="16f42-130">Değer</span><span class="sxs-lookup"><span data-stu-id="16f42-130">Value</span></span> | <span data-ttu-id="16f42-131">Kaynak</span><span class="sxs-lookup"><span data-stu-id="16f42-131">Origin</span></span>                |
| ---------- | ----- | --------------------- |
| <span data-ttu-id="16f42-132">BULMAK</span><span class="sxs-lookup"><span data-stu-id="16f42-132">DISCOVER</span></span>   | <span data-ttu-id="16f42-133">(1)</span><span class="sxs-lookup"><span data-stu-id="16f42-133">(1)</span></span>   | <span data-ttu-id="16f42-134">(DHCP Istemcisi tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-134">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="16f42-135">SUNAR</span><span class="sxs-lookup"><span data-stu-id="16f42-135">OFFER</span></span>      | <span data-ttu-id="16f42-136">(2)</span><span class="sxs-lookup"><span data-stu-id="16f42-136">(2)</span></span>   | <span data-ttu-id="16f42-137">(DHCP sunucusu tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-137">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="16f42-138">ISTEYEN</span><span class="sxs-lookup"><span data-stu-id="16f42-138">REQUEST</span></span>    | <span data-ttu-id="16f42-139">03</span><span class="sxs-lookup"><span data-stu-id="16f42-139">(3)</span></span>   | <span data-ttu-id="16f42-140">(DHCP Istemcisi tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-140">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="16f42-141">Reddet</span><span class="sxs-lookup"><span data-stu-id="16f42-141">DECLINE</span></span>    | <span data-ttu-id="16f42-142">4</span><span class="sxs-lookup"><span data-stu-id="16f42-142">(4)</span></span>   | <span data-ttu-id="16f42-143">(DHCP Istemcisi tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-143">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="16f42-144">ONAY</span><span class="sxs-lookup"><span data-stu-id="16f42-144">ACK</span></span>        | <span data-ttu-id="16f42-145">e</span><span class="sxs-lookup"><span data-stu-id="16f42-145">(5)</span></span>   | <span data-ttu-id="16f42-146">(DHCP sunucusu tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-146">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="16f42-147">NACK</span><span class="sxs-lookup"><span data-stu-id="16f42-147">NACK</span></span>       | <span data-ttu-id="16f42-148">(6)</span><span class="sxs-lookup"><span data-stu-id="16f42-148">(6)</span></span>   | <span data-ttu-id="16f42-149">(DHCP sunucusu tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-149">(sent by DHCP Server)</span></span> |
| <span data-ttu-id="16f42-150">Yayın</span><span class="sxs-lookup"><span data-stu-id="16f42-150">RELEASE</span></span>    | <span data-ttu-id="16f42-151">(7)</span><span class="sxs-lookup"><span data-stu-id="16f42-151">(7)</span></span>   | <span data-ttu-id="16f42-152">(DHCP Istemcisi tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-152">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="16f42-153">YAPıLANDıRı</span><span class="sxs-lookup"><span data-stu-id="16f42-153">INFORM</span></span>     | <span data-ttu-id="16f42-154">(8)</span><span class="sxs-lookup"><span data-stu-id="16f42-154">(8)</span></span>   | <span data-ttu-id="16f42-155">(DHCP Istemcisi tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-155">(sent by DHCP Client)</span></span> |
| <span data-ttu-id="16f42-156">FORCERENEW</span><span class="sxs-lookup"><span data-stu-id="16f42-156">FORCERENEW</span></span> | <span data-ttu-id="16f42-157">tuşlarına</span><span class="sxs-lookup"><span data-stu-id="16f42-157">(9)</span></span>   | <span data-ttu-id="16f42-158">(DHCP Istemcisi tarafından gönderilen)</span><span class="sxs-lookup"><span data-stu-id="16f42-158">(sent by DHCP Client)</span></span> |

## <a name="dhcp-communication"></a><span data-ttu-id="16f42-159">DHCP Iletişimi</span><span class="sxs-lookup"><span data-stu-id="16f42-159">DHCP Communication</span></span>

<span data-ttu-id="16f42-160">DHCP sunucusu, DHCP Istemci isteklerini almak ve yanıtları iletmek için UDP protokolünü kullanır.</span><span class="sxs-lookup"><span data-stu-id="16f42-160">The DHCP Server utilizes the UDP protocol to receive DHCP Client requests and transmit responses.</span></span> <span data-ttu-id="16f42-161">IP adresine sahip olmadan önce, DHCP bilgilerini taşıyan UDP iletileri, 255.255.255.255 IP yayını adresi kullanılarak gönderilir ve alınır.</span><span class="sxs-lookup"><span data-stu-id="16f42-161">Prior to having an IP address, UDP messages carrying the DHCP information are sent and received by utilizing the IP broadcast address of 255.255.255.255.</span></span> <span data-ttu-id="16f42-162">Ancak, Istemci DHCP sunucusunun adresini biliyorsa, tek noktaya yayın iletilerini kullanarak DHCP iletileri gönderebilir.</span><span class="sxs-lookup"><span data-stu-id="16f42-162">However, if the Client knows the address of the DHCP Server it may send DHCP messages using unicast messages.</span></span>

## <a name="dhcp-server-state-machine"></a><span data-ttu-id="16f42-163">DHCP sunucusu durum makinesi</span><span class="sxs-lookup"><span data-stu-id="16f42-163">DHCP Server State Machine</span></span>

<span data-ttu-id="16f42-164">DHCP sunucusu, *nx_dhcp_server_create* işleme sırasında oluşturulan BIR iç DHCP iş parçacığı tarafından işlenen iki adımlı bir durum makinesi olarak uygulanır.</span><span class="sxs-lookup"><span data-stu-id="16f42-164">The DHCP Server is implemented as a two-step state machine processed by an internal DHCP thread that is created during *nx_dhcp_server_create* processing.</span></span> <span data-ttu-id="16f42-165">DHCP sunucusunun ana durumları 1) bir DHCP istemcisinden bulma iletisi alıyor ve 2) Istek iletisi alıyor.</span><span class="sxs-lookup"><span data-stu-id="16f42-165">The main states of DHCP Server are 1) receiving a DISCOVER message from a DHCP client and 2) receiving a REQUEST message.</span></span>

<span data-ttu-id="16f42-166">Aşağıda karşılık gelen DHCP Istemci durumları verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="16f42-166">Below are the corresponding DHCP Client states:</span></span>

- <span data-ttu-id="16f42-167">**NX_DHCP_STATE_BOOT**: ÖNCEKI bir IP adresi ile başlama</span><span class="sxs-lookup"><span data-stu-id="16f42-167">**NX_DHCP_STATE_BOOT**: Starting with a previous IP address</span></span>
- <span data-ttu-id="16f42-168">**NX_DHCP_STATE_INIT**: önceki IP adresi değeri olmadan başlatılıyor</span><span class="sxs-lookup"><span data-stu-id="16f42-168">**NX_DHCP_STATE_INIT**: Starting with no previous IP address value</span></span>
- <span data-ttu-id="16f42-169">**NX_DHCP_STATE_SELECTING**: HERHANGI bir DHCP sunucusundan yanıt bekleniyor</span><span class="sxs-lookup"><span data-stu-id="16f42-169">**NX_DHCP_STATE_SELECTING**: Waiting for a response from any DHCP server</span></span>
- <span data-ttu-id="16f42-170">**NX_DHCP_STATE_REQUESTING**: DHCP sunucusu TANıMLANDı, IP adresi isteği gönderildi</span><span class="sxs-lookup"><span data-stu-id="16f42-170">**NX_DHCP_STATE_REQUESTING**: DHCP Server identified, IP address request sent</span></span>
- <span data-ttu-id="16f42-171">**NX_DHCP_STATE_BOUND**: DHCP IP adresi kirası oluşturuldu</span><span class="sxs-lookup"><span data-stu-id="16f42-171">**NX_DHCP_STATE_BOUND**: DHCP IP Address lease established</span></span>
- <span data-ttu-id="16f42-172">**NX_DHCP_STATE_RENEWING**: DHCP IP adresi kira yenileme süresi geçti, yenileme istendi</span><span class="sxs-lookup"><span data-stu-id="16f42-172">**NX_DHCP_STATE_RENEWING**: DHCP IP Address lease renewal time elapsed, renewal requested</span></span>
- <span data-ttu-id="16f42-173">**NX_DHCP_STATE_REBINDING**: DHCP IP adresi kira yeniden bağlama süresi geçti, yenileme istendi</span><span class="sxs-lookup"><span data-stu-id="16f42-173">**NX_DHCP_STATE_REBINDING**: DHCP IP Address lease rebind time elapsed, renewal requested</span></span>
- <span data-ttu-id="16f42-174">**NX_DHCP_STATE_FORCERENEW**: DHCP IP adresi kirası oluşturuldu, sunucu veya uygulamaya göre yenilemeyi zorla</span><span class="sxs-lookup"><span data-stu-id="16f42-174">**NX_DHCP_STATE_FORCERENEW**: DHCP IP Address lease established, force renewal by server or by application</span></span>
- <span data-ttu-id="16f42-175">**NX_DHCP_STATE_FAILED**: sunucu bulunamadı veya sunucudan yanıt alınmadı</span><span class="sxs-lookup"><span data-stu-id="16f42-175">**NX_DHCP_STATE_FAILED**: No server found or no response from server received</span></span>

## <a name="dhcp-additional-parameters"></a><span data-ttu-id="16f42-176">DHCP ek parametreleri</span><span class="sxs-lookup"><span data-stu-id="16f42-176">DHCP Additional Parameters</span></span>

<span data-ttu-id="16f42-177">NetX DHCP sunucusu, DHCP Istemcisi için ortak/kritik ağ yapılandırma parametreleri (örneğin, yönlendirici veya ağ geçidi adresi ve DNS sunucusu) ile DHCP Istemcileri sağlamak üzere yapılandırılabilir seçeneğinde ayarlanan varsayılan bir seçenek parametreleri listesine sahiptir NX_DHCP_DEFAULT_SERVER_OPTION_LISTin *nx_dhcp_server. h* .</span><span class="sxs-lookup"><span data-stu-id="16f42-177">The NetX DHCP Server has a default list of option parameters which is set in the configurable option NX_DHCP_DEFAULT_SERVER_OPTION_LISTin *nx_dhcp_server.h* to supply DHCP Clients with common/critical network configuration parameters e.g. router or gateway address and DNS server for the DHCP Client.</span></span>

## <a name="dhcp-rfcs"></a><span data-ttu-id="16f42-178">DHCP RFC 'Leri</span><span class="sxs-lookup"><span data-stu-id="16f42-178">DHCP RFCs</span></span>

<span data-ttu-id="16f42-179">NetX DHCP sunucusu RFC2132, RFC2131 ve ilgili RFC 'lerle uyumludur.</span><span class="sxs-lookup"><span data-stu-id="16f42-179">NetX DHCP Server is compliant with RFC2132, RFC2131, and related RFCs.</span></span>
