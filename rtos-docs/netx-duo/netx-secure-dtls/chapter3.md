---
title: Bölüm 3-Azure RTOS NetX güvenli DTLS 'nin Işlevsel açıklaması
description: Bu bölümde, Azure RTOS NetX güvenli DTLS 'nin işlevsel bir açıklaması bulunmaktadır.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 347bd83fa8c72ced2e8678a92ec5c5f8393c136d
ms.sourcegitcommit: 60ad844b58639d88830f2660ab0c4ff86b92c10f
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/07/2021
ms.locfileid: "106550210"
---
# <a name="chapter-3-functional-description-of-azure-rtos-netx-secure-dtls"></a><span data-ttu-id="7162c-103">Bölüm 3: Azure RTOS NetX güvenli DTLS 'nin Işlevsel açıklaması</span><span class="sxs-lookup"><span data-stu-id="7162c-103">Chapter 3: Functional description of Azure RTOS NetX Secure DTLS</span></span>

## <a name="execution-overview"></a><span data-ttu-id="7162c-104">Yürütmeye genel bakış</span><span class="sxs-lookup"><span data-stu-id="7162c-104">Execution Overview</span></span>

<span data-ttu-id="7162c-105">Bu bölümde, Azure RTOS NetX güvenli DTLS 'nin işlevsel bir açıklaması bulunmaktadır.</span><span class="sxs-lookup"><span data-stu-id="7162c-105">This chapter contains a functional description of Azure RTOS NetX Secure DTLS.</span></span> <span data-ttu-id="7162c-106">NetX güvenli DTLS uygulamasında iki birincil program yürütme türü vardır: başlatma ve uygulama arabirimi çağrıları.</span><span class="sxs-lookup"><span data-stu-id="7162c-106">There are two primary types of program execution in a NetX Secure DTLS application: initialization and application interface calls.</span></span> 

<span data-ttu-id="7162c-107">NetX güvenli, ThreadX ve NetX/NetXDuo 'un varlığını varsayar.</span><span class="sxs-lookup"><span data-stu-id="7162c-107">NetX Secure assumes the existence of ThreadX and NetX/NetXDuo.</span></span> <span data-ttu-id="7162c-108">ThreadX ' ten, iş parçacığı yürütme, askıya alma, dönemsel zamanlayıcılar ve karşılıklı dışlama olanakları gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-108">From ThreadX, it requires thread execution, suspension, periodic timers, and mutual exclusion facilities.</span></span> <span data-ttu-id="7162c-109">NetX/NetXDuo 'dan UDP ve IP ağ tesislerini ve sürücülerini gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7162c-109">From NetX/NetXDuo it requires the UDP and IP networking facilities and drivers.</span></span>

## <a name="datagram-transport-layer-security-dtls-and-transport-layer-security-tls"></a><span data-ttu-id="7162c-110">Veri birimi Aktarım Katmanı Güvenliği (DTLS) ve Aktarım Katmanı Güvenliği (TLS)</span><span class="sxs-lookup"><span data-stu-id="7162c-110">Datagram Transport Layer Security (DTLS) and Transport Layer Security (TLS)</span></span>

<span data-ttu-id="7162c-111">NetX güvenli DTLS, RFC 6347 ' de tanımlanan veri birimi Aktarım Katmanı Güvenlik Protokolü sürüm 1,2 ' ü uygular.</span><span class="sxs-lookup"><span data-stu-id="7162c-111">NetX Secure DTLS implements the Datagram Transport Layer Security protocol version 1.2 defined in RFC 6347.</span></span> <span data-ttu-id="7162c-112">DTLS sürüm 1,0, RFC 4347 ' de tanımlanmıştır ve TLS sürüm 1,1 ' ye karşılık gelen.</span><span class="sxs-lookup"><span data-stu-id="7162c-112">DTLS version 1.0 was defined in RFC 4347 and corresponded to TLS version 1.1.</span></span> <span data-ttu-id="7162c-113">DTLS 'lerin TLS 'ye uzantısı olması nedeniyle, sonraki sürümün karşılık gelen TLS sürümü ile aynı sürüm numarasını kullanması gerektiğine karar verdi.</span><span class="sxs-lookup"><span data-stu-id="7162c-113">Due to DTLS being essentially an extension to TLS, it was decided that the next version would use the same version number as the corresponding TLS version.</span></span> <span data-ttu-id="7162c-114">Bu nedenle, DTLS sürüm 1,2 ' nin TLS sürüm 1,2 ' ye karşılık geldiği için DTLS sürüm 1,1 yoktur.</span><span class="sxs-lookup"><span data-stu-id="7162c-114">Thus, there is no DTLS version 1.1 as DTLS version 1.2 corresponds to TLS version 1.2.</span></span>

> [!NOTE]
> <span data-ttu-id="7162c-115">NetX Secure, DTLS 1,2 sürümünü destekler.</span><span class="sxs-lookup"><span data-stu-id="7162c-115">NetX Secure supports DTLS version 1.2.</span></span> <span data-ttu-id="7162c-116">DTLS 1,0 (RFC 4347) şu **anda desteklenmiyor** .</span><span class="sxs-lookup"><span data-stu-id="7162c-116">DTLS 1.0 (RFC 4347) is **not** currently supported.</span></span>

<span data-ttu-id="7162c-117">*Güvenli Yuva Katmanı* (SSL), RFC 2246 ' de standart hale gelmeden önce TLS adının özgün adı ve "SSL" genellikle TLS protokolleri için genel bir ad olarak kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-117">*Secure Sockets Layer* (SSL) was the original name of TLS before it became a standard in RFC 2246 and “SSL” is often used as a generic name for the TLS protocols.</span></span> <span data-ttu-id="7162c-118">SSL 'nin son sürümü 3,0 idi ve TLS 1,0 bazen SSL sürüm 3,1 olarak adlandırılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-118">The last version of SSL was 3.0, and TLS 1.0 is sometimes referred to as SSL version 3.1.</span></span> <span data-ttu-id="7162c-119">Resmi "SSL" protokolünün tüm sürümleri artık kullanılmıyor ve güvenli olmayan olarak kabul edilir ve şu anda NetX güvenli bir SSL uygulamasını sağlamıyor.</span><span class="sxs-lookup"><span data-stu-id="7162c-119">All versions of the official “SSL” protocol are considered obsolete and insecure and currently NetX Secure does not provide an SSL implementation.</span></span>

<span data-ttu-id="7162c-120">TLS, TLS istemcisi ile sunucu arasındaki TLS *el sıkışması* sırasında oluşturulan *oturum anahtarları* oluşturmak için bir protokol BELIRTIR ve bu anahtarlar TLS oturumu sırasında uygulama tarafından gönderilen verileri şifrelemek için kullanılır *.*</span><span class="sxs-lookup"><span data-stu-id="7162c-120">TLS specifies a protocol to generate *session keys* which are created during the TLS *handshake* between a TLS client and server and those keys are used to encrypt data sent by the application during the TLS *session.*</span></span>

<span data-ttu-id="7162c-121">Temeldeki güvenlik mekanizması protokoller arasında paylaşıldığından DTLS, TLS ile yakından ilişkilidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-121">DTLS is closely coupled with TLS, as the underlying security mechansims are shared between the protocols.</span></span> <span data-ttu-id="7162c-122">Ancak TLS, Paket teslimi ve siparişi (neredeyse her zaman TCP uygulaması) hakkında garanti sağlayan bir aktarım katmanı protokolü üzerinden çalışacak şekilde tasarlanmıştır ve UDP gibi güvenilir olmayan bir protokolde çalışmaz.</span><span class="sxs-lookup"><span data-stu-id="7162c-122">However, TLS is designed to work over a transport layer protocol that provides guarantees about packet delivery and order (almost always TCP in practice) and will not function over an unreliable protocol like UDP.</span></span> <span data-ttu-id="7162c-123">Bu, DTLS 'in tanıtıldığı UDP 'nin bir tam nedeni olarak tasarlanmıştır: DTLS, güvenilir olmayan IP ve benzer protokollerin yapısını idare edin.</span><span class="sxs-lookup"><span data-stu-id="7162c-123">It is precisely because of UDP that DTLS was introduced: DTLS was designed handle the unreliable nature of UDP and similar protocols.</span></span> <span data-ttu-id="7162c-124">Bu, TCP gibi güvenilir protokollere benzer sıralama ve güvenilirlik mantığını (örneğin, bırakılan verilerin yeniden iletilmesi) dahil ederek yapar.</span><span class="sxs-lookup"><span data-stu-id="7162c-124">It does this by including ordering and reliability logic (e.g. retransmission of dropped data) similar to reliable protocols like TCP.</span></span>

<span data-ttu-id="7162c-125">Bu belge, TLS ve DTLS arasındaki farklılıklara odaklanarak, bu belgenin TLS ile güvenli TLS kullanım kılavuzunun 2. bölümünde bulunur.</span><span class="sxs-lookup"><span data-stu-id="7162c-125">A complete discussion of TLS is included in Chapter 3 of the NetX Secure TLS User’s Guide, so this document will focus on the differences between TLS and DTLS.</span></span>

### <a name="dtls-record-header"></a><span data-ttu-id="7162c-126">DTLS kayıt üstbilgisi</span><span class="sxs-lookup"><span data-stu-id="7162c-126">DTLS Record header</span></span>

<span data-ttu-id="7162c-127">Şekil 1 ' de gösterildiği gibi geçerli DTLS kayıtları bir DTLS üst bilgisine sahip olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-127">Any valid DTLS record must have a DTLS header, as shown in Figure 1.</span></span> <span data-ttu-id="7162c-128">Üst bilgi, iki yeni alanın eklenmesiyle aynı TLS ile aynıdır: aşağıda açıklanan 16 bit *Dönem* ve 48 bitlik *sıra numarası*.</span><span class="sxs-lookup"><span data-stu-id="7162c-128">The header is the same as TLS with the addition of two new fields: the 16-bit *epoch* and the 48-bit *sequence number*, described below.</span></span>

![DTLS kayıt üstbilgisinin diyagramı.](media/image2.png)

<span data-ttu-id="7162c-130">**Şekil 1-DTLS kayıt üstbilgisi**</span><span class="sxs-lookup"><span data-stu-id="7162c-130">**Figure 1 - DTLS record header**</span></span>

<span data-ttu-id="7162c-131">TLS kayıt üstbilgisinin alanları aşağıdaki gibi tanımlanır:</span><span class="sxs-lookup"><span data-stu-id="7162c-131">The fields of the TLS record header are defined as follows:</span></span>

| <span data-ttu-id="7162c-132">TLS üst bilgi alanı</span><span class="sxs-lookup"><span data-stu-id="7162c-132">TLS Header Field</span></span> | <span data-ttu-id="7162c-133">Amaç</span><span class="sxs-lookup"><span data-stu-id="7162c-133">Purpose</span></span>  |
| ---------------- | --------- |
| <span data-ttu-id="7162c-134">**8 bit Ileti türü**</span><span class="sxs-lookup"><span data-stu-id="7162c-134">**8-bit Message Type**</span></span> | <span data-ttu-id="7162c-135">Bu alan, gönderilmekte olan DTLS kaydının türünü içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-135">This field contains the type of DTLS record being sent.</span></span> <span data-ttu-id="7162c-136">Geçerli türler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="7162c-136">Valid types are as follows:</span></span><br /><span data-ttu-id="7162c-137">-Changecbir spec: 0x14</span><span class="sxs-lookup"><span data-stu-id="7162c-137">- ChangeCipherSpec: 0x14</span></span><br /><span data-ttu-id="7162c-138">-Uyarı: 0x15</span><span class="sxs-lookup"><span data-stu-id="7162c-138">- Alert: 0x15</span></span><br /><span data-ttu-id="7162c-139">-Handshake: 0x16</span><span class="sxs-lookup"><span data-stu-id="7162c-139">- Handshake: 0x16</span></span><br /><span data-ttu-id="7162c-140">-Uygulama verileri: 0x17</span><span class="sxs-lookup"><span data-stu-id="7162c-140">- Application Data: 0x17</span></span><br /> |
| <span data-ttu-id="7162c-141">**16 bit protokol sürümü**</span><span class="sxs-lookup"><span data-stu-id="7162c-141">**16-bit Protocol Version**</span></span> | <span data-ttu-id="7162c-142">Bu alan DTLS protokol sürümünü içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-142">This field contains the DTLS protocol version.</span></span> <span data-ttu-id="7162c-143">Geçerli değerler aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="7162c-143">Valid values are as follows:</span></span><br /><span data-ttu-id="7162c-144">-DTLS 1,1:0xFEFD</span><span class="sxs-lookup"><span data-stu-id="7162c-144">- DTLS 1.1: 0xFEFD</span></span> |
|  <span data-ttu-id="7162c-145">**16 bit dönem**</span><span class="sxs-lookup"><span data-stu-id="7162c-145">**16-bit Epoch**</span></span> |  <span data-ttu-id="7162c-146">Bu alan, şifreleme durumunun her değiştirildiği her seferinde arttırılan bir sayaç olan DTLS "dönemini" içerir (örneğin, yeni oturum anahtarları oluştururken).</span><span class="sxs-lookup"><span data-stu-id="7162c-146">This field contains the DTLS “epoch” which is a counter that is incremented each time the encryption state is changed (e.g. when generating new session keys).</span></span>  |
|  <span data-ttu-id="7162c-147">**48-bit sıra numarası**</span><span class="sxs-lookup"><span data-stu-id="7162c-147">**48-bit Sequence Number**</span></span> |  <span data-ttu-id="7162c-148">Bu alan, bu özel kaydı tanımlayan bir sıra numarası içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-148">This field contains a sequence number which identifies this particular record.</span></span> <span data-ttu-id="7162c-149">Kayıt sıralamasını sürdürmek ve yeniden aktarım gereksinimini denetlemek için DTLS tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-149">It is used by DTLS to maintain record ordering and check for retransmission need.</span></span> |
|  <span data-ttu-id="7162c-150">**16 bit uzunluğu**</span><span class="sxs-lookup"><span data-stu-id="7162c-150">**16-bit Length**</span></span> |  <span data-ttu-id="7162c-151">Bu alan, DTLS kaydında kapsüllenmiş verilerin uzunluğunu içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-151">This field contains the length of the data encapsulated in the DTLS record.</span></span>  |

### <a name="dtls-handshake-record-header"></a><span data-ttu-id="7162c-152">DTLS el sıkışma kayıt üstbilgisi</span><span class="sxs-lookup"><span data-stu-id="7162c-152">DTLS Handshake Record header</span></span>

<span data-ttu-id="7162c-153">Tüm geçerli DTLS el sıkışma kayıtları, Şekil 2 ' de gösterildiği gibi DTLS el sıkışma üstbilgisine sahip olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-153">Any valid DTLS handshake record must have a DTLS Handshake header, as shown in Figure 2.</span></span>

![DTLS el sıkışma kayıt üstbilgisinin diyagramı.](media/image3.png)

<span data-ttu-id="7162c-155">**Şekil 2-DTLS el sıkışma kayıt üstbilgisi**</span><span class="sxs-lookup"><span data-stu-id="7162c-155">**Figure 2 - DTLS Handshake record header**</span></span>

<span data-ttu-id="7162c-156">DTLS el sıkışma kayıt üstbilgisinin alanları aşağıdaki gibi tanımlanır:</span><span class="sxs-lookup"><span data-stu-id="7162c-156">The fields of the DTLS Handshake record header are defined as follows:</span></span>

| <span data-ttu-id="7162c-157">TLS üst bilgi alanı</span><span class="sxs-lookup"><span data-stu-id="7162c-157">TLS Header Field</span></span> | <span data-ttu-id="7162c-158">Amaç</span><span class="sxs-lookup"><span data-stu-id="7162c-158">Purpose</span></span>  |
| ---------------- | ------------------------------------------------ |
| <span data-ttu-id="7162c-159">**8 bit Ileti türü**</span><span class="sxs-lookup"><span data-stu-id="7162c-159">**8-bit Message Type**</span></span> | <span data-ttu-id="7162c-160">Bu alan, gönderilmekte olan DTLS kaydının türünü içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-160">This field contains the type of DTLS record being sent.</span></span> <span data-ttu-id="7162c-161">Geçerli türler şunlardır:</span><span class="sxs-lookup"><span data-stu-id="7162c-161">Valid types are as follows:</span></span><br /><span data-ttu-id="7162c-162">-Changecbir spec: 0x14</span><span class="sxs-lookup"><span data-stu-id="7162c-162">- ChangeCipherSpec: 0x14</span></span><br /><span data-ttu-id="7162c-163">-Uyarı: 0x15</span><span class="sxs-lookup"><span data-stu-id="7162c-163">- Alert: 0x15</span></span><br /><span data-ttu-id="7162c-164">-Handshake: 0x16</span><span class="sxs-lookup"><span data-stu-id="7162c-164">- Handshake: 0x16</span></span><br /><span data-ttu-id="7162c-165">-Uygulama verileri: 0x17</span><span class="sxs-lookup"><span data-stu-id="7162c-165">- Application Data: 0x17</span></span> |
|  <span data-ttu-id="7162c-166">**16 bit dönem**</span><span class="sxs-lookup"><span data-stu-id="7162c-166">**16-bit Epoch**</span></span> | <span data-ttu-id="7162c-167">Bu alan, şifreleme durumunun her değiştirildiği her seferinde arttırılan bir sayaç olan DTLS "dönemini" içerir (örneğin, yeni oturum anahtarları oluştururken).</span><span class="sxs-lookup"><span data-stu-id="7162c-167">This field contains the DTLS “epoch” which is a counter that is incremented each time the encryption state is changed (e.g. when generating new session keys).</span></span> |
|  <span data-ttu-id="7162c-168">**48-bit sıra numarası**</span><span class="sxs-lookup"><span data-stu-id="7162c-168">**48-bit Sequence Number**</span></span> | <span data-ttu-id="7162c-169">Bu alan, bu özel kaydı tanımlayan bir sıra numarası içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-169">This field contains a sequence number which identifies this particular record.</span></span> <span data-ttu-id="7162c-170">Kayıt sıralamasını sürdürmek ve yeniden aktarım gereksinimini denetlemek için DTLS tarafından kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-170">It is used by DTLS to maintain record ordering and check for retransmission need.</span></span> |
|  <span data-ttu-id="7162c-171">**16 bit protokol sürümü**</span><span class="sxs-lookup"><span data-stu-id="7162c-171">**16-bit Protocol Version**</span></span> | <span data-ttu-id="7162c-172">Bu alan DTLS protokol sürümünü içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-172">This field contains the DTLS protocol version.</span></span> <span data-ttu-id="7162c-173">Geçerli değerler aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="7162c-173">Valid values are as follows:</span></span><br /><span data-ttu-id="7162c-174">-DTLS 1,1:0xFEFD</span><span class="sxs-lookup"><span data-stu-id="7162c-174">- DTLS 1.1: 0xFEFD</span></span> |
| <span data-ttu-id="7162c-175">**16 bit uzunluğu**</span><span class="sxs-lookup"><span data-stu-id="7162c-175">**16-bit Length**</span></span> | <span data-ttu-id="7162c-176">Bu alan, DTLS kaydında kapsüllenmiş verilerin uzunluğunu içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-176">This field contains the length of the data encapsulated in the DTLS record.</span></span> |
| <span data-ttu-id="7162c-177">**8 bit el sıkışma türü**</span><span class="sxs-lookup"><span data-stu-id="7162c-177">**8-bit Handshake Type**</span></span> | <span data-ttu-id="7162c-178">Bu alan, el sıkışma ileti türünü içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-178">This field contains the handshake message type.</span></span> <span data-ttu-id="7162c-179">Geçerli değerler aşağıdaki gibidir:</span><span class="sxs-lookup"><span data-stu-id="7162c-179">Valid values are as follows:</span></span><br /><span data-ttu-id="7162c-180">-Merhaba Istek: 0x00</span><span class="sxs-lookup"><span data-stu-id="7162c-180">- HelloRequest: 0x00</span></span><br /><span data-ttu-id="7162c-181">-ClientHello: 0x01</span><span class="sxs-lookup"><span data-stu-id="7162c-181">- ClientHello: 0x01</span></span><br /><span data-ttu-id="7162c-182">-ServerHello: 0x02</span><span class="sxs-lookup"><span data-stu-id="7162c-182">- ServerHello: 0x02</span></span><br /><span data-ttu-id="7162c-183">-Sertifika: 0x0B</span><span class="sxs-lookup"><span data-stu-id="7162c-183">- Certificate: 0x0B</span></span><br /><span data-ttu-id="7162c-184">-ServerKeyExchange: 0x0C</span><span class="sxs-lookup"><span data-stu-id="7162c-184">- ServerKeyExchange: 0x0C</span></span><br /><span data-ttu-id="7162c-185">-CertificateRequest: 0x0D</span><span class="sxs-lookup"><span data-stu-id="7162c-185">- CertificateRequest: 0x0D</span></span><br /><span data-ttu-id="7162c-186">-ServerHelloDone: 0x0E</span><span class="sxs-lookup"><span data-stu-id="7162c-186">- ServerHelloDone: 0x0E</span></span><br /><span data-ttu-id="7162c-187">-CertificateVerify: 0x0F</span><span class="sxs-lookup"><span data-stu-id="7162c-187">- CertificateVerify: 0x0F</span></span><br /><span data-ttu-id="7162c-188">-ClientKeyExchange: 0x10</span><span class="sxs-lookup"><span data-stu-id="7162c-188">- ClientKeyExchange: 0x10</span></span><br /><span data-ttu-id="7162c-189">-Tamamlandı: 0x14</span><span class="sxs-lookup"><span data-stu-id="7162c-189">- Finished: 0x14</span></span> |
| <span data-ttu-id="7162c-190">**24 bit uzunluğu**</span><span class="sxs-lookup"><span data-stu-id="7162c-190">**24-bit Length**</span></span> | <span data-ttu-id="7162c-191">Bu alan, el sıkışma ileti verilerinin uzunluğunu içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-191">This field contains the length of the handshake message data.</span></span> |
| <span data-ttu-id="7162c-192">**16 bit sıra numarası**</span><span class="sxs-lookup"><span data-stu-id="7162c-192">**16-bit Sequence Number**</span></span> | <span data-ttu-id="7162c-193">Bu alan bir sıra numarası içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-193">This field contains a sequence number.</span></span> |

### <a name="the-dtls-handshake-and-dtls-session"></a><span data-ttu-id="7162c-194">DTLS el sıkışma ve DTLS oturumu</span><span class="sxs-lookup"><span data-stu-id="7162c-194">The DTLS Handshake and DTLS Session</span></span>

<span data-ttu-id="7162c-195">Şekil 3 ' te tipik bir DTLS el sıkışması gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7162c-195">A typical DTLS handshake is shown in Figure 3.</span></span> <span data-ttu-id="7162c-196">Genellikle önemli bir farka sahip olan tipik TLS el sıkışması ile neredeyse aynıdır: ClientHello iletisi ilk gönderildiğinde, sunucu yeni bir DTLS-özel iletisiyle yanıt verir, "tanımlama bilgisi" içeren bir *Helloverifyrequest* .</span><span class="sxs-lookup"><span data-stu-id="7162c-196">It is nearly identical to the typical TLS handshake with an important difference – when the ClientHello message is first sent, the server responds with a new DTLS-specific message, *HelloVerifyRequest* which contains a “cookie”.</span></span> <span data-ttu-id="7162c-197">DTLS Istemcisi, el sıkışma devam etmeden önce bu tanımlama bilgisini içeren ikinci bir ClientHello iletisiyle yanıt vermelidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-197">The DTLS Client must respond with a second ClientHello message containing that cookie before the handshake can proceed.</span></span> <span data-ttu-id="7162c-198">Bu mekanizma, UDP 'nin bağlantısız bir protokol olduğundan, belirli hizmet reddi (DoS) saldırılarını engellemek için DTLS 'e eklenmiştir (TCP 'nin aynı sorundan devam edebilmesi için adanmış bir bağlantı/bağlantı noktası olması gerekir).</span><span class="sxs-lookup"><span data-stu-id="7162c-198">This mechanism was added to DTLS to prevent certain Denial of Service (DoS) attacks since UDP is a connectionless protocol (TCP requires a dedicated connection/port so TLS does not suffer from the same issue).</span></span>

<span data-ttu-id="7162c-199">Istemci DTLS sunucusuna bir *ClientHello* iletisi GÖNDERDIĞINDE DTLS el sıkışması başlar ve bunu BIR DTLS oturumu başlatmak zorunda olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="7162c-199">A DTLS handshake begins when the Client sends a *ClientHello* message to a DTLS server, indicating its desire to start a DTLS session.</span></span> <span data-ttu-id="7162c-200">İleti, istemci oturum için kullanmak istediğiniz şifreleme hakkında bilgiler içerir ve bu da oturum anahtarlarını daha sonra el ile oluşturmak için kullanılan bilgilerle birlikte.</span><span class="sxs-lookup"><span data-stu-id="7162c-200">The message contains information about the encryption the client would like to use for the session, along with information used to generate the session keys later in the handshake.</span></span> <span data-ttu-id="7162c-201">Oturum anahtarları üretilene kadar DTLS el sıkışmasının içindeki tüm iletiler şifrelenmez.</span><span class="sxs-lookup"><span data-stu-id="7162c-201">Until the session keys are generated, all messages in the DTLS handshake are not encrypted.</span></span> <span data-ttu-id="7162c-202">Yukarıda belirtildiği gibi, DTLS sunucusu ClientHello yanıt olarak, istemciyi ikinci bir güncelleştirilmiş ClientHello ile yanıt vermeye zorlayarak bir HelloVerifyRequest gönderebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-202">As mentioned above, the DTLS Server may send a HelloVerifyRequest in response to the ClientHello, forcing the client to respond with a second updated ClientHello.</span></span>

<span data-ttu-id="7162c-203">İkinci ClientHello iletisini aldıktan sonra DTLS sunucusu tanımlama bilgisini doğrular ve doğru olursa, istemci tarafından sunulan şifreleme seçeneklerinden seçim gösteren bir ServerHello iletisi ile yanıt verir.</span><span class="sxs-lookup"><span data-stu-id="7162c-203">Upon receiving the second ClientHello message, the DTLS Server will verify the cookie and if correct will respond with a ServerHello message indicating a selection from the encryption options provided by the client.</span></span> <span data-ttu-id="7162c-204">ServerHello, sunucunun kimliğini istemciye kimliğini doğrulamak için dijital bir sertifika sağladığı bir sertifika iletisi (X. 509.440 doğrulaması kullanılırsa) tarafından izlenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-204">The ServerHello is followed by a Certificate message, in which the server provides a digital certificate to authenticate its identity to the client (if X.509 verification is used).</span></span> <span data-ttu-id="7162c-205">Son olarak, sunucu gönderilecek daha fazla ileti olmadığını göstermek için bir ServerHelloDone iletisi gönderir.</span><span class="sxs-lookup"><span data-stu-id="7162c-205">Finally, the server sends a ServerHelloDone message to indicate it has no more messages to send.</span></span> <span data-ttu-id="7162c-206">Sunucu isteğe bağlı olarak Sunucushello 'yu izleyen diğer iletileri gönderebilir ve bazı durumlarda bir sertifika iletisi gönderemeyebilir (örneğin, önceden paylaşılan anahtarlar kullanıldığında), bu nedenle ServerHelloDone iletisi gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-206">The server may optionally send other messages following the ServerHello and in some cases it may not send a Certificate message (such as when Pre-Shared Keys are used), hence the need for the ServerHelloDone message.</span></span>

<span data-ttu-id="7162c-207">İstemci tüm sunucu iletilerini aldıktan sonra, oturum anahtarlarını oluşturmak için yeterli bilgiye sahip olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-207">Once the client has received all the server’s messages, it has enough information to generate the session keys.</span></span> <span data-ttu-id="7162c-208">TLS/DTLS bunu, sabit boyutlu *gizli anahtar* adı verilen ve şifreli olarak bilinen ve şifreleme etkinleştirildikten sonra gereken tüm anahtarları oluşturmak için bir çekirdek olarak kullanılan, paylaşılan bir bit olarak adlandırılan bir rastgele verileri oluşturarak yapar.</span><span class="sxs-lookup"><span data-stu-id="7162c-208">TLS/DTLS does this by creating a shared bit of random data called the *Pre-Master Secret*, which is a fixed-size and is used as a seed to generate all the keys needed once encryption is enabled.</span></span> <span data-ttu-id="7162c-209">Asıl ön gizlilik, Merhaba iletilerde belirtilen ortak anahtar algoritması (ör. RSA) kullanılarak şifrelenir (ortak anahtar algoritmaları hakkında bilgi için aşağıya bakın) ve sertifikasında sunucu tarafından sağlanmış ortak anahtar.</span><span class="sxs-lookup"><span data-stu-id="7162c-209">The Pre-Master Secret is encrypted using the public key algorithm (e.g. RSA) specified in the Hello messages (see below for information on public key algorithms) and the public key provided by the server in its certificate.</span></span> <span data-ttu-id="7162c-210">Önceden paylaşılan anahtarlar (PSK) adlı isteğe bağlı bir TLS/DTLS özelliği, sertifika kullanmayan cipherpaketlerine izin verebilir, bunun yerine ana bilgisayarlar arasında paylaşılan bir gizli değer (genellikle fiziksel aktarım veya diğer güvenli yöntem aracılığıyla) kullanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-210">An optional TLS/DTLS feature called Pre-Shared Keys (PSK) enables ciphersuites that do not use a certificate but instead use a secret value shared between the hosts (usually through physical transfer or other secured method).</span></span> <span data-ttu-id="7162c-211">PSK etkin olduğunda, önceden paylaşılan gizli anahtar, ön yönetici gizli anahtarı oluşturmak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-211">When PSK is enabled, the pre-shared secret key is used to generate the Pre-Master Secret.</span></span> <span data-ttu-id="7162c-212">Aşağıdaki "kimlik doğrulama metotları" bölümünde önceden paylaşılan anahtarlar hakkında bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="7162c-212">See the section on Pre-Shared Keys in “Authentication Methods” below.</span></span>

<span data-ttu-id="7162c-213">Olağan bir TLS/DTLS anlaşmasında, şifrelenmiş ön ana gizlilik parolası ClientKeyExchange iletisindeki sunucusuna gönderilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-213">In a usual TLS/DTLS handshake, the encrypted Pre-Master Secret is sent to the server in the ClientKeyExchange message.</span></span> <span data-ttu-id="7162c-214">Sunucu, ClientKeyExchange iletisini aldıktan sonra, özel anahtarını kullanarak ana ön parolanın şifresini çözer ve oturum anahtarlarını TLS/DTLS istemcisiyle paralel olarak oluşturmaya devam eder.</span><span class="sxs-lookup"><span data-stu-id="7162c-214">The server, upon receiving the ClientKeyExchange message, decrypts the Pre-Master Secret using its private key and proceeds to generate the session keys in parallel with the TLS/DTLS client.</span></span>

<span data-ttu-id="7162c-215">Oturum anahtarları oluşturulduktan sonra, diğer tüm iletiler, Merhaba iletilerde seçili olan özel anahtar algoritması (ör. AES) kullanılarak şifrelenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-215">Once the session keys are generated, all further messages can be encrypted using the private-key algorithm (e.g. AES) selected in the Hello messages.</span></span> <span data-ttu-id="7162c-216">Diğer tüm iletilerin şifrelendiğini belirtmek için hem istemci hem de sunucu tarafından, Changeccrypspec adlı bir son şifreli ileti gönderilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-216">One final un-encrypted message called ChangeCipherSpec is sent by both the client and server to indicate that all further messages will be encrypted.</span></span>

<span data-ttu-id="7162c-217">Hem istemci hem de sunucu tarafından gönderilen ilk şifreli ileti ayrıca, tamamlandı olarak adlandırılan son TLS el sıkışma iletisidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-217">The first encrypted message sent by both the client and server is also the final TLS handshake message, called Finished.</span></span> <span data-ttu-id="7162c-218">Bu ileti alınan ve gönderilen tüm el sıkışma iletilerinin karmasını içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-218">This message contains a hash of all the handshake messages received and sent.</span></span> <span data-ttu-id="7162c-219">Bu karma, el sıkışmasının hiçbir iletiden değiştirilmediğini veya bozulmadığını (güvenlik ihlali olasılığı olduğunu gösterir) doğrulamak için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-219">This hash is used to verify that none of the messages in the handshake have been tampered with or corrupted (indicating a possible breach of security).</span></span>

<span data-ttu-id="7162c-220">Tamamlanan iletiler alındıktan ve el sıkışma karmaları doğrulandıktan sonra, TLS/DTLS oturumu başlar ve uygulama veri göndermeye ve almaya başlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-220">Once the Finished messages are received and the handshake hashes are verified, the TLS/DTLS session begins, and the application begins sending and receiving data.</span></span> <span data-ttu-id="7162c-221">TLS/DTLS oturumu sırasında her iki taraf tarafından gönderilen tüm veriler öncelikle, oluşturulan oturum anahtarlarına sahip seçili özel anahtar algoritması kullanılarak, Merhaba iletilerde seçilen karma algoritma (ileti bütünlüğü sağlamak için) kullanılarak karma hale getirilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-221">All data sent by either side during the TLS/DTLS session is first hashed using the hash algorithm chosen in the Hello messages (to provide message integrity) and encrypted using the chosen private-key algorithm with the generated session keys.</span></span>

<span data-ttu-id="7162c-222">Son olarak, bir TLS/DTLS oturumu yalnızca Istemci veya sunucu bunu yapmayı seçerse başarılı bir şekilde sonlandırgirebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-222">Finally, a TLS/DTLS session can only be successfully ended if either the Client or Server chooses to do so.</span></span> <span data-ttu-id="7162c-223">Kesilen oturum, bir güvenlik ihlali olarak değerlendirilir (bir saldırgan tüm verilerin alınmasını engellemeye çalışıyor olabilir), bu nedenle her iki taraf da oturumu sonlandırmak istediğinde, bir CloseNotify uyarısı olarak adlandırılan özel bir bildirim gönderilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-223">A truncated session is considered a security breach (since an attacker may be attempting to prevent all the data being sent from being received) so a special notification is sent when either side wants to end the session, called a CloseNotify alert.</span></span> <span data-ttu-id="7162c-224">Başarılı bir oturum kapatması için hem istemci hem de sunucu bir CloseNotify uyarısı göndermelidir ve işlemelidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-224">Both the client and server must send and process a CloseNotify alert for a successful session shutdown.</span></span>

![Tipik bir DTLS el sıkışma oturumunun diyagramı.](media/image4.png)

<span data-ttu-id="7162c-226">**Şekil 3-tipik DTLS el sıkışma**</span><span class="sxs-lookup"><span data-stu-id="7162c-226">**Figure 3- Typical DTLS handshake**</span></span>

### <a name="initialization"></a><span data-ttu-id="7162c-227">Başlatma</span><span class="sxs-lookup"><span data-stu-id="7162c-227">Initialization</span></span>

<span data-ttu-id="7162c-228">NETX ve NetXDuo yığınının NetX güvenli DTLS kullanılmadan önce başlatılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-228">The NetX or NetXDuo stack must be initialized prior to using NetX Secure DTLS.</span></span> <span data-ttu-id="7162c-229">UDP işlemi için TCP/IP yığınını doğru şekilde başlatma hakkında bilgi için NetX veya NetXDuo Kullanıcı kılavuzuna bakın.</span><span class="sxs-lookup"><span data-stu-id="7162c-229">Refer to the NetX or NetXDuo User Guide for information on how to properly initialize the TCP/IP stack for UDP operation.</span></span>

<span data-ttu-id="7162c-230">NetX UDP başlatıldıktan sonra DTLS etkinleştirilebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-230">Once NetX UDP has been initialized, DTLS can be enabled.</span></span> <span data-ttu-id="7162c-231">Dahili olarak, tüm DTLS ağ trafiği ve işleme, kullanıcı müdahalesine gerek kalmadan NetX/NetXDuo Stack tarafından işlenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-231">Internally, all DTLS network traffic and processing is handled by the NetX/NetXDuo stack without requiring user intervention.</span></span> <span data-ttu-id="7162c-232">Ancak, DTLS, temel ağ yığınından ayrı olarak işlenmesi gereken bazı özel gereksinimlere sahiptir.</span><span class="sxs-lookup"><span data-stu-id="7162c-232">However, DTLS has some specific requirements that must be handled separately from the underlying network stack.</span></span> <span data-ttu-id="7162c-233">DTLS Istemci işlemi bu parametreler, \***NX_SECURE_DTLS_SESSION** _ ADLı DTLS denetim bloğuna atanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-233">DTLS Client operation these parameters are assigned to the DTLS control block called \***NX_SECURE_DTLS_SESSION** _.</span></span> <span data-ttu-id="7162c-234">DTLS sunucu işlemi için, denetim bloğu _ *_NX_SECURE_DTLS_SERVER_*\* olarak adlandırılır ve tek bir UDP bağlantı noktasında birden çok DTLS oturumunu işlemek için gereken altyapıyı içerir – bu, her bir TLS oturumunun tek bir TCP bağlantı noktasına bağlandığı TLS 'den farklı olduğunu unutmayın.</span><span class="sxs-lookup"><span data-stu-id="7162c-234">For DTLS Server operation, control block is called _ *_NX_SECURE_DTLS_SERVER_*\* and it contains the infrastructure needed to handle multiple DTLS sessions on a single UDP port – note that this is different from TLS where a each TLS session is bound to a single TCP port.</span></span>

<span data-ttu-id="7162c-235">İki DTLS modu, sunucu ve Istemci, bir uygulamada etkinleştirilebilir (ancak NetX yuvası başına yalnızca bir mod) ve her birinin aşağıda ayrıntılı olarak belirli gereksinimleri vardır.</span><span class="sxs-lookup"><span data-stu-id="7162c-235">The two DTLS modes, Server and Client, may be enabled in an application (but only one mode per NetX socket), and each have their own specific requirements, detailed below.</span></span>

### <a name="initialization--dtls-server"></a><span data-ttu-id="7162c-236">Başlatma – DTLS sunucusu</span><span class="sxs-lookup"><span data-stu-id="7162c-236">Initialization – DTLS Server</span></span>

<span data-ttu-id="7162c-237">NetX güvenli DTLS sunucu modu, temeldeki ağ aktarım protokolü için UDP kullanılması nedeniyle TLS sunucu modundan farklıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-237">NetX Secure DTLS Server mode differs from TLS Server mode due to the use of UDP for the underlying network transport protocol.</span></span> <span data-ttu-id="7162c-238">TCP ile bağlantı noktası, TLS oturumu süresince tek bir uzak ana bilgisayara bağlanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-238">With TCP, the port is bound to a single remote host for the duration of the TLS session.</span></span> <span data-ttu-id="7162c-239">UDP, uzak ana bilgisayarla ilgili olarak bir durum kavramı yoktur, bu nedenle farklı konaklardaki DTLS isteklerinin hepsi aynı UDP arabiriminde alınır.</span><span class="sxs-lookup"><span data-stu-id="7162c-239">UDP has no notion of state with regard to the remote host so DTLS requests from different hosts will all be received on the same UDP interface.</span></span> <span data-ttu-id="7162c-240">Bu nedenle, DTLS 'in, TLS ve TCP gibi yuvaya güvenmek yerine oturum durumu koruması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-240">Therefore, DTLS must maintain session state rather than relying on the socket as with TLS and TCP.</span></span> <span data-ttu-id="7162c-241">Bu nedenle, DTLS sunucu denetim bloğu (NX_SECURE_DTLS_SERVER), uzak ana bilgisayar bilgilerinin (IP adresi ve bağlantı noktası) DTLS oturumlarına eşleşmesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-241">For this reason, the DTLS Server control block (NX_SECURE_DTLS_SERVER) maintains a mapping of remote host information (IP address and port) to DTLS sessions.</span></span> <span data-ttu-id="7162c-242">Bir DTLS sunucusuna atanan UDP yuvasında tüm gelen veriler, uzak ana bilgisayara bağlı olarak mevcut veya yeni bir DTLS oturumuna eşlenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-242">All incoming data on the UDP socket assigned to a DTLS Server will be mapped to an existing or new DTLS session based on the remote host.</span></span> <span data-ttu-id="7162c-243">Bu nedenle, DTLS sunucusu oluşturma, TLS ve DTLS Istemcisinin gerek duyduğu birkaç ek parametre gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7162c-243">For this reason, the DTLS server creation requires several additional parameters beyond what TLS and DTLS Client need.</span></span>

<span data-ttu-id="7162c-244">DTLS sunucu denetim bloğu, TLS cipherpaketlerine ve şifre karalama alanı/meta veri arabelleğinin yanı sıra DTLS sunucuları, DTLS oturumlarını sürdürmek için bir arabellek ve gelen DTLS kayıtlarının şifresini çözmek için kullanılan bir paket yeniden birleştirme arabelleği gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7162c-244">In addition to the DTLS Server control block, TLS ciphersuites, and cipher scratchspace/metadata buffer, DTLS Servers require a buffer to maintain DTLS sessions and a packet reassembly buffer used to decrypt incoming DTLS records.</span></span>

<span data-ttu-id="7162c-245">DTLS sunucuları, oturum arabelleklerine ek olarak, bağlanan TLS istemcisine TLS sunucusunu tanımlamak için kullanılan bir belge olan *dijital bir sertifika* ve genellikle RSA şifreleme algoritması için de karşılık gelen *özel anahtarı* gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7162c-245">In addition to the session buffers, DTLS Servers require a *Digital Certificate*, which is a document used to identify the TLS server to the connecting TLS client, and the certificates corresponding *Private Key*, usually for the RSA encryption algorithm.</span></span> <span data-ttu-id="7162c-246">International Telekomünikasyon Birliği X. 509.440 standart, TLS/DTLS tarafından kullanılan sertifika biçimini belirtir ve X. 509.952 dijital sertifikaları oluşturmak için çok sayıda yardımcı program vardır.</span><span class="sxs-lookup"><span data-stu-id="7162c-246">The International Telecommunications Union X.509 standard specifies the certificate format used by TLS/DTLS and there are numerous utilities for creating X.509 digital certificates.</span></span>

<span data-ttu-id="7162c-247">NetX güvenli DTLS için, X. 509.440 sertifikası ASN. 1 ' in Distinguished Encoding Rules (DER) biçimi kullanılarak ikili kodlanmış olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-247">For NetX Secure DTLS, the X.509 certificate must be binary-encoded using the Distinguished Encoding Rules (DER) format of ASN.1.</span></span> <span data-ttu-id="7162c-248">DER, sertifikalar için Standart TLS-kablolu ikili biçimidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-248">DER is the standard TLS over-the-wire binary format for certificates.</span></span>

<span data-ttu-id="7162c-249">Belirtilen sertifikayla ilişkili özel anahtar DER-Encoded PKCS # 1 biçiminde olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-249">The private key associated with the provided certificate must be in DER-Encoded PKCS#1 format.</span></span> <span data-ttu-id="7162c-250">Özel anahtar yalnızca cihazda kullanılır ve hiçbir şekilde kablo üzerinden aktarılmaz.</span><span class="sxs-lookup"><span data-stu-id="7162c-250">The private key is only used on the device and will never be transmitted over the wire.</span></span> <span data-ttu-id="7162c-251">TLS/DTLS iletişimleri için güvenlik sağlayan özel anahtarları güvende tutun!</span><span class="sxs-lookup"><span data-stu-id="7162c-251">Keep private keys safe as they provide the security for TLS/DTLS communications!</span></span>

<span data-ttu-id="7162c-252">DTLS sunucu sertifikasını başlatmak için, uygulama DER ile kodlanmış X. 509.952 sertifikasını ve isteğe bağlı DER kodlu PKCS # 1 RSA özel anahtar verilerini, ***nx_secure_x509_certificate_intialize*** hizmetini kullanarak, **NX_SECURE_X509_CERT** yapısını TLS tarafından kullanılmak üzere uygun sertifika verileriyle dolduran bir arabelleğe işaretçi sağlamalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-252">To initialize the DTLS Server certificate, the application must provide a pointer to a buffer containing the DER-encoded X.509 certificate and optional DER-encoded PKCS#1 RSA private key data using the ***nx_secure_x509_certificate_intialize*** service, which populates the **NX_SECURE_X509_CERT** structure with the appropriate certificate data for use by TLS.</span></span>

<span data-ttu-id="7162c-253">Sunucu sertifikası başlatıldıktan sonra, ***nx_secure_dtls_server_local_certificate_add*** HIZMETI kullanılarak TLS denetim bloğuna eklenmelidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-253">Once the server certificate has been initialized, it must be added to the TLS control block using the ***nx_secure_dtls_server_local_certificate_add*** service.</span></span>

<span data-ttu-id="7162c-254">Sunucunun sertifikası DTLS sunucu denetim bloğuna eklendikten sonra, sunucu güvenli DTLS iletişimleri için kullanılabilir (Yukarıdaki örneğe bakın).</span><span class="sxs-lookup"><span data-stu-id="7162c-254">Once the server’s certificate has been added to the DTLS Server control block, the server can be used for secure DTLS communications (see example above).</span></span>

### <a name="initialization--dtls-client"></a><span data-ttu-id="7162c-255">Başlatma – DTLS Istemcisi</span><span class="sxs-lookup"><span data-stu-id="7162c-255">Initialization – DTLS Client</span></span>

<span data-ttu-id="7162c-256">UDP yuvası üzerinden uzak ana bilgisayara yalnızca tek bir giden bağlantı olduğundan, NetX güvenli DTLS Istemci modu, DTLS sunucusuyla karşılaştırıldığında basit bir işlemdir.</span><span class="sxs-lookup"><span data-stu-id="7162c-256">NetX Secure DTLS Client mode is simple in operation compared to the DTLS server since there is only a single outgoing connection to the remote host over the UDP socket.</span></span>

<span data-ttu-id="7162c-257">Bir DTLS Istemcisini ayarlamak için, güvenilen sertifika yetkililerinden (CA 'lar) X. 509.952 kodlu dijital sertifikaların bir koleksiyonu olan *Güvenilen bir sertifika deposu* gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-257">To setup a DTLS Client, it requires a *Trusted Certificate Store*, which is a collection of X.509-encoded digital certificates from trusted Certificate Authorities (CA’s).</span></span> <span data-ttu-id="7162c-258">Bu sertifikaların, DTLS protokolünün "güvenilir" olması ve DTLS sunucu varlıklarının NetX güvenli DTLS Istemci uygulamasına verdiği sertifikaların kimlik doğrulaması için temel olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-258">These certificates are assumed by the DTLS protocol to be “trusted” and serve as the basis for authenticating certificates provided by DTLS server entities to the NetX Secure DTLS Client application.</span></span>

<span data-ttu-id="7162c-259">Güvenilen CA sertifikası, başka bir CA tarafından *otomatik olarak imzalanmış* veya imzalı olabilir, bu durumda sertifikaya BIR *ara CA* (ICA) denir.</span><span class="sxs-lookup"><span data-stu-id="7162c-259">A trusted CA certificate may either be *self-signed* or signed by another CA, in which case that certificate is called an *Intermediate CA* (ICA).</span></span> <span data-ttu-id="7162c-260">Tipik bir TLS/DTLS uygulamasında sunucu, sunucu sertifikasıyla birlikte ICA sertifikalarını sağlar, ancak başarılı kimlik doğrulaması için tek gereksinim, sunucu sertifikasından güvenilen sertifika deposundaki güvenilir bir CA sertifikasına geri doğru şekilde izlenebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-260">In a typical TLS/DTLS application, the server provides the ICA certificates along with its server certificate, but the only requirement for successful authentication is that a chain of issuers (certificates used to sign other certificates) can be traced from the server certificate back to a trusted CA certificate in the Trusted Certificate Store.</span></span> <span data-ttu-id="7162c-261">Bu zincir bir *güven zinciri* veya *sertifika zinciri* olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="7162c-261">This chain is known as a *chain of trust* or *certificate chain*.</span></span>

<span data-ttu-id="7162c-262">Güvenilen bir CA veya ICA sertifikası başlatmak için, uygulamanın, _ *NX_SECURE_X509_CERT*\* yapısını TLS tarafından kullanılmak üzere uygun sertifika verileriyle dolduran, \***nx_secure_x509_certificate_intialize** _ hizmetini kullanarak der kodlu X. 509.440 sertifikasını içeren bir arabellek işaretçisi sağlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-262">To initialize a trusted CA or ICA certificate, the application must provide a pointer to a buffer containing the DER-encoded X.509 certificate using the ***nx_secure_x509_certificate_intialize** _ service, which populates the _ *NX_SECURE_X509_CERT** structure with the appropriate certificate data for use by TLS.</span></span>

<span data-ttu-id="7162c-263">DTLS Istemcisinin Ayrıca gelen sunucu sertifikasının ayrılması için (önceden paylaşılan anahtar modunun kullanılmadığını varsayarak) ve paketlerin Şifresi çözülecek DTLS kayıtlarına paket montajı için alan bulunması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-263">The DTLS Client also needs space for the incoming server certificate to be allocated (assuming a Pre-Shared Key mode is not being used) and a buffer for assembling packets into DTLS records to be decrypted.</span></span> <span data-ttu-id="7162c-264">Bu arabellekler ***nx_secure_dtls_session_create*** hizmetine parametreler olarak geçirilir (daha fazla bilgi için bkz. API Başvurusu).</span><span class="sxs-lookup"><span data-stu-id="7162c-264">These buffers are passed in as parameters to the ***nx_secure_dtls_session_create*** service (see API reference for more information).</span></span>

<span data-ttu-id="7162c-265">Başlatılmış olan güvenilen sertifikalar, ***nx_secure_dtls_session_trusted_certificate_add*** hizmeti kullanılarak oluşturulan DTLS oturum denetim bloğuna eklenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-265">Trusted certificates that have been initialized are then added to the created DTLS session control block using the ***nx_secure_dtls_session_trusted_certificate_add*** service.</span></span> <span data-ttu-id="7162c-266">Bir sertifika eklenemedi DTLS Istemci oturumunun, uzak sunucu konaklarının kimliğini doğrulamak için DTLS protokolünün bir yolu olacağı için başarısız olmasına neden olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-266">Failure to add a certificate will cause the DTLS Client session to fail as there will be no way for the DTLS protocol to authenticate remote server hosts.</span></span>

<span data-ttu-id="7162c-267">Güvenilen sertifika deposu oluşturulduktan sonra, oturum güvenli bir TLS Istemci bağlantısı kurmak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-267">Once the Trusted Certificate Store has been created the session may be used to establish a secure TLS Client connection.</span></span>

### <a name="application-interface-calls"></a><span data-ttu-id="7162c-268">Uygulama arabirimi çağrıları</span><span class="sxs-lookup"><span data-stu-id="7162c-268">Application Interface Calls</span></span>

<span data-ttu-id="7162c-269">NetX güvenli DTLS uygulamaları, genellikle ThreadX RTOS altında çalışan uygulama iş parçacıklarında işlev çağrıları yapar.</span><span class="sxs-lookup"><span data-stu-id="7162c-269">NetX Secure DTLS applications will typically make function calls from within application threads running under the ThreadX RTOS.</span></span> <span data-ttu-id="7162c-270">Özellikle temel ağ iletişim protokolleri (örn. UDP ve IP) için bazı başlatma, \*\*\*tx_application_define \*\*\* öğesinden çağrılabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-270">Some initialization, particularly for the underlying network communications protocols (e.g. UDP and IP) may be called from \***tx_application_define\*.**</span></span> <span data-ttu-id="7162c-271">Ağ iletişimlerini başlatma hakkında daha fazla bilgi için bkz. NetX/NetXDuo Kullanıcı Kılavuzu.</span><span class="sxs-lookup"><span data-stu-id="7162c-271">See the NetX/NetXDuo User Guide for more information on initializing network communications.</span></span>

<span data-ttu-id="7162c-272">DTLS, işlemci yoğunluklu işlemler olan şifreleme yordamlarının yoğun bir şekilde kullanılmasını sağlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-272">DTLS makes heavy use of encryption routines which are processor-intensive operations.</span></span> <span data-ttu-id="7162c-273">Genellikle, bu işlemler çağıran iş parçacığı bağlamında gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-273">Generally, these operations will be performed within the context of calling thread.</span></span>

### <a name="dtls-session-start"></a><span data-ttu-id="7162c-274">DTLS oturum başlangıcı</span><span class="sxs-lookup"><span data-stu-id="7162c-274">DTLS Session Start</span></span>

<span data-ttu-id="7162c-275">DTLS, çalışması için temeldeki bir aktarım katmanı ağı Protokolü gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7162c-275">DTLS requires an underlying transport-layer network protocol in order to function.</span></span> <span data-ttu-id="7162c-276">Genellikle kullanılan protokol TCP 'dir.</span><span class="sxs-lookup"><span data-stu-id="7162c-276">The protocol typically used is TCP.</span></span> <span data-ttu-id="7162c-277">NetX güvenli TLS oturumu oluşturmak için, DTLS Istemcileri için **_nx_secure_dtls_client_session_start_** hizmetine bir **NX_UDP_SOCKET** oluşturulması ve geçirilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-277">In order to establish a NetX Secure TLS session an **NX_UDP_SOCKET** must be created and passed into the **_nx_secure_dtls_client_session_start_** service for DTLS Clients.</span></span>

<span data-ttu-id="7162c-278">DTLS sunucuları farklı şekilde çalışır.</span><span class="sxs-lookup"><span data-stu-id="7162c-278">DTLS Servers operate differently.</span></span> <span data-ttu-id="7162c-279">Gelen DTLS Istemci istekleri için kullanılan UDP yuvası NX_SECURE_DTLS_SERVER denetim bloğunda bulunur ve yerel UDP bağlantı noktasını parametre olarak alan \***nx_secure_dtls_server_create** _ çağrısıyla başlatılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-279">The UDP socket used for incoming DTLS Client requests is contained within the NX_SECURE_DTLS_SERVER control block and is initialized in the call to \***nx_secure_dtls_server_create** _, which takes the local UDP port as a parameter.</span></span> <span data-ttu-id="7162c-280">Daha sonra hizmet _*_nx_secure_dtls_server_start_*_ , gelen istekleri işlemek için DTLS sunucusunu başlatmak üzere kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-280">The service _*_nx_secure_dtls_server_start_*_ is then used to start the DTLS Server to handle incoming requests.</span></span> <span data-ttu-id="7162c-281">Tüm gelen istekler, _nx_secure_dtls_server_create \*: biri bağlantılar ve diğeri alma bildirimleri için sunulan geri çağırma yordamlarında işlenir. Bir bağlantı bildirimi alındığında DTLS oturumunun başlamasını işleyecek uygulamanın (Connect Notification geri araması DTLS tarafından çağrılır), \***nx_secure_dtls_server_session_start** çağırarak uygulamaya kadar_ olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-281">All incoming requests are handled in callback routines provided to _nx_secure_dtls_server_create\*: one for connections and one for receive notifications. It is up to the application to handle starting the DTLS session when a connection notification is received (the connect notify callback is invoked by DTLS) by calling \***nx_secure_dtls_server_session_start**_.</span></span> <span data-ttu-id="7162c-282">Ayrıca, _ *_nx_secure_dtls_session_receive_* \* çağırarak, alma bildirimi geri araması çağrıldığında (tamamlanmış bir DTLS el sıkışmasını izleyen) uygulamanın gelen verileri işlemesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-282">The application also must handle incoming data when the receive notify callback is invoked (which follows a completed DTLS handshake) by calling _\*_nx_secure_dtls_session_receive_\*\*.</span></span> <span data-ttu-id="7162c-283">Bunun Ayrıntıları yukarıdaki örnekte ve yukarıda bahsedilen hizmetlerin her biri için API başvurusunda verilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7162c-283">The details of this are provided in the example above and in the API reference for each of the above mentioned services.</span></span>

### <a name="dtls-packet-allocation"></a><span data-ttu-id="7162c-284">DTLS paket ayırması</span><span class="sxs-lookup"><span data-stu-id="7162c-284">DTLS Packet Allocation</span></span>

<span data-ttu-id="7162c-285">NetX güvenli DTLS, _*_nx_packet_allocate_*_ hizmetini çağırmak yerine NETX/NetXDuo TCP (***NX_PACKET** _) ile aynı paket yapısını kullanır; bu nedenle, DTLS üst bilgisi için alanın doğru ayrılabileceği şekilde _ *_nx_secure_dtls_packet_allocate_** hizmetinin çağrılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-285">NetX Secure DTLS uses the same packet structure as NetX/NetXDuo TCP (***NX_PACKET** _) except that instead of calling the _*_nx_packet_allocate_*_ service, the _ *_nx_secure_dtls_packet_allocate_** service must be called so that space for the DTLS header may be allocated properly.</span></span>

### <a name="dtls-session-send"></a><span data-ttu-id="7162c-286">DTLS oturum gönderme</span><span class="sxs-lookup"><span data-stu-id="7162c-286">DTLS Session Send</span></span>

<span data-ttu-id="7162c-287">TLS oturumu başladıktan sonra, uygulama ***nx_secure_dtls_session_send*** hizmetini kullanarak veri gönderebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-287">Once the TLS session has started, the application may send data using the ***nx_secure_dtls_session_send*** service.</span></span> <span data-ttu-id="7162c-288">Gönderme hizmeti, gönderilen verileri, hedef IP adresini ve hedef UDP bağlantı noktasını içeren bir _ *_NX_PACKET_*\* veri yapısı alarak, \***nx_udp_socket_send** _ hizmetinde kullanılan ile aynıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-288">The send service is identical in use to the ***nx_udp_socket_send** _ service, taking an _ *_NX_PACKET_** data structure containing the data being sent, a target IP address, and a target UDP port.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7162c-289">Nx_secure_dtls_session_send kullanarak veri gönderirken, oturumu yeni bir adrese ve UDP bağlantı noktasına (yaygın değil) taşımak için bir mekanizma olmadıkça, DTLS oturumunu kurmak için kullanılan aynı IP adresi ve bağlantı noktasının kullanılması önemlidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-289">When sending data using nx_secure_dtls_session_send, it is important to use the same IP address and port that were used to establish the DTLS session, unless there is a mechanism in place to move the session to a new address and UDP port on-the-fly (this is not common).</span></span>

<span data-ttu-id="7162c-290">DTLS üzerinden gönderilen tüm veriler NX güvenli DTLS yığını ve gönderilmeden önce yapılandırılan şifreleme yordamları tarafından şifrelenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-290">Any data sent over DTLS will be encrypted by the NX Secure DTLS stack and the configured encryption routines before being sent.</span></span>

### <a name="dtls-session-receive"></a><span data-ttu-id="7162c-291">DTLS oturum alma</span><span class="sxs-lookup"><span data-stu-id="7162c-291">DTLS Session Receive</span></span>

<span data-ttu-id="7162c-292">DTLS oturumu başlatıldıktan sonra uygulama, \***nx_secure_Dtls_session_receive** _ hizmetini kullanarak veri almaya başlayabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-292">Once the DTLS session has started, the application may begin receiving data using the \***nx_secure_Dtls_session_receive** _ service.</span></span> <span data-ttu-id="7162c-293">DTLS oturumunun gönderilmesi gibi, bu hizmet, gelen verilerin, paket yapısına döndürülmeden önce DTLS Stack tarafından çözülmesi ve doğrulanması dışında _ *_nx_udp_socket_receive_* \* ile aynıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-293">Like the DTLS Session send, this service is identical in use to _\*_nx_udp_socket_receive_\*\*, except that the incoming data is decrypted and verified by the DTLS stack before being returned in the packet structure.</span></span>

### <a name="tls-session-close"></a><span data-ttu-id="7162c-294">TLS oturumu kapatma</span><span class="sxs-lookup"><span data-stu-id="7162c-294">TLS Session Close</span></span>

<span data-ttu-id="7162c-295">DTLS oturumu tamamlandıktan sonra, her iki DTLS istemcisi ve sunucusu, oturumu kapatmak için diğer tarafa bir CloseNotify uyarısı göndermelidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-295">Once a DTLS session is complete, both the DTLS client and server must send a CloseNotify alert to the other side to shut down the session.</span></span> <span data-ttu-id="7162c-296">Başarılı bir oturumun kapatılmasını sağlamak için her iki taraf da uyarıyı alıp işlemelidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-296">Both sides must receive and process the alert to ensure a successful session shutdown.</span></span>

<span data-ttu-id="7162c-297">Uzak ana bilgisayar bir CloseNotify uyarısı gönderirse, \***nx_secure_dtls_session_receive** _ hizmetine yapılan tüm çağrılar uyarıyı işler, karşılık gelen uyarıyı uzak ana bilgisayara geri gönderir ve _ *_NX_SECURE_TLS_SESSION_CLOSED_* \* değerini döndürür.</span><span class="sxs-lookup"><span data-stu-id="7162c-297">If the remote host sends a CloseNotify alert, any calls to the ***nx_secure_dtls_session_receive** _ service will process the alert, send the corresponding alert back to the remote host, and return a value of _*_NX_SECURE_TLS_SESSION_CLOSED_\*\*.</span></span> <span data-ttu-id="7162c-298">Oturum kapatıldıktan sonra, bu DTLS oturumunda veri gönderme veya alma girişimleri başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-298">Once the session is closed, any further attempts to send or receive data with that DTLS session will fail.</span></span>

<span data-ttu-id="7162c-299">Uygulama TLS oturumunu kapatmayı istiyorsa, \***nx_secure_dtls_session_end** _ hizmeti çağrılmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-299">If the application wishes to close the TLS session, the \***nx_secure_dtls_session_end** _ service must be called.</span></span> <span data-ttu-id="7162c-300">Hizmet, CloseNotify uyarısını gönderir ve yanıt CloseNotify 'ı işler.</span><span class="sxs-lookup"><span data-stu-id="7162c-300">The service will send the CloseNotify alert and process the response CloseNotify.</span></span> <span data-ttu-id="7162c-301">Yanıt alınmıyorsa, DTLS oturumunun hatalı bir güvenlik ihlali olup olmadığını belirten bir _ *_NX_SECURE_TLS_SESSION_CLOSE_FAIL_*\* hata değeri döndürülür.</span><span class="sxs-lookup"><span data-stu-id="7162c-301">If the response is not received, an error value of _ *_NX_SECURE_TLS_SESSION_CLOSE_FAIL_*\* will be returned, indicating that the DTLS session was not cleanly shutdown, a possible security breach.</span></span>

### <a name="tlsdtls-alerts"></a><span data-ttu-id="7162c-302">TLS/DTLS uyarıları</span><span class="sxs-lookup"><span data-stu-id="7162c-302">TLS/DTLS Alerts</span></span>

<span data-ttu-id="7162c-303">TLS/DTLS, en yüksek güvenliği sağlamak üzere tasarlanmıştır, bu nedenle protokoldeki tüm hatalı davranışlar olası bir güvenlik ihlali olarak kabul edilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-303">TLS/DTLS is designed to provide maximum security, so any errant behavior in the protocol is considered a potential security breach.</span></span> <span data-ttu-id="7162c-304">Bu nedenle, ileti işleme veya şifreleme/şifre çözme işlemlerinin her türlü hatası, el sıkışma veya oturumu hemen sonlandıran önemli hatalar olarak değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-304">For this reason, any errors in message processing or encryption/decryption are considered fatal errors that terminate the handshake or session immediately.</span></span>

<span data-ttu-id="7162c-305">Yerel bir uygulamadaki hataların işlenmesi oldukça basittir, uzak Konağın durumu düzgün bir şekilde işlemek ve olası güvenlik ihlallerinin oluşmasını engellemek için bir hata oluştuğunu bilmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-305">While handling errors in a local application is relatively straightforward, the remote host needs to know that an error has occurred in order to properly handle the situation and prevent any further possible security breaches.</span></span> <span data-ttu-id="7162c-306">Bu nedenle, TLS/DTLS herhangi bir hata durumunda uzak ana bilgisayara bir *Uyarı* iletisi gönderir.</span><span class="sxs-lookup"><span data-stu-id="7162c-306">For this reason, TLS/DTLS will send an *Alert* message to the remote host upon any error.</span></span>

<span data-ttu-id="7162c-307">Uyarılar, diğer TLS/DTLS iletileriyle aynı şekilde işlenir ve bir saldırganın, belirtilen uyarı türünden bilgi toplamasını engellemek için oturum sırasında şifrelenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-307">Alerts are treated in the same manner as any other TLS/DTLS messages and are encrypted during the session to prevent an attacker from gathering information from the type of alert provided.</span></span> <span data-ttu-id="7162c-308">El sıkışma sırasında gönderilen uyarılar, olası bir saldırgan tarafından elde edilen bilgi miktarını sınırlamak için kapsamda sınırlanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-308">During the handshake, the alerts sent are limited in scope to limit the amount of information that could be obtained by a potential attacker.</span></span>

<span data-ttu-id="7162c-309">TLS/DTLS oturumunu kapatmak için kullanılan CloseNotify uyarısı, önemli olmayan tek uyarıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-309">The CloseNotify alert, used to close the TLS/DTLS session, is the only non-fatal alert.</span></span> <span data-ttu-id="7162c-310">Bir uyarı olarak kabul edildiği ve uyarı iletisi olarak gönderildiği sürece bir CloseNotify, bir hata oluştuğunu belirtmeyen diğer uyarıların aksine.</span><span class="sxs-lookup"><span data-stu-id="7162c-310">While it is considered an alert and sent as an alert message, a CloseNotify is unlike other alerts in that it does not indicate an error has occurred.</span></span>

### <a name="tlsdtls-session-renegotiation-and-resumption"></a><span data-ttu-id="7162c-311">TLS/DTLS oturumu yeniden anlaşması ve sürdürme</span><span class="sxs-lookup"><span data-stu-id="7162c-311">TLS/DTLS Session Renegotiation and Resumption</span></span>

<span data-ttu-id="7162c-312">TLS, mevcut bir TLS oturumu bağlamında yalnızca TLS oturum parametrelerinin yeniden anlaşması olan "yeniden anlaşma" kavramını destekler.</span><span class="sxs-lookup"><span data-stu-id="7162c-312">TLS supports the notion of “renegotiation” which is simply a renegotiation of the TLS session parameters within the context of an existing TLS session.</span></span>

<span data-ttu-id="7162c-313">TLS oturum *sürdürme* , bazı benzerlikler olmasına rağmen oturum yeniden *anlaşması* ile karıştırılmamalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-313">TLS session *resumption* should not be confused with session *renegotiation*, despite some similarities.</span></span> <span data-ttu-id="7162c-314">Oturum yeniden *anlaşması* , mevcut bir TLS oturumunda yeni bir el sıkışma başlatmayı da içerir. oturum *sürdürme* , tam bir TLS el SıKıŞMASı yapmadan kapalı bir TLS oturumunun yeniden başlatılmasını içeren tamamen isteğe bağlı bir özelliktir.</span><span class="sxs-lookup"><span data-stu-id="7162c-314">Where session *renegotiation* involves starting a new handshake within an existing TLS session, session *resumption* is a purely optional feature that involves restarting a closed TLS session without performing a complete TLS handshake.</span></span>

<span data-ttu-id="7162c-315">NX güvenli DTLS, uzak ana bilgisayarlardan gelen yeniden anlaşma isteklerini işler.</span><span class="sxs-lookup"><span data-stu-id="7162c-315">NX Secure DTLS handles incoming renegotiation requests from remote hosts.</span></span> <span data-ttu-id="7162c-316">Oturum sürdürme **desteklemez.**</span><span class="sxs-lookup"><span data-stu-id="7162c-316">It does **not** support session resumption.</span></span> <span data-ttu-id="7162c-317">Bu özelliklerin daha kapsamlı bir tartışması NetX güvenli TLS Kullanıcı kılavuzunun Bölüm 3 ' te bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-317">A more complete discussion of these features can be found in Chapter 3 of the NetX Secure TLS User Guide.</span></span>

### <a name="protocol-layering"></a><span data-ttu-id="7162c-318">Protokol katmanlama</span><span class="sxs-lookup"><span data-stu-id="7162c-318">Protocol Layering</span></span>

<span data-ttu-id="7162c-319">TLS Protokolü (ve dolayısıyla DTLS), Aktarım Katmanı (örn. TCP veya UDP) ile uygulama katmanı arasındaki ağ yığınına uyar.</span><span class="sxs-lookup"><span data-stu-id="7162c-319">The TLS protocol (and therefore DTLS as well) fits into the networking stack between the transport layer (e.g. TCP or UDP) and the application layer.</span></span> <span data-ttu-id="7162c-320">TLS bazen bir Aktarım Katmanı Protokolü (Bu nedenle *Aktarım katmanı* güvenliği) olarak kabul edilir, ancak temel alınan ağ protokolleriyle ilgili bir uygulama olarak davrandığı için bazen uygulama katmanında gruplandırılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-320">TLS is sometimes considered a transport-layer protocol (hence *Transport Layer* Security) but because it acts as an application with regard to the underlying network protocols it is sometimes grouped into the application layer.</span></span>

<span data-ttu-id="7162c-321">TLS, TCP gibi sıralı ve kayıpsız teslimi destekleyen bir aktarım katmanı protokolü gerektirir.</span><span class="sxs-lookup"><span data-stu-id="7162c-321">TLS requires a transport layer protocol that supports in-order and lossless delivery, such as TCP.</span></span> <span data-ttu-id="7162c-322">Bu gereksinim nedeniyle, UDP veri birimlerinin teslimini garanti edemediğinden TLS UDP üzerinde çalıştırılamaz.</span><span class="sxs-lookup"><span data-stu-id="7162c-322">Due to this requirement, TLS cannot run on top of UDP since UDP does not guarantee delivery of datagrams.</span></span> <span data-ttu-id="7162c-323">*DTLS* , bir TLS sürümü olarak, UDP gibi bir veri birimi protokolü üzerinden TLS güvenliği gerektiren uygulamalar için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-323">*DTLS* is a modified version of TLS, is used for applications that need the security of TLS over a datagram protocol like UDP.</span></span>

![TLS protokolü katmanlama diyagramı.](media/image6.png)

<span data-ttu-id="7162c-325">**Şekil 4-TCP/IP, UDP ve TLS/DTLS protokol katmanları**</span><span class="sxs-lookup"><span data-stu-id="7162c-325">**Figure 4- TCP/IP, UDP and TLS/DTLS protocol layers**</span></span>

## <a name="network-communications-security-and-encryption"></a><span data-ttu-id="7162c-326">Ağ Iletişimi güvenliği ve şifreleme</span><span class="sxs-lookup"><span data-stu-id="7162c-326">Network Communications Security and Encryption</span></span>

<span data-ttu-id="7162c-327">Kamu ağları ve Internet üzerinden iletişimin güvenliğini sağlamak, çok sayıda kitap, makale ve çözüm konusunun önemli öneme sahip bir konudur.</span><span class="sxs-lookup"><span data-stu-id="7162c-327">Securing communications over public networks and the Internet is a critically important topic and the subject of vast numbers of books, articles, and solutions.</span></span> <span data-ttu-id="7162c-328">Bu konu göz önünde bulundurularak, ancak yalnızca hedeflenen hedefin bu bilgileri erişebileceği veya değiştirebilmesini sağlamak için bir ağ üzerinden bilgi gönderilirken daha kolay bir fikir olabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-328">The topic is mind-bogglingly complex, but can be reduced to a simple idea: sending information over a network so that only the intended target can access or change that information.</span></span> <span data-ttu-id="7162c-329">Bu üç önemli kavrama bölünür: Gizlilik, bütünlük ve kimlik doğrulama.</span><span class="sxs-lookup"><span data-stu-id="7162c-329">This breaks down into three important concepts: secrecy, integrity, and authentication.</span></span> <span data-ttu-id="7162c-330">TLS/DTLS Protokolü, her üç için çözüm sağlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-330">The TLS/DTLS protocol provides solutions for all three.</span></span>

<span data-ttu-id="7162c-331">Şifreleme, TLS ve DTLS protokolleri içinde gizlilik, bütünlük ve kimlik doğrulaması sağlamak için farklı yollarla kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-331">Encryption is used in different ways to provide secrecy, integrity, and authentication within the TLS and DTLS protocols.</span></span> <span data-ttu-id="7162c-332">TLS ya da bir oturum veya sunucu örneği oluşturulduktan sonra şifreleme, şifrelemeyi kullanmak için esnek bir çerçeve sağladığından şifrelemenin TLS 'e veya DTLS 'e sağlanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-332">The encryption must be supplied to TLS or DTLS upon creation of a session or server instance as TLS provides a flexible framework for using encryption and not the encryption itself.</span></span> <span data-ttu-id="7162c-333">NetX güvenli DTLS çoğu uygulama için gerekli şifreleme yordamlarını sağlar, böylece uygun şifrelemeyi bulma konusunda endişe etmeniz gerekmez.</span><span class="sxs-lookup"><span data-stu-id="7162c-333">NetX Secure DTLS provides the necessary encryption routines for most applications so you do not have to be concerned about finding appropriate encryption.</span></span>

<span data-ttu-id="7162c-334">Bu konuların daha ayrıntılı bir açıklaması NetX güvenli TLS Kullanıcı kılavuzunun Bölüm 3 ' te bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-334">A more detailed description of these topics can be found in Chapter 3 of the NetX Secure TLS User Guide.</span></span>

## <a name="tls-and-dtls-extensions"></a><span data-ttu-id="7162c-335">TLS ve DTLS uzantıları</span><span class="sxs-lookup"><span data-stu-id="7162c-335">TLS and DTLS Extensions</span></span>

<span data-ttu-id="7162c-336">TLS (ve bu nedenle DTLS), belirli uygulamalar için ek işlevler sağlayan çeşitli uzantılar sağlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-336">TLS (and therefore DTLS) provides a number of extensions that provide additional functionality for certain applications.</span></span> <span data-ttu-id="7162c-337">Bu uzantılar tipik olarak, bir uzak ana bilgisayara bir uzantı kullanmayı veya güvenli TLS oturumu oluştururken kullanılmak üzere ek ayrıntılar sağlamayı belirten ClientHello veya ServerHello iletilerinin bir parçası olarak gönderilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-337">These extensions are typically sent as part of the ClientHello or ServerHello messages, indicating to a remote host the desire to use an extension or providing additional details for use in establishing the secure TLS session.</span></span>

<span data-ttu-id="7162c-338">NETX güvenli DTLS, NetX güvenli TLS 'de bulunan tüm uzantıları destekler ve NetX güvenli TLS kullanıcı kılavuzunda, Bölüm 3 ' te bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-338">NetX Secure DTLS supports all of the extensions found in NetX Secure TLS, and a complete description of those can be found in the NetX Secure TLS User Guide, Chapter 3.</span></span>

## <a name="authentication-methods"></a><span data-ttu-id="7162c-339">Kimlik Doğrulaması Yöntemleri</span><span class="sxs-lookup"><span data-stu-id="7162c-339">Authentication Methods</span></span>

<span data-ttu-id="7162c-340">TLS ve DTLS, güvenli olmayan bir ağ üzerinden iki cihaz arasında güvenli bir bağlantı kurmak için çerçeve sağlar, ancak sorunun bir parçası bu bağlantının diğer ucundaki cihazın kimliğini öğrenmektir.</span><span class="sxs-lookup"><span data-stu-id="7162c-340">TLS and DTLS provide the framework for establishing a secure connection between two devices over an insecure network, but part of the problem is knowing the identity of the device on the other end of that connection.</span></span> <span data-ttu-id="7162c-341">Uzak ana bilgisayarların kimliğini doğrulamak için bir mekanizma olmadan, saldırganın güvenilen bir cihaz olarak oluşturabileceği önemsiz bir işlem haline gelir.</span><span class="sxs-lookup"><span data-stu-id="7162c-341">Without a mechanism for authenticating the identity of remote hosts, it becomes a trivial operation for an attacker to pose as a trusted device.</span></span>

<span data-ttu-id="7162c-342">Başlangıçta, IP adreslerini, donanım MAC adreslerini veya DNS 'yi kullanarak, bir ağdaki Konakları tanımlamak için görece yüksek düzeyde güven sağlayabilir, ancak TCP/IP teknolojisinin doğası ve adreslerin sızması ve DNS girdilerinin bozulmuş olması (örneğin, DNS önbelleği kirlenmesi aracılığıyla), TLS 'nin sahte kimliklere karşı ek bir koruma katmanı gerektirdiğinden emin olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-342">Initially, it may seem that using IP addresses, hardware MAC addresses, or DNS would provide a relatively high level of confidence for identifying hosts on a network, but given the nature of TCP/IP technology and the ease with which addresses can be spoofed and DNS entries corrupted (e.g. through DNS cache poisoning), it becomes clear that TLS needs an additional layer of protection against fraudulent identities.</span></span>

<span data-ttu-id="7162c-343">Bu ek kimlik doğrulama katmanını TLS için sağlayabilecek çeşitli mekanizmalar vardır ancak en sık kullanılan *dijital sertifikadır.*</span><span class="sxs-lookup"><span data-stu-id="7162c-343">There are various mechanisms that can provide this extra layer of authentication for TLS, but the most common is the *digital certificate.*</span></span> <span data-ttu-id="7162c-344">Diğer mekanizmalarda önceden paylaşılan anahtarlar (PSK) ve parola şemaları bulunur.</span><span class="sxs-lookup"><span data-stu-id="7162c-344">Other mechanisms include Pre-Shared Keys (PSK) and password schemes.</span></span>

### <a name="digital-cerificates"></a><span data-ttu-id="7162c-345">Dijital sertifika</span><span class="sxs-lookup"><span data-stu-id="7162c-345">Digital Cerificates</span></span>

<span data-ttu-id="7162c-346">Dijital sertifikalar, TLS 'de uzak ana bilgisayarın kimliğini doğrulamak için en sık kullanılan yöntemdir.</span><span class="sxs-lookup"><span data-stu-id="7162c-346">Digital certificates are the most common method for authenticating a remote host in TLS.</span></span> <span data-ttu-id="7162c-347">Esas olarak, dijital sertifika, bir bilgisayar ağındaki bir cihaz için kimlik bilgileri sağlayan belirli bir biçimlendirmeye sahip bir belgedir.</span><span class="sxs-lookup"><span data-stu-id="7162c-347">Essentially, a digital certificate is a document with specific formatting that provides identity information for a device on a computer network.</span></span>

<span data-ttu-id="7162c-348">TLS, normalde Uluslararası Telekomünikasyon birleşimi tarafından geliştirilen standart olan X. 509.440 adlı bir biçim kullanır, ancak TLS ana bilgisayarları kullanılan biçimde kabul ediyorsanız başka sertifika biçimleri de kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-348">TLS normally uses a format called X.509, a standard developed by the International Telecommunication Union, though other formats of certificates may be used if the TLS hosts can agree on the format being used.</span></span> <span data-ttu-id="7162c-349">X. 509.440, sertifikalar için belirli bir biçimi ve dijital bir belge oluşturmak için kullanılabilecek çeşitli kodlamaları tanımlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-349">X.509 defines a specific format for certificates and various encodings that can be used to produce a digital document.</span></span> <span data-ttu-id="7162c-350">TLS ile kullanılan en X. 509.440 sertifikaları, farklı bir telekomünikasyon standardı olan ASN. 1 ' in bir türevi kullanılarak kodlanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-350">Most X.509 certificates used with TLS are encoded using a variant of ASN.1, another telecommunications standard.</span></span> <span data-ttu-id="7162c-351">ASN. 1 içinde çeşitli dijital kodlamalar vardır ancak TLS sertifikaları için en yaygın kodlama Distinguished Encoding Rules (DER) standardıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-351">Within ASN.1 there are various digital encodings, but the most common encoding for TLS certificates is the Distinguished Encoding Rules (DER) standard.</span></span> <span data-ttu-id="7162c-352">DER, ASN. 1 temel kodlama kuralları 'nın (BER), belirsiz olacak şekilde tasarlanan, ayrıştırmayı kolaylaştırmak için basitleştirilmiş bir alt kümesidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-352">DER is a simplified subset of the ASN.1 Basic Encoding Rules (BER) that is designed to be unambiguous, making parsing easier.</span></span> <span data-ttu-id="7162c-353">Kablo üzerinden, TLS sertifikaları genellikle ikili DER olarak kodlanır ve bu, NetX Secure 'ın X. 509.440 sertifikalarını beklediği biçimdedir.</span><span class="sxs-lookup"><span data-stu-id="7162c-353">Over the wire, TLS certificates are usually encoded in binary DER, and this is the format that NetX Secure expects for X.509 certificates.</span></span>

<span data-ttu-id="7162c-354">DER biçimli ikili sertifikalar gerçek TLS protokolünde kullanılıyor olsa da, bunlar. pek,. CRT ve. p12 gibi dosya uzantılarına sahip bir dizi farklı kodlarda oluşturulup depolanabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-354">Though DER-formatted binary certificates are used in the actual TLS protocol, they may be generated and stored in a number of different encodings, with file extensions such as .pem, .crt, and .p12.</span></span> <span data-ttu-id="7162c-355">Farklı çeşitler farklı üreticilerin farklı uygulamaları tarafından kullanılır, ancak genel kullanıma sunulan araçlar kullanılarak tüm geliştiriciler DER 'a dönüştürülebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-355">The different variants are used by different applications from different manufacturers, but generally all can be converted into DER using widely available tools.</span></span>

<span data-ttu-id="7162c-356">Alternatif sertifika kodlamaları en yaygın olarak ped 'dir.</span><span class="sxs-lookup"><span data-stu-id="7162c-356">The most common of the alternative certificate encodings is PEM.</span></span> <span data-ttu-id="7162c-357">PEK biçimi (Privacy-Enhanced mail 'den), kodlama, e-posta veya Web tabanlı protokoller kullanılarak kolayca gönderilebilecek yazdırılabilir metinle sonuçlandığından, genellikle kullanılan DER kodlamasının temel 64 kodlu bir sürümüdür.</span><span class="sxs-lookup"><span data-stu-id="7162c-357">The PEM format (from Privacy-Enhanced Mail) is a base-64 encoded version of the DER encoding that is often used because the encoding results in printable text that can be easily sent using email or web-based protocols.</span></span>

<span data-ttu-id="7162c-358">NetX güvenli uygulamanız için bir sertifika oluşturmak, genel olarak bu el ile kapsam dışındadır, ancak OpenSSL komut satırı aracı ([www.OpenSSL.org](http://www.openssl.org)) yaygın olarak kullanılabilir ve çoğu biçim arasında dönüştürülebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-358">Generating a certificate for your NetX Secure application is generally outside the scope of this manual, but the OpenSSL command-line tool ([www.openssl.org](http://www.openssl.org)) is widely available and can convert between most formats.</span></span>

<span data-ttu-id="7162c-359">Uygulamanıza bağlı olarak, kendi sertifikalarınızı oluşturabilir, bir üretici veya devlet kurumuna sertifika verebilir veya ticari bir sertifika yetkilisinden sertifika satın alabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7162c-359">Depending on your application, you may generate your own certificates, be provided certificates by a manufacturer or government organization, or purchase certificates from a commercial certificate authority.</span></span>

<span data-ttu-id="7162c-360">NetX güvenli uygulamanızda dijital bir sertifika kullanmak için, önce sertifikanızı bir ikili DER biçimine dönüştürmeniz ve isteğe bağlı olarak ilişkili özel anahtarı (RSA için "Private üs") ikili biçime dönüştürmeniz gerekir, genellikle PKCS # 1 biçimli, DER kodlu bir RSA anahtarı.</span><span class="sxs-lookup"><span data-stu-id="7162c-360">To use a digital certificate in your NetX Secure application, you must first convert your certificate into a binary DER format and, optionally, convert the associated private key (the “private exponent” for RSA, for example) into a binary format, typically a PKCS#1-formatted, DER-encoded RSA key.</span></span> <span data-ttu-id="7162c-361">Dönüştürme işlemi tamamlandıktan sonra, sertifikayı ve özel anahtarı cihaza yüklemeniz gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-361">Once the conversion is complete, it is up to you to load the certificate and private key onto the device.</span></span> <span data-ttu-id="7162c-362">Olası seçenekler, Flash tabanlı bir dosya sistemi kullanmayı veya verilerden bir C dizisi oluşturmayı (Linux 'tan "XXD" gibi bir araç kullanarak) ve sertifikayı ve anahtarı sabit veri olarak uygulamanıza derlemeyi içerir.</span><span class="sxs-lookup"><span data-stu-id="7162c-362">Possible options include using a flash-based file system or generating a C array from the data (using a tool such as “xxd” from Linux) and compiling the certificate and key into your application as constant data.</span></span>

<span data-ttu-id="7162c-363">Sertifikanız cihaza yüklendikten sonra DTLS API 'SI, sertifikanızı bir DTLS oturumu veya sunucusuyla ilişkilendirmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-363">Once your certificate is loaded onto the device, the DTLS API can be used to associate your certificate with a DTLS session or server.</span></span>

<span data-ttu-id="7162c-364">NetX güvenli DTLS ile X. 509.440 sertifikalarının nasıl kullanılacağına ilişkin ayrıntılar ve örnekler için, NetX güvenli TLS Kullanıcı Kılavuzunda "X. 509.440 sertifikalarını NetX güvenli olarak Içeri aktarma" bölümüne bakın.</span><span class="sxs-lookup"><span data-stu-id="7162c-364">For details and examples on how to use X.509 certificates with NetX Secure DTLS, see the section “Importing X.509 certificates into NetX Secure” in the NetX Secure TLS User Guide.</span></span>

<span data-ttu-id="7162c-365">Daha fazla bilgi için API başvurusunda aşağıdaki DTLS hizmetlerine başvurun:</span><span class="sxs-lookup"><span data-stu-id="7162c-365">Refer to the following DTLS services in the API reference for more information:</span></span>

- <span data-ttu-id="7162c-366">nx_secure_x509_certificate_initialize,</span><span class="sxs-lookup"><span data-stu-id="7162c-366">nx_secure_x509_certificate_initialize,</span></span>
- <span data-ttu-id="7162c-367">nx_secure_dtls_session_local_certificate_add,</span><span class="sxs-lookup"><span data-stu-id="7162c-367">nx_secure_dtls_session_local_certificate_add,</span></span>
- <span data-ttu-id="7162c-368">nx_secure_dtls_server_local_certificate_add,</span><span class="sxs-lookup"><span data-stu-id="7162c-368">nx_secure_dtls_server_local_certificate_add,</span></span>
- <span data-ttu-id="7162c-369">nx_secure_dtls_session_local_certificate_remove,</span><span class="sxs-lookup"><span data-stu-id="7162c-369">nx_secure_dtls_session_local_certificate_remove,</span></span>
- <span data-ttu-id="7162c-370">nx_secure_dtls_server_local_certificate_remove,</span><span class="sxs-lookup"><span data-stu-id="7162c-370">nx_secure_dtls_server_local_certificate_remove,</span></span>
- <span data-ttu-id="7162c-371">nx_secure_dtls_session_trusted_certificate_add,</span><span class="sxs-lookup"><span data-stu-id="7162c-371">nx_secure_dtls_session_trusted_certificate_add,</span></span>
- <span data-ttu-id="7162c-372">nx_secure_dtls_server_trusted_certificate_add,</span><span class="sxs-lookup"><span data-stu-id="7162c-372">nx_secure_dtls_server_trusted_certificate_add,</span></span>
- <span data-ttu-id="7162c-373">nx_secure_dtls_session_trusted_certificate_remove</span><span class="sxs-lookup"><span data-stu-id="7162c-373">nx_secure_dtls_session_trusted_certificate_remove</span></span>
- <span data-ttu-id="7162c-374">nx_secure_dtls_server_trusted_certificate_remove</span><span class="sxs-lookup"><span data-stu-id="7162c-374">nx_secure_dtls_server_trusted_certificate_remove</span></span>

### <a name="tls-client-certificate-specifics"></a><span data-ttu-id="7162c-375">TLS Istemci sertifikası özellikleri</span><span class="sxs-lookup"><span data-stu-id="7162c-375">TLS Client Certificate Specifics</span></span>

<span data-ttu-id="7162c-376">DTLS Istemci uygulamaları genellikle cihaza yerel bir sertifika yüklenmesini gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="7162c-376">DTLS Client implementations generally do not require a local certificate to be loaded onto the device.</span></span> <span data-ttu-id="7162c-377">Yerel sertifika, yerel cihazı tanımlayan bir sertifikadır.</span><span class="sxs-lookup"><span data-stu-id="7162c-377">A local certificate is a certificate that identifies the local device.</span></span> <span data-ttu-id="7162c-378">Özellikle, yerel bir sertifika, TLS/DTLS uygulamasının yüklendiği cihaz için kimlik bilgileri sağlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-378">Specifically, a local certificate provides identity information for the device upon which the TLS/DTLS application is loaded.</span></span> <span data-ttu-id="7162c-379">Bunun özel durumu, Istemci sertifikası kimlik doğrulamasının etkinleştirilme durumdur, ancak bu daha az yaygındır.</span><span class="sxs-lookup"><span data-stu-id="7162c-379">The exception to this is when Client Certificate Authentication is enabled, but this is less common.</span></span>

<span data-ttu-id="7162c-380">DTLS Istemcisi için en az bir Güvenilen sertifikanın yüklenmesi gerekir (gerekirse daha fazla yüklenebilir) ve uzak bir sertifikanın ayrılması için yer vardır.</span><span class="sxs-lookup"><span data-stu-id="7162c-380">A DTLS Client requires at least one trusted certificate to be loaded (more may be loaded if required), and space for a remote certificate to be allocated.</span></span> <span data-ttu-id="7162c-381">Güvenilen sertifika, uzak cihazın doğrudan veya bir ortak anahtar altyapısı (PKI) ile güven ve kimlik doğrulaması için temel sağlayan bir sertifikadır.</span><span class="sxs-lookup"><span data-stu-id="7162c-381">A trusted certificate is a certificate that provides a basis for trust and authentication of the remote device, either directly or through a Public Key Infrastructure (PKI).</span></span> <span data-ttu-id="7162c-382">Güven zincirinin köküne genellikle sertifika yetkilisi veya CA sertifikası denir.</span><span class="sxs-lookup"><span data-stu-id="7162c-382">The root of the chain of trust is usually called a Certification Authority or CA certificate.</span></span> <span data-ttu-id="7162c-383">Uzak bir sertifika, TLS el sıkışması sırasında uzak ana bilgisayar tarafından gönderilen sertifikaya başvurur.</span><span class="sxs-lookup"><span data-stu-id="7162c-383">A remote certificate refers to the certificate sent by the remote host during the TLS handshake.</span></span> <span data-ttu-id="7162c-384">Bu uzak ana bilgisayar için kimlik sağlar ve yerel cihazdaki güvenilen sertifikayla karşılaştırarak kimlik doğrulaması yapılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-384">It provides identity for that remote host and is authenticated by comparing it to a trusted certificate on the local device.</span></span>

<span data-ttu-id="7162c-385">Güvenilen Sertifikalar ekleme ve uzak sertifikalara alan ayırma hakkında daha fazla bilgi için, şu hizmetler için TLS API başvurusuna bakın: nx_secure_dtls_session_create, nx_secure_dtls_session_trusted_certificate_add.</span><span class="sxs-lookup"><span data-stu-id="7162c-385">For more information on adding trusted certificates and allocating space for remote certificates, see the TLS API reference for the following services: nx_secure_dtls_session_create, nx_secure_dtls_session_trusted_certificate_add.</span></span>

### <a name="tlsdtls-server-certificate-specifics"></a><span data-ttu-id="7162c-386">TLS/DTLS sunucu sertifikası özellikleri</span><span class="sxs-lookup"><span data-stu-id="7162c-386">TLS/DTLS Server Certificate Specifics</span></span>

<span data-ttu-id="7162c-387">DTLS sunucu uygulamaları genellikle "güvenilen" sertifikaların ayrılacak cihaza veya uzak sertifikalara yüklenmesini gerektirmez.</span><span class="sxs-lookup"><span data-stu-id="7162c-387">DTLS Server implementations generally do not require “trusted” certificates to be loaded onto the device or remote certificates to be allocated.</span></span> <span data-ttu-id="7162c-388">Istemci sertifikası kimlik doğrulaması etkinleştirildiğinde Bunun istisnası.</span><span class="sxs-lookup"><span data-stu-id="7162c-388">The exception to this being when Client Certificate Authentication is enabled.</span></span>

<span data-ttu-id="7162c-389">Bir TLS sunucusu bir "yerel" (veya "kimlik") sertifikasının yüklenmesini gerektirir, böylece sunucu istemciye kimlik doğrulaması yapmak için TLS el sıkışma sırasında bunu uzak istemciye sağlayabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-389">A TLS Server requires a “local” (or “identity”) certificate to be loaded so the server can provide it to the remote client during the TLS handshake to authenticate the server to the client.</span></span>

<span data-ttu-id="7162c-390">NetX TLS sunucu uygulamalarıyla kullanılmak üzere yerel sertifikaları yükleme hakkında daha fazla bilgi için, şu hizmetlere yönelik API başvurusuna bakın: nx_secure_dtls_server_local_certificate_add, nx_secure_dtls_server_local_certificate_remove.</span><span class="sxs-lookup"><span data-stu-id="7162c-390">For more information about loading local certificates for use with NetX TLS server applications, see the API reference for the following services: nx_secure_dtls_server_local_certificate_add, nx_secure_dtls_server_local_certificate_remove.</span></span>


### <a name="pre-shared-keys-psk"></a><span data-ttu-id="7162c-391">Önceden paylaşılan anahtarlar (PSK)</span><span class="sxs-lookup"><span data-stu-id="7162c-391">Pre-Shared Keys (PSK)</span></span>

<span data-ttu-id="7162c-392">TLS 'de kimlik doğrulaması sağlamaya yönelik alternatif bir mekanizma, önceden paylaşılan anahtarların (PSK) kavramsıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-392">An alternative mechanism for providing identification authentication in TLS is the notion of Pre-Shared Keys (PSK).</span></span> <span data-ttu-id="7162c-393">Bir PSK ciphersuite kullanılması, kaynak kısıtlı gömülü cihazlar için bir Boon, yoğun işlemci yoğunluklu ortak anahtar şifreleme işlemleri gereksinimini ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="7162c-393">Using a PSK ciphersuite removes the need to do the processor-intensive public-key encryption operations, a boon for resource-constrained embedded devices.</span></span> <span data-ttu-id="7162c-394">PSK, TLS/DTLS el sıkışmasındaki sertifikayı değiştirir ve TLS/DTLS oturum anahtarı oluşturma için şifrelenmiş ön ana gizli dizi yerine kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-394">The PSK replaces the certificate in the TLS/DTLS handshake and is used in place of the encrypted Pre-Master Secret for TLS/DTLS session key generation.</span></span>

<span data-ttu-id="7162c-395">PSK ciphersuites, bir TLS/DTLS oturumunun yapılabilmesi için her iki cihazda de paylaşılan bir gizliliğin olması gerektiğini anlamıştır.</span><span class="sxs-lookup"><span data-stu-id="7162c-395">The PSK ciphersuites are limited in the sense that that a shared secret must be present on both devices before a TLS/DTLS session can be established.</span></span> <span data-ttu-id="7162c-396">Bu, cihazların bir TLS PSK bağlantısı dışında bazı güvenli bir şekilde yüklenmiş olması gerektiği anlamına gelir. PSKs bir TLS PSK bağlantısı üzerinden güncelleştirilemeyebilir, ancak cihazın başka bir mekanizma aracılığıyla yüklenen bir PSK ile başlaması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-396">This means that the devices must have been loaded with that secret using some secure means other than a TLS PSK connection - PSKs may be updated over a TLS PSK connection, but the device must necessarily start with a PSK that is loaded through some other mechanism.</span></span> <span data-ttu-id="7162c-397">Örneğin, bir algılayıcı aygıtı ve ağ geçidi cihazı, sevk etmeden önce fabrikada PSKs ile veya PSK 'yi yüklemek için standart bir TLS bağlantısı (bir sertifika ile) kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-397">For example, a sensor device and its gateway device could be loaded with PSKs in the factory before shipping, or a standard TLS connection (with a certificate) could be used to load the PSK.</span></span>

<span data-ttu-id="7162c-398">PSK ciphersuites, RFC 4279 ' de açıklanan çeşitli biçimlerde gelir.</span><span class="sxs-lookup"><span data-stu-id="7162c-398">PSK ciphersuites come in a couple of forms, described in RFC 4279.</span></span> <span data-ttu-id="7162c-399">İlki, Standart TLS el sıkışmaları içinde sertifikada aktarılan ortak anahtarlarla aynı şekilde kullanılan RSA veya Diffie-Hellman anahtarlarını kullanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-399">The first uses RSA or Diffie-Hellman keys which are used in the same manner as the public keys transmitted in the certificate in standard TLS handshakes.</span></span> <span data-ttu-id="7162c-400">Kaynak kısıtlı bir ortamda daha fazla kullanılan ikinci form, oturum anahtarlarını doğrudan oluşturmak için kullanılan bir PSK kullanır (örneğin, AES tarafından kullanılmak üzere), pahalı RSA veya Diffie-Hellman işlemlerinin kullanılmasını önler.</span><span class="sxs-lookup"><span data-stu-id="7162c-400">The second form, which is of more use in a resource-constrained environment, uses a PSK that is used to directly generate the session keys (for use by AES, for example), avoiding the use of the expensive RSA or Diffie-Hellman operations.</span></span>

<span data-ttu-id="7162c-401">NetX güvenli,, uygulamaların tüm ortak anahtar şifreleme kodunu ve bellek kullanımını kaldırmasını sağlayan PSK ciphersuites 'in ikinci biçimini destekler.</span><span class="sxs-lookup"><span data-stu-id="7162c-401">NetX Secure supports the second form of PSK ciphersuites, enabling applications to remove all public-key cryptography code and memory usage.</span></span> <span data-ttu-id="7162c-402">PSK kendisi bir AES anahtarı değil, ancak gerçek anahtarların oluşturulduğu bir parola gibi kabul edilebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-402">The PSK itself is not an AES key, but can be considered as being more like a password from which the actual keys are generated.</span></span> <span data-ttu-id="7162c-403">PSK değeri ile ilgili olarak daha uzun değerler daha fazla güvenlik (parolalarla aynı şekilde) sağlayabilse de daha fazla kısıtlama vardır.</span><span class="sxs-lookup"><span data-stu-id="7162c-403">There are few restrictions on what the PSK value can be, though longer values will provide more security (same as with passwords).</span></span>

<span data-ttu-id="7162c-404">NetX güvenli uygulamanızla PSK 'yi kullanmak için, önce genel makro **NX_SECURE_ENABLE_PSK_CIPHERSUITES** tanımlamanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-404">To use PSK with your NetX Secure application, you must first define the global macro **NX_SECURE_ENABLE_PSK_CIPHERSUITES**.</span></span> <span data-ttu-id="7162c-405">Bu genellikle derleyici ayarlarınız aracılığıyla yapılır, ancak tanım nx_secure_tls. h üst bilgi dosyasına da yerleştirilebilirler.</span><span class="sxs-lookup"><span data-stu-id="7162c-405">This is usually done through your compiler settings, but the definition can also be placed in the nx_secure_tls.h header file.</span></span> <span data-ttu-id="7162c-406">Tanımlanan makro ile, PSK ciphersuite desteği NetX güvenli DTLS uygulamanıza derlenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-406">With the macro defined, PSK ciphersuite support will be compiled into your NetX Secure DTLS application.</span></span>

<span data-ttu-id="7162c-407">PSK desteği etkinken, uygulamanız için PSKs 'i kurmak üzere DTLS API 'sini kullanabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="7162c-407">With PSK support enabled, you can then use the DTLS API to set up PSKs for your application.</span></span> <span data-ttu-id="7162c-408">Her PSK için bir PSK değeri (gerçek gizli anahtar "anahtarı" – Bu değeri güvenli tut), belirli bir PSK 'yi tanımlamak için kullanılan bir "Identity" değeri ve bir TLS sunucusu tarafından belirli bir PSK değeri seçmek için kullanılan bir "kimlik ipucu" gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-408">Each PSK will require a PSK value (the actual secret “key” – keep this value safe), an “identity” value used to identify the specific PSK, and an “identity hint” that is used by a TLS server to choose a particular PSK value.</span></span>

<span data-ttu-id="7162c-409">PSK, bir ağ bağlantısı üzerinden hiçbir şekilde gönderilmediğinden herhangi bir ikili değer olabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-409">The PSK itself can be any binary value as it is never sent over a network connection.</span></span> <span data-ttu-id="7162c-410">PSK, 64 bayta kadar olan herhangi bir değer olabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-410">The PSK can be any value up to 64 bytes in length.</span></span>

<span data-ttu-id="7162c-411">Kimliğin ve ipucunun UTF-8 kullanılarak biçimlendirilen yazdırılabilir karakter dizeleri olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-411">The identity and hint must be printable character strings formatted using UTF-8.</span></span> <span data-ttu-id="7162c-412">Kimlik ve ipucu değerleri 128 bayta kadar olan uzunlukta olabilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-412">The identity and hint values may be any length up to 128 bytes.</span></span>

<span data-ttu-id="7162c-413">Identity ve PSK, ağdaki bir birbirleriyle iletişim kurması gereken her cihaza yüklenen benzersiz bir çift oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7162c-413">The identity and PSK form a unique pair that is loaded onto every device in the network that need to communicate with one another.</span></span>

<span data-ttu-id="7162c-414">"İpucu", birincil olarak, bir işlev veya hizmete göre PSKs 'leri gruplandırmak için belirli uygulama profillerinin tanımlanması için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="7162c-414">The “hint” is primarily used for defining specific application profiles to group PSKs by function or service.</span></span> <span data-ttu-id="7162c-415">Bu değerler önceden anlaşılmalıdır ve uygulamaya bağımlı olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-415">These values must be agreed upon in advance and are application dependent.</span></span> <span data-ttu-id="7162c-416">Örnek olarak, OpenSSL komut satırı sunucu uygulaması (PSK etkin ile), TLS el sıkışması ile devam edebilmek için bir TLS istemcisi tarafından sağlanması gereken varsayılan "Client_identity" dizesini kullanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-416">As an example, the OpenSSL command-line server application (with PSK enabled) uses the default string “Client_identity”, which must be provided by a TLS client in order to continue with the TLS handshake.</span></span>

<span data-ttu-id="7162c-417">PSKs hakkında daha fazla bilgi için, aşağıdaki hizmetler için NetX Secure API başvurusuna bakın: nx_secure_dtls_psk_add, nx_secure_dtls_server_psk_add.</span><span class="sxs-lookup"><span data-stu-id="7162c-417">For more information on PSKs, see the NetX Secure API reference for the following services: nx_secure_dtls_psk_add, nx_secure_dtls_server_psk_add.</span></span>

## <a name="importing-x509-certificates-into-netx-secure"></a><span data-ttu-id="7162c-418">X. 509.440 sertifikalarını NetX ile alma güvenli</span><span class="sxs-lookup"><span data-stu-id="7162c-418">Importing X.509 certificates into NetX Secure</span></span>

<span data-ttu-id="7162c-419">Internet üzerindeki çoğu TLS bağlantısı için dijital sertifikalar gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-419">Digital certificates are required for most TLS connections on the Internet.</span></span> <span data-ttu-id="7162c-420">Sertifikalar, genellikle *sertifika yetkilileri* veya CA olarak adlandırılan güvenilen Aracılar kullanılarak Internet üzerinden daha önce bilinmeyen Konakları kimlik doğrulaması için bir yöntem sağlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-420">Certificates provide a method for authenticating previously unknown hosts over the Internet through the use of trusted intermediaries, usually called *Certificate Authorities* or CAs.</span></span> <span data-ttu-id="7162c-421">NetX güvenli cihazınızı ticari bir bulut hizmetiyle (örneğin, Amazon Web Services) bağlamak için, bu sertifikaları cihazınıza yükleyerek uygulamanıza aktarmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-421">To connect your NetX Secure device with a commercial cloud service (such as Amazon Web Services), you will need to import certificates into your application by loading them onto your device.</span></span>

<span data-ttu-id="7162c-422">Sertifikalarla birlikte, bazen sertifikalarınızla ilişkili bir *özel anahtara* da ihtiyacınız olacaktır.</span><span class="sxs-lookup"><span data-stu-id="7162c-422">Along with certificates, you will also sometimes need a *private key* that is associated with your certificate.</span></span> <span data-ttu-id="7162c-423">Bazı uygulamalarda (Istemci sertifikası kimlik doğrulaması kullanılmazsa TLS Istemcisi gibi), sertifika tek başına yeterli olacaktır, ancak sertifikanız cihazınızı tanımlamak için kullanılıyorsa özel bir anahtara ihtiyacınız olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-423">In some applications (such as TLS Client when Client Certificate Authentication is not being used) the certificate alone will be sufficient, but if your certificate is being used to identify your device you will need a private key.</span></span> <span data-ttu-id="7162c-424">Özel anahtarlar genellikle sertifikanızı oluşturduğunuzda oluşturulur ve genellikle bir parolayla şifrelenir ve ayrı bir dosyada depolanır.</span><span class="sxs-lookup"><span data-stu-id="7162c-424">Private keys are typically generated when you create your certificate and are stored in a separate file, often encrypted with a password.</span></span>

<span data-ttu-id="7162c-425">Sertifikaları NetX güvenli uygulamalarına aktarma hakkında ayrıntılı bir açıklama için lütfen NetX güvenli TLS kullanıcı kılavuzunda Bölüm 3 ' e başvurun.</span><span class="sxs-lookup"><span data-stu-id="7162c-425">For a detailed description of importing certificates into NetX Secure applications, please refer to Chapter 3 in the NetX Secure TLS User Guide.</span></span>

## <a name="client-certificate-authentication-in-netx-secure-tls"></a><span data-ttu-id="7162c-426">NetX güvenli TLS 'de istemci sertifikası kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="7162c-426">Client Certificate Authentication in NetX Secure TLS</span></span>

<span data-ttu-id="7162c-427">X. 509.440 sertifika kimlik doğrulaması kullanılırken, TLS/DTLS Protokolü, DTLS sunucu örneğinin kimlik için bir sertifika sağlamasını gerektirir, ancak varsayılan olarak DTLS Istemci örneğinin kimlik doğrulama için bir sertifika sağlaması gerekmez (örn. bir Kullanıcı adı/parola birleşimi).</span><span class="sxs-lookup"><span data-stu-id="7162c-427">When using X.509 certificate authentication, the TLS/DTLS protocol requires that the DTLS Server instance provide a certificate for identification, but by default the DTLS Client instance does not need to provide a certificate for authentication, using another form of authentication instead (e.g. a username/password combination).</span></span> <span data-ttu-id="7162c-428">Bu, Web siteleri için Internet 'te en yaygın TLS kullanımıyla eşleşir.</span><span class="sxs-lookup"><span data-stu-id="7162c-428">This matches the most common use of TLS on the Internet for Web sites.</span></span> <span data-ttu-id="7162c-429">Örneğin, bir çevrimiçi perakende sitesi, sunucunun meşru olduğunu bir Web tarayıcısı kullanarak potansiyel bir müşteriyi kanıtlamaları gerekir, ancak kullanıcı belirli bir hesaba erişmek için bir oturum açma/parola kullanacaktır.</span><span class="sxs-lookup"><span data-stu-id="7162c-429">For example, an online retail site must prove to a potential customer using a web browser that the server is legitimate, but the user will use a login/password to access a specific account.</span></span>

<span data-ttu-id="7162c-430">Ancak, varsayılan durum her zaman tercih edilmez, bu nedenle TLS/DTLS isteğe bağlı olarak DTLS sunucu örneğinin uzak Istemciden bir sertifika istemesine izin verir.</span><span class="sxs-lookup"><span data-stu-id="7162c-430">However, the default case is not always desirable, so TLS/DTLS optionally allows for the DTLS Server instance to request a certificate from the remote Client.</span></span> <span data-ttu-id="7162c-431">Bu özellik etkinleştirildiğinde, DTLS sunucusu el sıkışma sırasında DTLS Istemcisine bir CertificateRequest iletisi gönderir.</span><span class="sxs-lookup"><span data-stu-id="7162c-431">When this feature is enabled, the DTLS Server will send a CertificateRequest message to the DTLS Client during the handshake.</span></span> <span data-ttu-id="7162c-432">Istemci kendi sertifikası ile yanıt vermelidir ve Istemcinin bu sertifikayla ilişkili eşleşen özel anahtara sahip olduğunu belirten bir şifreleme belirteci içeren bir CertificateVerify iletisi.</span><span class="sxs-lookup"><span data-stu-id="7162c-432">The Client must respond with a certificate of its own and a CertificateVerify message which contains a cryptographic token proving that the Client owns the matching private key associated with that certificate.</span></span> <span data-ttu-id="7162c-433">Doğrulama başarısız olursa veya sertifika sunucuda güvenilir bir sertifikaya bağlı değilse, TLS el sıkışması başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-433">If the verification fails or the certificate is not connected to a trusted certificate on the Server, the TLS handshake fails.</span></span>

<span data-ttu-id="7162c-434">TLS 'de Istemci sertifikası kimlik doğrulaması için iki ayrı durum vardır: aşağıdaki bölümlerde her iki durum da ele alınmaktadır.</span><span class="sxs-lookup"><span data-stu-id="7162c-434">There are two separate cases for Client Certificate Authentication in TLS – the following sections cover both cases.</span></span>

### <a name="client-certificate-authentication-for-dtls-clients"></a><span data-ttu-id="7162c-435">DTLS Istemcileri için istemci sertifikası kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="7162c-435">Client Certificate Authentication for DTLS Clients</span></span>

<span data-ttu-id="7162c-436">DTLS Istemcisi, istemci kimlik doğrulaması için bir sertifika isteyen bir sunucuya bağlantı deneyebilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-436">A DTLS Client may attempt a connection to a server that requests a certificate for client authentication.</span></span> <span data-ttu-id="7162c-437">Bu durumda, Istemcinin sunucuya bir sertifika sağlaması ve eşleşen özel anahtara sahip olduğunu doğrulaması gerekir ya da sunucu DTLS el sıkışmasını sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="7162c-437">In this case the Client must provide a certificate to the server and verify that it owns the matching private key or the Server will terminate the DTLS handshake.</span></span>

<span data-ttu-id="7162c-438">NetX güvenli DTLS 'de, bu özelliği desteklemeye yönelik özel bir yapılandırma yoktur, ancak uygulamanın *nx_secure_tls_session_local_certificate_add* HIZMETINI kullanarak TLS istemci örneği için bir yerel kimlik sertifikası sağlaması gerekecektir.</span><span class="sxs-lookup"><span data-stu-id="7162c-438">In NetX Secure DTLS, there is no special configuration to support this feature but the application will have to provide a local identification certificate for the TLS Client instance using the *nx_secure_tls_session_local_certificate_add* service.</span></span> <span data-ttu-id="7162c-439">Uygulama tarafından bir sertifika sağlanmazsa ancak uzak sunucu Istemci sertifikası kimlik doğrulamasını kullanıyorsa ve bir sertifika isterse, DTLS el sıkışması başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-439">If no certificate is provided by the application but the remote server is using Client Certificate Authentication and requests a certificate, the DTLS handshake will fail.</span></span> <span data-ttu-id="7162c-440">DTLS oturumu *nx_secure_dtls_session_local_certificate_add* Ile DTLS oturumuna sunulan sertifika, DTLS el sıkışma 'nı tamamlayabilmeniz için uzak sunucu tarafından tanınmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7162c-440">The certificate provided to the DTLS Session with *nx_secure_dtls_session_local_certificate_add* must be recognized by the remote server in order to complete the DTLS handshake.</span></span>

### <a name="client-certificate-authentication-for-tls-servers"></a><span data-ttu-id="7162c-441">TLS sunucuları için istemci sertifikası kimlik doğrulaması</span><span class="sxs-lookup"><span data-stu-id="7162c-441">Client Certificate Authentication for TLS Servers</span></span>

<span data-ttu-id="7162c-442">Istemci sertifikası kimlik doğrulaması için DTLS sunucu durumu, özelliğin isteğe bağlı olması nedeniyle DTLS Istemci durumundan biraz daha karmaşıktır.</span><span class="sxs-lookup"><span data-stu-id="7162c-442">The DTLS Server case for Client Certificate Authentication is slightly more complex than the DTLS Client case due to the feature being optional.</span></span> <span data-ttu-id="7162c-443">Bu durumda, TLS sunucusunun özel olarak uzak TLS Istemcisinden bir sertifika istemesi, ardından uzak Istemcinin eşleşen özel anahtara sahip olduğunu doğrulamak için CertificateVerify iletisini işlemesi gerekir ve ardından sunucu, Istemci tarafından belirtilen sertifikanın, yerel güvenilen sertifika deposundaki bir sertifikaya izlenip izlenmeyeceğini denetmelidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-443">In this case, the TLS Server needs to specifically request a certificate from the remote TLS Client, then process the CertificateVerify message to verify that the remote Client owns the matching private key, and then the Server must check that the certificate provided by the Client can be traced to a certificate in the local trusted certificate store.</span></span>

<span data-ttu-id="7162c-444">NetX güvenli TLS sunucusu örneklerinde, Istemci sertifikası kimlik doğrulaması *nx_secure_dtls_server_x509_client_verify_configure* ve *nx_secure_dtls_server_x509_client_verify_disable* Hizmetleri tarafından denetlenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-444">In NetX Secure TLS Server instances, Client Certificate Authentication is controlled by the *nx_secure_dtls_server_x509_client_verify_configure* and *nx_secure_dtls_server_x509_client_verify_disable* services.</span></span>

<span data-ttu-id="7162c-445">Istemci sertifikası kimlik doğrulamasını etkinleştirmek için bir uygulamanın, *nx_secure_dtls_server_start* çağrılmadan önce DTLS sunucusu oturum örneğiyle birlikte *nx_secure_dtls_server_x509_client_verify_configure* çağırması gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-445">To enable Client Certificate Authentication, an application must call *nx_secure_dtls_server_x509_client_verify_configure* with the DTLS Server session instance before calling *nx_secure_dtls_server_start*.</span></span> <span data-ttu-id="7162c-446">Doğrulamanın, nx_secure_dtls_server_x509_client_verify_configure için bir parametre olarak belirtilen gelen istemci sertifikaları için ayrılan alan olması gerekir *.*</span><span class="sxs-lookup"><span data-stu-id="7162c-446">The verification requires space to be allocated for incoming client certificates which is provided as a parameter to *nx_secure_dtls_server_x509_client_verify_configure.*</span></span> <span data-ttu-id="7162c-447">Arabelleğin, *DTLS sunucu oturumlarının sayısı* tarafından verilen maksimum boyut sertifika zincirini tutabilecek kadar büyük olması gerektiğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="7162c-447">Note that the buffer must be large enough to hold the maximum-size certificate chain provided by a client *times the number of DTLS server sessions*.</span></span> <span data-ttu-id="7162c-448">Her sunucu oturumu için, tek bir belirtilen arabellekten ayrılacak alan gerekir.</span><span class="sxs-lookup"><span data-stu-id="7162c-448">Each server session requires space which will be allocated from the single provided buffer.</span></span> <span data-ttu-id="7162c-449">Arabelleğin yeterince büyük olduğundan emin olun veya belirtilen Istemci sertifikası zinciri çok büyükse bir hata meydana gelir.</span><span class="sxs-lookup"><span data-stu-id="7162c-449">Make sure the buffer is large enough or an error will occur if the provided Client certificate chain is too large.</span></span>

<span data-ttu-id="7162c-450">Istemci sertifikası kimlik doğrulaması etkinleştirildiğinde, DTLS sunucusu, DTLS el sıkışması sırasında uzak DTLS Istemcisinden bir sertifika ister.</span><span class="sxs-lookup"><span data-stu-id="7162c-450">When Client Certificate Authentication is enabled, the DTLS Server will request a certificate from the remote DTLS Client during the DTLS handshake.</span></span> <span data-ttu-id="7162c-451">NetX güvenli DTLS sunucusunda, Istemci sertifikası X. 509.952 Issuer zincirini izleyerek *nx_secure_dtls_server_trusted_certificate_add* oluşturulan güvenilir sertifikaların deposuna karşı denetlenir.</span><span class="sxs-lookup"><span data-stu-id="7162c-451">In NetX Secure DTLS Server, the Client certificate is checked against the store of trusted certificates created with *nx_secure_dtls_server_trusted_certificate_add* by following the X.509 issuer chain.</span></span> <span data-ttu-id="7162c-452">Uzak Istemci, kimlik sertifikasını Güvenilen depodaki bir sertifikaya bağlayan bir zincir sağlamalıdır veya DTLS el sıkışması başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-452">The remote Client must provide a chain that connects its identity certificate to a certificate in the trusted store or the DTLS handshake will fail.</span></span> <span data-ttu-id="7162c-453">Ayrıca, CertificateVerify iletisi işlemi başarısız olursa DTLS el sıkışması da başarısız olur.</span><span class="sxs-lookup"><span data-stu-id="7162c-453">Additionally, if the CertificateVerify message processing fails, the DTLS handshake will also fail.</span></span>

<span data-ttu-id="7162c-454">CertificateVerify yöntemi için kullanılan imza yöntemleri TLS sürüm 1,0 ve TLS sürüm 1,1 için düzeltilir ve bu, ağ düzeyinde güvenli DTLS 'lerin temel aldığı TLS sürümü 1,2.</span><span class="sxs-lookup"><span data-stu-id="7162c-454">The signature methods used for the CertificateVerify method are fixed for TLS version 1.0 and TLS version 1.1, and are specified by the TLS Server in TLS version 1.2, upon which NetX Secure DTLS is based.</span></span> <span data-ttu-id="7162c-455">DTLS 1,2 için, desteklenen imza yöntemleri genellikle şifreleme yöntemi tablosunda sağlanan ilgili yöntemleri izler, ancak genellikle SHA-256 ile RSA (şifreleme yöntemleriyle TLS başlatma hakkında daha fazla bilgi için bkz. "NetX güvenli TLS 'de şifreleme" bölümüne bakın).</span><span class="sxs-lookup"><span data-stu-id="7162c-455">For DTLS 1.2, the signature methods supported generally follow the relevant methods supplied in the cryptographic method table, but typically RSA with SHA-256 (see the section “Cryptography in NetX Secure TLS” for more information on initializing TLS with cryptographic methods).</span></span>

## <a name="cryptography-in-netx-secure-tls"></a><span data-ttu-id="7162c-456">NetX güvenli TLS 'de şifreleme</span><span class="sxs-lookup"><span data-stu-id="7162c-456">Cryptography in NetX Secure TLS</span></span>

<span data-ttu-id="7162c-457">TLS, ağ iletişimlerini güvenli hale getirmek için şifreleme kullanılabilecek bir protokol tanımlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-457">TLS defines a protocol in which cryptography can be used to secure network communications.</span></span> <span data-ttu-id="7162c-458">Bu nedenle, TLS kullanıcıları için oldukça geniş kapsamlı açık kullanılacak şekilde gerçek şifrelemeyi bırakır.</span><span class="sxs-lookup"><span data-stu-id="7162c-458">As such, it leaves the actual cryptography to be used fairly wide open for TLS users.</span></span> <span data-ttu-id="7162c-459">Belirtim yalnızca tek bir ciphersuite 'in uygulanması için gereklidir; TLS 1,2 olması durumunda bu ciphersuite TLS_RSA_WITH_AES_128_CBC_SHA, ortak anahtar işlemleri için RSA kullanımını ve oturum şifreleme için 128 bit anahtarlarla CBC modunda AES modunu ve ileti kimlik doğrulama karmaları için SHA-1 ' i belirtir.</span><span class="sxs-lookup"><span data-stu-id="7162c-459">The specification only requires a single ciphersuite to be implemented – in the case of TLS 1.2, that ciphersuite is TLS_RSA_WITH_AES_128_CBC_SHA, indicating the use of RSA for public-key operations, AES in CBC mode with 128-bit keys for session encryption, and SHA-1 for message authentication hashes.</span></span>

<span data-ttu-id="7162c-460">TLS 1,2 uyumlu olduğu, NetX güvenliği, zorunlu TLS_RSA_WITH_AES_128_CBC_SHA ciphersuite 'i varsayılan olarak sağlar, ancak donanım özellikleri ve diğer hususlar nedeniyle her bir şifreleme yöntemi için olası uygulama sayısına veriliyorsa, NetX güvenliği, kullanıcının TLS ile hangi şifreleme yöntemlerinin kullanılacağını belirtmesini sağlayan bir genel şifreleme API 'SI sağlar.</span><span class="sxs-lookup"><span data-stu-id="7162c-460">Being TLS 1.2-compliant, NetX Secure enables the mandatory TLS_RSA_WITH_AES_128_CBC_SHA ciphersuite by default, but given the number of possible implementations for each of the cryptographic methods due to hardware capabilities and other considerations, NetX Secure provides a generic cryptographic API that allows a user to specify which cryptographic methods to use with TLS.</span></span>

> [!NOTE]
> <span data-ttu-id="7162c-461">Genel şifreleme API mekanizması, kullanıcıların kendi ciphersuites 'leri uygulamasına izin verir, ancak bu, TLS cipherpaketlerine ve uzantılarına alışkın olan ileri düzey kullanıcılar için önerilir.</span><span class="sxs-lookup"><span data-stu-id="7162c-461">The generic cryptographic API mechanism also allows users to implement their own ciphersuites, but this is recommended for advanced users who are familiar with the TLS ciphersuites and extensions.</span></span> <span data-ttu-id="7162c-462">Kendi cipherpaketlerinizi desteklemeye ilgileniyorsanız lütfen hızlı mantık temsilcinizle iletişime geçin.</span><span class="sxs-lookup"><span data-stu-id="7162c-462">Please contact your Express Logic representative if you are interested in supporting your own ciphersuites.</span></span>

<span data-ttu-id="7162c-463">Lütfen DTLS için şifreleme yöntemlerinin nasıl yapılandırılacağı hakkında ayrıntılı bir tartışma için bkz. NetX güvenli TLS Kullanıcı Kılavuzu, Bölüm 3.</span><span class="sxs-lookup"><span data-stu-id="7162c-463">Please see the NetX Secure TLS User Guide, Chapter 3 for a detailed discussion about how to configure cryptographic methods for DTLS.</span></span> <span data-ttu-id="7162c-464">Aynı işlem hem TLS hem de DTLS için geçerlidir.</span><span class="sxs-lookup"><span data-stu-id="7162c-464">The same process applies to both TLS and DTLS.</span></span>
