---
title: Bölüm 1-Azure RTOS NetX Duo MQTT 'ye giriş
description: NetX Duo MQTT istemci paketi, NetX Duo (sürüm 5,10 veya üzeri) yüklü olmasını, düzgün şekilde yapılandırılmasını ve IP örneğinin oluşturulmasını gerektirir.
author: philmea
ms.author: philmea
ms.date: 05/19/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 2e13b997f987e2fd82569bcb1904218908313d70
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104825912"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-mqtt"></a><span data-ttu-id="f2dc6-103">Bölüm 1-Azure RTOS NetX Duo MQTT 'ye giriş</span><span class="sxs-lookup"><span data-stu-id="f2dc6-103">Chapter 1 - Introduction to Azure RTOS NetX Duo MQTT</span></span>

## <a name="netx-duo-mqtt-requirements"></a><span data-ttu-id="f2dc6-104">NetX Duo MQTT gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="f2dc6-104">NetX Duo MQTT Requirements</span></span>

<span data-ttu-id="f2dc6-105">Azure RTOS NetX Duo MQTT istemci paketi, NetX Duo (sürüm 5,10 veya üzeri) yüklü olmasını, düzgün şekilde yapılandırılmasını ve IP örneğinin oluşturulmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-105">The Azure RTOS NetX Duo MQTT client package requires that NetX Duo (version 5.10 or later) be installed, properly configured, and the IP instance has been created.</span></span> <span data-ttu-id="f2dc6-106">TCP modülünün sistemde etkinleştirilmiş olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-106">The TCP module must be enabled in the system.</span></span> <span data-ttu-id="f2dc6-107">Ayrıca, TLS güvenliği gerekliyse, NetX güvenli TLS modülünün, aracı tarafından istenen güvenlik parametresine göre yapılandırılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-107">In addition, if TLS security is required, the NetX Secure TLS module needs to be configured according to the security parameter required by the broker.</span></span>

## <a name="netx-duo-mqtt-specification"></a><span data-ttu-id="f2dc6-108">NetX Duo MQTT belirtimi</span><span class="sxs-lookup"><span data-stu-id="f2dc6-108">NetX Duo MQTT Specification</span></span>

<span data-ttu-id="f2dc6-109">NetX Duo MQTT Client uygulaması, OASSıS MQTT sürümü 3.1.1<sup>on</sup> 29 ' dan fazla 2014 ile uyumludur.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-109">NetX Duo MQTT client implement is compliant with OASIS MQTT Version 3.1.1 Oct 29<sup>th</sup> 2014.</span></span> <span data-ttu-id="f2dc6-110">Belirtimi şurada bulunabilir:</span><span class="sxs-lookup"><span data-stu-id="f2dc6-110">The specification can be found at:</span></span>

- [http://mqtt.org/](http://mqtt.org/)

## <a name="netx-duo-mqtt-basic-operation"></a><span data-ttu-id="f2dc6-111">NetX Duo MQTT temel Işlemi</span><span class="sxs-lookup"><span data-stu-id="f2dc6-111">NetX Duo MQTT Basic Operation</span></span>

<span data-ttu-id="f2dc6-112">MQTT (Ileti kuyruğu telemetri aktarımı) Yayımcı-abone modeline dayalıdır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-112">MQTT (Message Queue Telemetry Transport) is based on publisher-subscriber model.</span></span> <span data-ttu-id="f2dc6-113">İstemci, bir aracı aracılığıyla diğer istemcilere bilgi yayımlayabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-113">A client can publish information to other clients through a broker.</span></span> <span data-ttu-id="f2dc6-114">Bir konuyla ilgileniyorsa bir istemci, aracı aracılığıyla konuya abone olabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-114">A client, if interested in a topic, can subscribe to the topic through the broker.</span></span> <span data-ttu-id="f2dc6-115">Bir aracı, yayınlanmış iletileri konuya abone olan istemcilerine dağıtmaktan sorumludur.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-115">A broker is responsible for delivering published messages to its clients who subscribe to the topic.</span></span> <span data-ttu-id="f2dc6-116">Bu Yayımcı-abone modelinde, birden çok istemci aynı konuyla veri yayımlayabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-116">In this publisher-subscriber model, multiple clients may publish data with the same topic.</span></span> <span data-ttu-id="f2dc6-117">İstemci aynı konuya abone olursa istemci yayımladığı bir ileti alır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-117">A client will receive a message it publishes if the client subscribes to the same topic.</span></span>

<span data-ttu-id="f2dc6-118">Kullanım örneğine bağlı olarak, bir istemci bir ileti yayımlarken 3 QoS düzeyinden birini seçebilir:</span><span class="sxs-lookup"><span data-stu-id="f2dc6-118">Depending on the use case, a client may choose one of the 3 QoS levels when publishing a message:</span></span>

- <span data-ttu-id="f2dc6-119">**QoS 0**: ileti en fazla bir kez teslim edilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-119">**QoS 0**: The message is delivered at most once.</span></span> <span data-ttu-id="f2dc6-120">QoS 0 ile gönderilen iletiler kaybolmuş olabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-120">Messages sent with QoS 0 may be lost.</span></span>
- <span data-ttu-id="f2dc6-121">**QoS 1**: ileti en az bir kez teslim edilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-121">**QoS 1**: The message is delivered at least once.</span></span> <span data-ttu-id="f2dc6-122">QoS 1 ile gönderilen iletiler birden çok kez teslim edilebilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-122">Messages sent with QoS 1 may be delivered more than once.</span></span>
- <span data-ttu-id="f2dc6-123">**QoS 2**: ileti tam olarak bir kez teslim edilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-123">**QoS 2**: The message is delivered exactly once.</span></span> <span data-ttu-id="f2dc6-124">QoS 2 ile gönderilen iletilerin, çoğaltma olmadan teslim edilmesi garanti edilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-124">Messages sent with QoS 2 is guaranteed to be delivered, with no duplication.</span></span>

> [!NOTE]
> <span data-ttu-id="f2dc6-125">MQTT istemcisinin bu uygulama, QoS düzey 2 iletilerini desteklemez.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-125">This implementation of MQTT client does not support QoS level 2 messages.</span></span>

<span data-ttu-id="f2dc6-126">QoS 1 ve QoS 2 ' nin teslim edileceği garanti edildiğinden, aracı, her istemciye gönderilen QoS 1 ve QoS 2 iletilerinin durumunu izler.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-126">Since QoS 1 and QoS 2 are guaranteed to be delivered, the broker keeps track the state of QoS 1 and QoS 2 messages sent to each client.</span></span> <span data-ttu-id="f2dc6-127">Bu, özellikle QoS1 veya QoS 2 iletileri bekleyen istemciler için önemlidir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-127">This is particularly important for clients that expect QoS1 or QoS 2 messages.</span></span> <span data-ttu-id="f2dc6-128">İstemcinin aracısıyla bağlantısı kesilebilir (örneğin, istemci yeniden başlatıldığında veya iletişim bağlantısı geçici olarak kaybedilmişse).</span><span class="sxs-lookup"><span data-stu-id="f2dc6-128">The client may be disconnected from the broker (for example when the client reboots, or the communication link is temporarily lost).</span></span> <span data-ttu-id="f2dc6-129">Aracı, istemci aracısına yeniden bağlandığında iletilerin daha sonra teslim edilebilmesi için QoS 1 ve QoS 2 iletilerini depolamalıdır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-129">The broker must store QoS 1 and QoS 2 messages so the messages can be delivered later once the client is reconnected to the broker.</span></span> <span data-ttu-id="f2dc6-130">Bununla birlikte, istemci yeniden bağlandıktan sonra aracıdan eski ileti almamayabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-130">However, the client may choose not to receive any stale messages from the broker after reconnection.</span></span> <span data-ttu-id="f2dc6-131">İstemci, *clean_session* bayrağı \***NX_TRUE** _ olarak ayarlanmış şekilde bağlantıyı başlatarak bunu yapabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-131">The client can do so by initiating the connection with the *clean_session* flag set to \***NX_TRUE** _.</span></span> <span data-ttu-id="f2dc6-132">Bu durumda, MQTT CONNECT iletisini aldıktan sonra, aracı bu istemciyle ilişkili oturum bilgilerini, teslim edilmemiş ya da onaylanmamış QoS 1 veya QoS 2 iletileri de dahil olmak üzere atar.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-132">In this case, upon receiving the MQTT CONNECT message, the broker shall discard any session information associated with this client, including undelivered or unconfirmed QoS 1 or QoS 2 messages.</span></span> <span data-ttu-id="f2dc6-133">_Clean_session \* bayrağı \***NX_FALSE** Ise_, sunucu QoS 1 ve QoS 2 iletilerini yeniden gönderecektir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-133">If the _clean_session\* flag is to \***NX_FALSE**_, the server shall resend the QoS 1 and QoS 2 messages.</span></span> <span data-ttu-id="f2dc6-134">MQTT Istemcisi, _clean_session \*, \*\*\*NX_TRUE \*\*\* olarak ayarlandıysa, kabul edilmeyen hiçbir iletiyi de yeniden sonlandırır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-134">The MQTT Client also resends any un-acknowledged messages if _clean_session\* is set to \***NX_TRUE\*.**</span></span> <span data-ttu-id="f2dc6-135">Bu onay, TCP katmanı ACK 'ten farklıdır, ancak aynı zamanda olur.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-135">This acknowledgment is different from the TCP layer ACK, although that happens as well.</span></span> <span data-ttu-id="f2dc6-136">MQTT istemcisi, aracıya bir bildirim gönderir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-136">The MQTT client sends an acknowledgment to the broker.</span></span>

<span data-ttu-id="f2dc6-137">Uygulama, \***nxd_mqtt_client_create ()** _ öğesini çağırarak MQTT istemci örneği oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-137">An application creates an MQTT client instance by calling \***nxd_mqtt_client_create()** _.</span></span> <span data-ttu-id="f2dc6-138">İstemci oluşturulduktan sonra uygulama, _*_nxd_mqtt_client_connect ()_*_ öğesini çağırarak aracıya bağlanabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-138">Once the client is created, the application can connect to the broker by calling _*_nxd_mqtt_client_connect()_*_.</span></span> <span data-ttu-id="f2dc6-139">Aracıya bağlandıktan sonra istemci, _*_nxd_mqtt_client_subscribe ()_*_ çağırarak bir konuya abone olabilir veya _ *_nxd_mqtt_client_publish ()_* \* çağırarak bir konuyu yayımlayabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-139">After connecting to the broker, the client can subscribe to a topic by calling _*_nxd_mqtt_client_subscribe()_*_, or publish a topic by calling _\*_nxd_mqtt_client_publish()_\*\*.</span></span>

<span data-ttu-id="f2dc6-140">Gelen MQTT iletileri, MQTT istemci örneğindeki alma sırasında depolanır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-140">Incoming MQTT messages are stored in the receive queue in the MQTT client instance.</span></span> <span data-ttu-id="f2dc6-141">Uygulama, ***nxd_mqtt_client_message_get ()*** çağırarak bu iletiyi alır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-141">Application retrieves these message by calling ***nxd_mqtt_client_message_get()***.</span></span> <span data-ttu-id="f2dc6-142">Alma kuyruğunda iletiler varsa, sıradaki ilk ileti (örneğin, en eski) çağırana döndürülür.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-142">If there are messages in the receive queue, the first message (e.g. the oldest) from the queue is returned to the caller.</span></span> <span data-ttu-id="f2dc6-143">İletideki konu dizesi de döndürülür.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-143">The topic string from the message is also returned.</span></span>

> [!NOTE]
> <span data-ttu-id="f2dc6-144">\***Nxd_mqtt_client_message_get ()** _ IşLEVI MQTT istemcisi alma kuyruğu boş ise engellemez.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-144">The function \***nxd_mqtt_client_message_get()** _ does not block if the MQTT client receive queue is empty.</span></span> <span data-ttu-id="f2dc6-145">İşlev, hemen dönüş kodu _ *_NXD_MQTT_NO_MESSAGE_* \* ile döndürür.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-145">The function returns immediately with the return code _\*_NXD_MQTT_NO_MESSAGE_\*\*.</span></span> <span data-ttu-id="f2dc6-146">Uygulama, bu dönüş değerini alma sırasının bir hata değil boş olduğunu belirten bir gösterge olarak değerlendirir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-146">The application shall treat this return value as an indication that the receive queue is empty, not an error.</span></span>

<span data-ttu-id="f2dc6-147">Gelen iletiler için alma sırasının yoklanmaması için, uygulama ***nxd_mqtt_client_recieve_notify_set ()*** çağırarak MQTT istemcisiyle bir geri çağırma işlevi kaydedebilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-147">To avoid polling the receive queue for incoming messages, the application can register a callback function with the MQTT client by calling ***nxd_mqtt_client_recieve_notify_set()***.</span></span> <span data-ttu-id="f2dc6-148">Geri çağırma işlevi şöyle bildirilmiştir:</span><span class="sxs-lookup"><span data-stu-id="f2dc6-148">The callback function is declared as:</span></span>

```c
VOID (*receive_notify_callback)(NXD_MQTT_CLIENT *client_ptr, 
    UINT message_count);
```

<span data-ttu-id="f2dc6-149">MQTT istemcisi aracıdan ileti aldığında, işlev ayarlandıysa geri çağırma işlevini çağırır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-149">As the MQTT client receives messages from the broker, it invokes the callback function if the function is set.</span></span> <span data-ttu-id="f2dc6-150">Geri arama işlevi, işaretçiyi istemci denetim bloğuna ve bir ileti sayısı değerine geçirir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-150">The callback function passes the pointer to the client control block and a message count value.</span></span> <span data-ttu-id="f2dc6-151">İleti sayısı değeri, alma sırasındaki MQTT iletilerinin sayısını gösterir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-151">The message count value indicates the number of MQTT messages in the receive queue.</span></span> <span data-ttu-id="f2dc6-152">Bu geri çağırma işlevinin MQTT istemci iş parçacığı bağlamında yürütüldüğünü unutmayın.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-152">Note that this callback function executes in the MQTT client thread context.</span></span> <span data-ttu-id="f2dc6-153">Bu nedenle, geri çağırma işlevi MQTT istemci iş parçacığını engelleyebilen herhangi bir yordam yürütmemelidir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-153">Therefore, the callback function should not execute any procedures that may block the MQTT client thread.</span></span> <span data-ttu-id="f2dc6-154">Geri çağırma işlevi, iletileri almak için ***nxd_mqtt_client_message_get ()*** çağırmak üzere uygulama iş parçacığını tetiklemelidir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-154">The callback function should trigger the application thread to call ***nxd_mqtt_client_message_get()*** to retrieve the messages.</span></span>

<span data-ttu-id="f2dc6-155">MQTT istemci hizmetinin bağlantısını kesmek ve sonlandırmak için uygulama, ***nxd_mqtt_client_disconnect ()** _ ve _*_nxd_mqtt_client_delete ()_\*_ hizmetini kullanır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-155">To disconnect and terminate the MQTT client service, the application shall use the service ***nxd_mqtt_client_disconnect()** _ and _*_nxd_mqtt_client_delete()._\*_</span></span> <span data-ttu-id="f2dc6-156">_*_Nxd_mqtt_client_disconnect ()_*_ çağırmak, yalnızca ARACıYA TCP bağlantısını keser.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-156">Calling _*_nxd_mqtt_client_disconnect()_*_ simply disconnects the TCP connection to the broker.</span></span> <span data-ttu-id="f2dc6-157">Alma kuyruğunda zaten alınmış ve depolanmış iletileri yayınlar.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-157">It releases messages already received and stored in the receive queue.</span></span> <span data-ttu-id="f2dc6-158">Ancak, iletme sırasında QoS düzey 1 iletileri serbest bırakmaz.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-158">However, it does not release QoS level 1 messages in the transmit queue.</span></span> <span data-ttu-id="f2dc6-159">_*_Clean_session_*_ bayrağının _ NX_FALSE olarak ayarlandığı varsayıldığında, QoS düzey 1 iletileri bağlantı kurulduğunda yeniden gönderilir *_._*\*</span><span class="sxs-lookup"><span data-stu-id="f2dc6-159">QoS level 1 messages are retransmitted upon connection, assuming the _*_clean_session_*_ flag is set to _ *_NX_FALSE._*\*</span></span>

<span data-ttu-id="f2dc6-160">Aracı da istemciyle bağlantısını kesebilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-160">The broker may also disconnect from the client.</span></span> <span data-ttu-id="f2dc6-161">İstemci ve aracı arasındaki TCP bağlantısı sonlandırıldığında, uygulamaya bağlantıyı kes bildirim işlevi tarafından bildirim uygulanabilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-161">When the TCP connection between the client and the broker is terminated, the application can be notified by the disconnect notify function.</span></span> <span data-ttu-id="f2dc6-162">Uygulama bildirim mekanizmasını kullanmak için, \*\*\*nxd_mqtt_client_disconnect_notify_set \*\*\* çağırarak bağlantı kesme bildirme işlevini de yüklüyor.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-162">To use the notification mechanism, application installs the disconnect notify function by calling \***nxd_mqtt_client_disconnect_notify_set\*.**</span></span> <span data-ttu-id="f2dc6-163">TCP bağlantısı kesildikten ve MQTT oturumu oluşturulduktan sonra, bildirim işlevi çağrılır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-163">Once a TCP disconnect is observed and the MQTT session has been created, the notification function is invoked.</span></span>

<span data-ttu-id="f2dc6-164">***Nxd_mqtt_client_delete ()*** çağrısı, iletme sırasındaki tüm ileti bloklarını ve alma sırasını yayınlar.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-164">Calling ***nxd_mqtt_client_delete()*** releases all message blocks in the transmit queue and the receive queue.</span></span> <span data-ttu-id="f2dc6-165">Kabul edilmemiş QoS düzey 1 iletileri de silinir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-165">Unacknowledged QoS level 1 messages are also deleted.</span></span>

## <a name="secure-mqtt-connection"></a><span data-ttu-id="f2dc6-166">Güvenli MQTT bağlantısı</span><span class="sxs-lookup"><span data-stu-id="f2dc6-166">Secure MQTT Connection</span></span>

<span data-ttu-id="f2dc6-167">MQTT istemcisi, NetX güvenli TLS modülünü kullanarak aracıya güvenli bir bağlantı oluşturur.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-167">The MQTT client makes a secure connection to the broker using the NetX Secure TLS module.</span></span> <span data-ttu-id="f2dc6-168">TLS 8883 güvenliği ile MQTT için varsayılan bağlantı noktası numarası ***NXD_MQTT_TLS_PORT*** tanımlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-168">The default port number for MQTT with TLS security is 8883, defined in ***NXD_MQTT_TLS_PORT***.</span></span>

<span data-ttu-id="f2dc6-169">Aracıya güvenli bir MQTT bağlantısı oluşturmak için, bir TCP bağlantısı kurulduktan sonra, bir TLS oturumunun, ücret'e gönderilen MQTT CONNECT iletileri gönderilmeden önce anlaşması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-169">To create a secure MQTT connection to the broker, a TLS session needs to be negotiated after a TCP connection is established, before MQTT CONNECT messages can be sent to the broker.</span></span> <span data-ttu-id="f2dc6-170">TLS oturum ayarları, ***nxd_mqtt_client_secure_connect ()*** çağırarak ve Kullanıcı TANıMLı bir TLS Kurulumu geri arama işlevinde geçirilerek gerçekleştirilir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-170">The TLS session set up is accomplished by calling ***nxd_mqtt_client_secure_connect()*** and passing in a user-defined TLS setup callback function.</span></span> <span data-ttu-id="f2dc6-171">MQTT bağlantı aşamasında, TCP bağlantısı kurulduktan sonra istemci, doğru bir TLS el sıkışma işlemini başlatmak için TLS kurulum geri arama işlevini çağırır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-171">During the MQTT connection phase, once the TCP connection is established, the client invokes the TLS setup callback function to start a proper TLS handshake process.</span></span> <span data-ttu-id="f2dc6-172">TLS oturumu kurulduktan sonra istemci, güvenli kanal üzerinden MQTT CONNECT iletisini devam ettirir.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-172">After the TLS session is established, the client continues the MQTT CONNECT message over the secure channel.</span></span>

<span data-ttu-id="f2dc6-173">Kullanıcı tanımlı geri çağırma işlevi beş giriş değeri alır ve şu şekilde bildirilmiştir:</span><span class="sxs-lookup"><span data-stu-id="f2dc6-173">The user defined callback function takes five input values and is declared as:</span></span>

```c
UINT tls_Setup_callback(NXD_MQTT_CLIENT *client_ptr,
    NX_SECURE_TLS_SESSION *session_ptr,
    NX_SECURE_TLS_CERTIFICATE *certificate_ptr,
    NX_SECURE_TLS_CERTIFICATE *trusted_cerfiticate);
```

<span data-ttu-id="f2dc6-174">Giriş parametrelerinin açıklaması aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="f2dc6-174">Below is a description of the input parameters:</span></span>

- <span data-ttu-id="f2dc6-175">**client_ptr**: MQTT istemci denetim bloğuna yönelik işaretçi.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-175">**client_ptr**: Pointer to the MQTT client control block.</span></span>
- <span data-ttu-id="f2dc6-176">**session_ptr**: TLS oturum denetim bloğuna yönelik işaretçi.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-176">**session_ptr**: Pointer to the TLS session control block.</span></span>
- <span data-ttu-id="f2dc6-177">**certificate_ptr**: sertifika denetim bloğuna yönelik işaretçi.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-177">**certificate_ptr**: Pointer to the certificate control block.</span></span> <span data-ttu-id="f2dc6-178">Kurulum işlevi bu sertifikayı aracıya göndermeden önce yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-178">The setup function configures this certificate before sending it to the broker.</span></span>
- <span data-ttu-id="f2dc6-179">**trusted_certificate_ptr**: güvenilen sertifikaya yönelik işaretçi.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-179">**trusted_certificate_ptr**: Pointer to the trusted certificate.</span></span> <span data-ttu-id="f2dc6-180">TLS kurulum işlevi, sunucunun kimliğini doğrulamak için güvenilen sertifikayı yapılandırır.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-180">TLS setup function configures the trusted certificate to authenticate the server.</span></span>

<span data-ttu-id="f2dc6-181">TLS kurulum işlevinde, uygulama bir TLS oturumu oluşturmaktan ve oturumu uygun bir sertifikayla yapılandırmadan sorumludur.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-181">In the TLS setup function, the application is responsible for creating a TLS session, and configuring the session with a proper certificate.</span></span> <span data-ttu-id="f2dc6-182">Aşağıdaki sözde kod tipik bir TLS oturumu başlatma yordamını özetler.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-182">The following pseudo code outlines a typical TLS session start up procedure.</span></span> <span data-ttu-id="f2dc6-183">Okuyucu, TLS API 'Leri kullanma hakkında ayrıntılı bilgi için NetX güvenli TLS Kullanıcı Kılavuzu 'na başvurulur.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-183">The reader is referred to the NetX Secure TLS User Guide for details on using TLS APIs.</span></span>

<span data-ttu-id="f2dc6-184">Aşağıda bir TLS kurulum geri çağırması verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="f2dc6-184">Below is an example TLS setup callback:</span></span>

```c
UINT tls_setup_callback(NXD_MQTT_CLIENT *client_pt
    NX_SECURE_TLS_SESSION *session_ptr,
    NX_SECURE_TLS_CERTIFICATE *certrifcate_ptr,
    NX_SECURE_TLS_CERTIFICATE *trusted_certificate_ptr)
{
    /* Initialize TLS module */
    nx_secure_tls_initialize();

    /* Create a TLS session */
    nx_secure_tls_session_create(session_ptr, …);

    /* Need to allocate space for the certificate coming in from the broker. */
    memset(certificate_ptr), 0, sizeof(NX_SECURE_TLS_CERTIFICATE));

    nx_secure_tls_remote_certificate_allocate(session_ptr, certificate_ptr);

    /* Add a CA Certificate to our trusted store for verifying incomingserver certificates. */
    nx_secure_tls_certificate_initialize(
        trusted_certificate_ptr,
        ca_cert_der,
        ca_cert_der_len, NULL, 0);
    nx_secure_tls_trusted_certificate_add(session_ptr,
        trusted_certificate));
}
```

## <a name="known-limitations-of-the-netx-duo-mqtt-client"></a><span data-ttu-id="f2dc6-185">NetX Duo MQTT Istemcisinin bilinen sınırlamaları</span><span class="sxs-lookup"><span data-stu-id="f2dc6-185">Known Limitations of the NetX Duo MQTT Client</span></span>

- <span data-ttu-id="f2dc6-186">NetX Duo MQTT, QoS düzey 2 iletilerinin gönderilmesini veya alınmasını desteklemez.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-186">NetX Duo MQTT does not support sending or receiving QoS level 2 messages.</span></span>
- <span data-ttu-id="f2dc6-187">NetX Duo MQTT, zincirleme paketleri desteklemez.</span><span class="sxs-lookup"><span data-stu-id="f2dc6-187">NetX Duo MQTT does not support chained-packets.</span></span>
