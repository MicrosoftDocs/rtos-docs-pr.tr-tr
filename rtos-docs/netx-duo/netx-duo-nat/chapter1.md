---
title: Bölüm 1-ağ adresi çevirisine giriş
description: IP ağ adresi çevirisi (NAT), aslında sınırlı sayıda Internet IPv4 adresi sorununu çözmek için geliştirilmiştir.
author: philmea
ms.author: philmea
ms.date: 07/14/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: 3d01aa6f68e21ea82f65a59a19c4f5c7958a6b92
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104825870"
---
# <a name="chapter-1---an-introduction-to-network-address-translation"></a><span data-ttu-id="6f4e7-103">Bölüm 1-ağ adresi çevirisine giriş</span><span class="sxs-lookup"><span data-stu-id="6f4e7-103">Chapter 1 - An introduction to Network Address Translation</span></span>

## <a name="the-need-for-network-address-translation"></a><span data-ttu-id="6f4e7-104">Ağ adresi çevirisi gereksinimi</span><span class="sxs-lookup"><span data-stu-id="6f4e7-104">The Need for Network Address Translation</span></span>

<span data-ttu-id="6f4e7-105">IP ağ adresi çevirisi (NAT), aslında sınırlı sayıda Internet IPv4 adresi sorununu çözmek için geliştirilmiştir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-105">IP Network Address Translation (NAT) was originally developed to solve the problem of a limited number of Internet IPv4 addresses.</span></span> <span data-ttu-id="6f4e7-106">Birden çok cihazın Internet 'e erişmesi gerektiğinde, ancak Internet servis sağlayıcısı (ISS) tarafından yalnızca bir IPv4 Internet adresi atandığında NAT için ihtiyaç vardır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-106">The need for NAT arises when multiple devices need to access the Internet but only one IPv4 Internet address is assigned by the Internet Service Provider (ISP).</span></span>

<span data-ttu-id="6f4e7-107">NAT kullanmanın başka avantajları da vardır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-107">There are other benefits of using NAT as well.</span></span> <span data-ttu-id="6f4e7-108">Yerel etki alanı dışındaki ağ topolojisi birçok şekilde değişebilir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-108">Network topology outside the local domain can change in many ways.</span></span> <span data-ttu-id="6f4e7-109">Müşteriler sağlayıcıları değiştirebilir, şirket geri kemikleri yeniden düzenlenemeyebilir veya sağlayıcılar birleştirebilir veya bölünebilir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-109">Customers may change providers, company backbones may be reorganized, or providers may merge or split.</span></span> <span data-ttu-id="6f4e7-110">Dış topoloji değiştiğinde, yerel etki alanındaki konaklar için adres atamaları da bu dış değişiklikleri yansıtacak şekilde değişmelidir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-110">Whenever the external topology changes, address assignments for hosts within the local domain must also change to reflect these external changes.</span></span> <span data-ttu-id="6f4e7-111">Bu türdeki değişiklikler, tek bir adres çevirisi yönlendiricisinde yapılan değişiklikleri merkezileştirerek etki alanı içindeki kullanıcılardan gizlenebilir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-111">Changes of this type can be hidden from users within the domain by centralizing changes to a single address translation router.</span></span> <span data-ttu-id="6f4e7-112">NAT, yerel konaklar için genel Internet 'e erişim sağlar ve bunların dışından doğrudan erişime karşı korur.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-112">NAT enables access for local hosts to the public Internet and protects them from direct access from the outside.</span></span> <span data-ttu-id="6f4e7-113">İç kullanım için bir ağ kurulumu ağırlıklı olan kuruluşlar, zaman zaman dış erişime gerek duyulan bu düzen için iyi adaylardır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-113">Organizations with a network setup predominantly for internal use, with a need for occasional external access are good candidates for this scheme.</span></span>

## <a name="basic-nat-and-network-address-port-translation"></a><span data-ttu-id="6f4e7-114">Temel NAT ve ağ adresi bağlantı noktası çevirisi</span><span class="sxs-lookup"><span data-stu-id="6f4e7-114">Basic NAT and Network Address Port Translation</span></span>

<span data-ttu-id="6f4e7-115">Ortak ağ ile özel ağ arasında NAT özellikli bir yönlendirici yüklenir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-115">A NAT-enabled router is installed between the public network and the private network.</span></span> <span data-ttu-id="6f4e7-116">NAT özellikli yönlendiricinin rolü, iç özel IPv4 adresleri ve atanan ortak IPv4 adresi arasında çevrilecek, böylece özel ağdaki tüm cihazlar aynı ortak IPv4 adresini paylaşabilir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-116">The role of the NAT-enabled router is to translate between the internal private IPv4 addresses and the assigned public IPv4 address, so all the devices on the private network are able to share the same public IPv4 address.</span></span>

<span data-ttu-id="6f4e7-117">NAT 'ın temel uygulamasında, NAT yönlendiricisinin kendi IP adresinden farklı olarak bir veya daha fazla küresel olarak kayıtlı IP adresi vardır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-117">In the basic implementation of NAT, the NAT router ‘owns’ one or more globally registered IP addresses different from its own IP address.</span></span> <span data-ttu-id="6f4e7-118">Bu genel adresler, kendi özel ağındaki ana bilgisayarlara statik veya dinamik olarak atamak için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-118">These global addresses are available to assign to hosts on its private network either statically or dynamically.</span></span> <span data-ttu-id="6f4e7-119">NAPT veya ağ adresi bağlantı noktası çevirisi, ağ adresi çevirisi 'nin bir ' Transport ' tanımlayıcısı içerecek şekilde uzatılmasının temel NAT 'nin bir çeşitlemesi.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-119">NAPT, or Network Address Port Translation, is a variation of basic NAT, where network address translation is extended to include a ‘transport’ identifier.</span></span> <span data-ttu-id="6f4e7-120">Genellikle bu, TCP ve UDP paketlerinin bağlantı noktası numarasıdır ve ıCMP paketlerinin sorgu KIMLIĞIDIR.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-120">Most typically this is the port number for TCP and UDP packets, and the Query ID for ICMP packets.</span></span>

<span data-ttu-id="6f4e7-121">NAT sınırları genelinde bağlantılar genellikle dış bir konağa giden paketleri gönderen özel ağ üzerinde konaklar tarafından başlatılır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-121">Connections across the NAT boundary are typically initiated by hosts on the private network sending outbound packets to an external host.</span></span> <span data-ttu-id="6f4e7-122">Bu konaklar genellikle bu amaçla *dinamik* (GEÇICI) IP adresleri atanır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-122">These hosts are usually assigned *dynamic* (temporary) IP addresses for this purpose.</span></span> <span data-ttu-id="6f4e7-123">Ancak, özel ağda ' sunucular ' (örneğin, dış ağdan gelen Istemci isteklerini kabul edecek şekilde HTTP veya FTP sunucuları) varsa, bağlantıların ters yönde başlatılması de mümkündür.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-123">However, it is also possible to have connections initiated in the opposite direction if the private network has ‘servers’ e.g. HTTP or FTP servers that will accept Client requests from the external network.</span></span> <span data-ttu-id="6f4e7-124">NAT genellikle bu yerel Konakları *statik* (kalıcı) bir IP adresi: bağlantı noktası olarak atar.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-124">NAT will typically assign these local hosts a *static* (permanent) IP address:port.</span></span>

## <a name="how-network-address-translation-works"></a><span data-ttu-id="6f4e7-125">Ağ adresi çevirisi nasıl kullanılır</span><span class="sxs-lookup"><span data-stu-id="6f4e7-125">How Network Address Translation Works</span></span>

<span data-ttu-id="6f4e7-126">NAT özellikli bir yönlendirici olan tipik bir ağ kurulumu Şekil 1 ' de gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-126">A typical network setup with a NAT-enabled router is illustrated in Figure 1.</span></span>

![NAT özellikli yönlendirici olan tipik bir ağ kurulumu](media/image2.png)

<span data-ttu-id="6f4e7-128">**Şekil 1-NAT özellikli yönlendirici olan tipik bir ağ kurulumu**</span><span class="sxs-lookup"><span data-stu-id="6f4e7-128">**Figure 1 - A typical network setup with a NAT-enabled router**</span></span>

<span data-ttu-id="6f4e7-129">NAT özellikli yönlendirici genellikle iki ağ arabirimine sahiptir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-129">A NAT-enabled router typically has two network interfaces.</span></span> <span data-ttu-id="6f4e7-130">Bir arabirim, genel Internet 'e bağlı; diğeri özel ağa bağlanır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-130">One interface is connected to the public Internet; the other is connected to the private network.</span></span> <span data-ttu-id="6f4e7-131">Bu kurulumda tipik bir yönlendirici, özel ağ ile genel ağ arasında hedef IP adresine dayalı IP datagramları yönlendirmesinden sorumludur.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-131">A typical router in this setup is responsible for routing IP datagrams between the private network and the public network based on destination IP address.</span></span> <span data-ttu-id="6f4e7-132">NAT özellikli bir yönlendirici, ortak ve özel arabirim arasında bir IPv4 datagramı yönlendirmeden önce adres çevirisini gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-132">A NAT-enabled router performs address translation before routing an IPv4 datagram between the public and the private interface.</span></span> <span data-ttu-id="6f4e7-133">Her TCP veya UDP oturumu için, iç kaynak adresi, kaynak bağlantı noktası numarası ve dış hedef adresi ve hedef bağlantı noktası numarası temelinde bir çeviri oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-133">A translation is established for each TCP or UDP session, based the internal source address, source port number, and external destination address and destination port number.</span></span> <span data-ttu-id="6f4e7-134">ICMP yankı isteği ve yanıt veri birimi için, bağlantı noktası numarası yerine ıCMP sorgu KIMLIĞI kullanılır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-134">For ICMP echo request and response datagram, the ICMP query ID is used instead of the port number.</span></span>

<span data-ttu-id="6f4e7-135">Ağ adresi çevirisi 'nin tipik bir uygulamasını göstermek için Şekil 2 ' de bir ağ kurulumunu düşünmemize izin verin.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-135">To illustrate a typical implementation of Network Address Translation, let us consider a network setup in Figure 2.</span></span>

![Ağ adresi çevirisi 'nin tipik bir uygulama](media/image3.png)

<span data-ttu-id="6f4e7-137">**Şekil 2-ağ adresi çevirisi 'nin tipik bir uygulanması**</span><span class="sxs-lookup"><span data-stu-id="6f4e7-137">**Figure 2 - A typical implementation of Network Address Translation**</span></span>

<span data-ttu-id="6f4e7-138">Bu senaryoda, NAT yönlendiricisi özel ağı sola ve ortak ağı sağa bağlar.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-138">In this scenario, the NAT router connects the private network to the left, and the public network to the right.</span></span> <span data-ttu-id="6f4e7-139">Genel ağ tarafında, NAT yönlendirici arabirimi IP adresinin 202.151.25.14 olduğunu varsayalım. özel ağ arabiriminde, NAT yönlendiricisi 192.168.1.254 IP adresini kullanır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-139">Let’s assume on the public network side, the NAT router interface IP address is 202.151.25.14; on the private network interface, the NAT router uses the IP address 192.168.1.254.</span></span> <span data-ttu-id="6f4e7-140">Özel ağdaki bir düğüm, Internet üzerindeki bir Web sunucusuyla TCP bağlantısı başlatır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-140">A node on the private network initiates a TCP connection with a web server on the Internet.</span></span>

<span data-ttu-id="6f4e7-141">Şekil 3 ' te, ağ adresi çevirisi işleminin üst düzey bir görünümü gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-141">Figure 3 shows a high-level view of the Network Address Translation process.</span></span>

![Ağ adresi çevirisi işleminin üst düzey bir görünümü](media/image4.png)

<span data-ttu-id="6f4e7-143">**Şekil 3-ağ adresi çevirisi işleminin üst düzey bir görünümü**</span><span class="sxs-lookup"><span data-stu-id="6f4e7-143">**Figure 3 - A high-level view of the Network Address Translation process**</span></span>

1. <span data-ttu-id="6f4e7-144">İstemci bir TCP SYN iletisini Web sunucusuna iletir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-144">Client transmits a TCP SYN message to the web server.</span></span> <span data-ttu-id="6f4e7-145">Gönderen adresi 192.168.1.15, bağlantı noktası numarası 6732; Hedef adres 128.15.54.3, bağlantı noktası numarası 80 ' dir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-145">The sender address is 192.168.1.15, port number 6732; the destination address is 128.15.54.3, port number 80.</span></span>
1. <span data-ttu-id="6f4e7-146">Istemciden paket, NAT yönlendiricisi tarafından özel ağ arabiriminde alınır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-146">The packet from the Client is received on the private network interface by the NAT router.</span></span> <span data-ttu-id="6f4e7-147">Giden trafik kuralı paket için geçerlidir: gönderenin (Istemci) adresi NAT yönlendiricisinin Genel IP adresine çevrilir 202.15.25.14 ve gönderici (Istemci) kaynak bağlantı noktası numarası, ortak arabirimde 2015 numaralı TCP bağlantı noktasına çevrilir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-147">The outbound traffic rule applies to the packet: the sender’s (Client’s) address is translated to the NAT router’s public IP address 202.15.25.14, and sender (Client) source port number is translated to the TCP port number 2015 on the public interface.</span></span>
1. <span data-ttu-id="6f4e7-148">Paket daha sonra Internet üzerinden iletilir ve sonuç olarak hedef ana bilgisayar 128.15.54.3 ulaşır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-148">The packet is then transmitted over the Internet and ultimately reaches its destination host 128.15.54.3.</span></span> <span data-ttu-id="6f4e7-149">Alma tarafında, IP katmanı kaynak adresi ve TCP katmanı bağlantı noktası numarası temelinde, paketin kaynaklandığı 202.151.24.14, bağlantı noktası numarası 2015 olduğunu görürsünüz.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-149">Notice that on the receiving side, based on the IP layer source address and TCP layer port number, the packet appears to have originated from 202.151.24.14, port number 2015.</span></span>
   <span data-ttu-id="6f4e7-150">Şekil 4 ' te, dönüş yolundaki NAT işlemi gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-150">Figure 4 shows the NAT process on the return path.</span></span>

   ![Dönüş yolunda NAT işlemi](media/image5.png)

   <span data-ttu-id="6f4e7-152">**Şekil 4-dönüş yolunda NAT işlemi**</span><span class="sxs-lookup"><span data-stu-id="6f4e7-152">**Figure 4 - NAT process on the return path**</span></span>
1. <span data-ttu-id="6f4e7-153">Bu senaryoda, 128.15.54.3 Internet ana bilgisayarı, hedefi olarak NAT yönlendiricisinin Internet adresine sahip bir yanıt paketi gönderir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-153">In this scenario, the Internet host 128.15.54.3 sends a response packet with the NAT router’s Internet address as its destination.</span></span>
1. <span data-ttu-id="6f4e7-154">Paket, NAT yönlendiricisine ulaşır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-154">The packet reaches the NAT router.</span></span> <span data-ttu-id="6f4e7-155">Bu bir yerleşik paket olduğundan, bağlantılı çeviri kuralları geçerlidir: hedef adres özgün gönderenin (Istemci) IP adresine geri dönüştürülür: 192.168.1.15, hedef bağlantı noktası numarası 6732.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-155">Since this is an in-bound packet, the in-bound translation rules apply: the destination address is changed back to the original sender’s (Client’s) IP address: 192.168.1.15, destination port number 6732.</span></span>
1. <span data-ttu-id="6f4e7-156">Paket daha sonra iç ağa bağlı arabirim aracılığıyla Istemciye iletilir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-156">The packet is then forwarded to the Client through the interface that is connected to the internal network.</span></span>

<span data-ttu-id="6f4e7-157">Bu şekilde, gönderenin Internet ağ adresi ve bağlantı noktası numarası, genel Internet 'teki diğer ana bilgisayarlara gösterilmez.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-157">In this manner the internet network address and port number of the sender is not exposed to other hosts on the public Internet.</span></span>

## <a name="netx-duo-nat-features"></a><span data-ttu-id="6f4e7-158">NetX Duo NAT özellikleri</span><span class="sxs-lookup"><span data-stu-id="6f4e7-158">NetX Duo NAT Features</span></span>

<span data-ttu-id="6f4e7-159">NAT örneği *nx_nat_create* çağrısı KULLANıLARAK oluşturulduğunda NAT çeviri tablosu oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-159">When the NAT instance is created using *nx_nat_create* call, the NAT translation table is created.</span></span>

```C
UINT nx_nat_create(NX_NAT_DEVICE *nat_ptr, NX_IP *ip_ptr,
    UINT global_interface_index,
    VOID *dynamic_cache_memory,
    UINT dynamic_cache_size);
```

<span data-ttu-id="6f4e7-160">Yerel ve dış ağlar arasındaki tüm etkin bağlantılar için ağ adresi çevirilerini izlemek üzere NetX Duo NAT etkin yönlendiricisi, kaynak ve hedef IP adresi ve bağlantı noktası numarası içeren her bir özel ana bilgisayar bağlantısı hakkında bilgi içeren bir çeviri tablosu tutar.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-160">To keep track of the network address translations for all active connections between local and external networks, the NetX Duo NAT-enabled router maintains a translation table with information about each private host connection which includes source and destination IP address and port number.</span></span>

<span data-ttu-id="6f4e7-161">Bu çeviri tablosunun konumu ("cache") dynamic_cache_memory işaretçisiyle ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-161">The location of this translation table (“cache”) is set with the dynamic_cache_memory pointer.</span></span> <span data-ttu-id="6f4e7-162">Bu alan 4 bayt hizalı bir arabellek alanı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-162">This area must be a 4 byte aligned buffer space.</span></span> <span data-ttu-id="6f4e7-163">Tablonun boyutu (veya giriş sayısı), bir NAT tablosu girişi boyutuna göre dynamic_cache_size önbellek boyutu bölünerek belirlenir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-163">The size of the table (or number of entries) is determined by dividing the cache size dynamic_cache_size by the size of a NAT table entry.</span></span> <span data-ttu-id="6f4e7-164">Tablo, ***nx_nat. h* içinde tanımlanan NX_NAT_MIN_ENTRY_COUNT tarafından belirtilen en az sayıda giriş için yeterince büyük olmalıdır. Varsayılan değer 3 ' dir.**</span><span class="sxs-lookup"><span data-stu-id="6f4e7-164">The table must be large enough for the minimal number of entries specified by **NX_NAT_MIN_ENTRY_COUNT which is defined in *nx_nat.h*. The default value is 3.**</span></span>

<span data-ttu-id="6f4e7-165">NetX Duo NAT çeviri tablosundaki tüm dinamik girişler için zaman aşımı, *nx_nat. h* içinde tanımlanan NX_NAT_ENTRY_RESPONSE_TIMEOUT olarak başlatılır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-165">The timeout for all dynamic entries in the NetX Duo NAT translation table are initialized to NX_NAT_ENTRY_RESPONSE_TIMEOUT which is defined in *nx_nat.h*.</span></span> <span data-ttu-id="6f4e7-166">Varsayılan değer, RFC 2663 tarafından önerildiği şekilde 4 dakikadır (veya 100 mHz işlemci için 240 sistem Ticks).</span><span class="sxs-lookup"><span data-stu-id="6f4e7-166">The default value is 4 minutes (or 240 system ticks for a 100 mHz processor) as recommended by RFC 2663.</span></span> <span data-ttu-id="6f4e7-167">NetX Duo NAT her seferinde, bu girişin NX_NAT_ENTRY_RESPONSE_TIMEOUT zaman aşımını sıfırladığında, bu tablodaki dinamik bir girdiyle eşleşen bir paket alır veya gönderir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-167">Each time NetX Duo NAT receives or sends a packet matching a dynamic entry in the table it resets that entry’s time out to NX_NAT_ENTRY_RESPONSE_TIMEOUT.</span></span> <span data-ttu-id="6f4e7-168">NetX Duo NAT, tabloda arama yaparken Ayrıca, bu tabloyu süre dolma girdileri için denetler ve siler.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-168">When searching the table, NetX Duo NAT will also check the table for expired entries and delete them.</span></span>

<span data-ttu-id="6f4e7-169">Yerel ağdaki sunucular için, örneğin, yerel ağdaki sunucular için gelen girdileri statik olarak oluşturmak için, NetX Duo NAT *nx_nat_inbound_entry_create* hizmeti sağlar.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-169">To create inbound entries as static in the table e.g. for servers on the local network, NetX Duo NAT provides the *nx_nat_inbound_entry_create* service.</span></span> <span data-ttu-id="6f4e7-170">Bir tablo girişi yerel ana bilgisayar bağlantısını statik olarak tanımlıyorsa, süresi dolmayacaktır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-170">If a table entry defines the local host connection as static, it never expires.</span></span>

```C
UINT nx_nat_inbound_entry_create(NX_NAT_DEVICE *nat_ptr,
    NX_NAT_TRANSLATION_ENTRY *entry_ptr,
    ULONG local_ip_address, USHORT external_port,
    USHORT local_port, UCHAR protocol);
```

<span data-ttu-id="6f4e7-171">Bu hizmet, [Bölüm 4 ' te hizmetlerin açıklaması](chapter4.md) bölümünde daha ayrıntılı olarak açıklanmıştır</span><span class="sxs-lookup"><span data-stu-id="6f4e7-171">This service is described in more detail in [Chapter 4 - Description of Services](chapter4.md)</span></span>

<span data-ttu-id="6f4e7-172">Çalışma zamanı sırasında, Çeviri tablosu doluysa ve daha fazla giriş eklenememişse NetX Duo NAT, NAT örneğiyle kayıtlıysa, bir önbellek tam geri çağırması ile NAT uygulamasına bildirim gönderir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-172">During runtime, if the translation table is full and no more entries can be added, NetX Duo NAT will notify the NAT application with a cache full callback if one is registered with the NAT instance.</span></span> <span data-ttu-id="6f4e7-173">Bu, *nx_nat_cache_notify_set* hizmeti kullanılarak yapılır:</span><span class="sxs-lookup"><span data-stu-id="6f4e7-173">This is done using the *nx_nat_cache_notify_set* service:</span></span>

```C
UINT nx_nat_cache_notify_set(NX_NAT_DEVICE *nat_ptr,
    VOID (*cache_full_notify_cb)(NX_NAT_DEVICE *nat_ptr));
```

<span data-ttu-id="6f4e7-174">Bu hizmetle ilgili daha fazla ayrıntı için bkz. [Bölüm 4-hizmetlerin açıklaması](chapter4.md) .</span><span class="sxs-lookup"><span data-stu-id="6f4e7-174">See [Chapter 4 - Description of Services](chapter4.md) for more details about this service.</span></span>

## <a name="nat-packet-processing-in-netx-duo"></a><span data-ttu-id="6f4e7-175">NetX Duo 'da NAT paket Işleme</span><span class="sxs-lookup"><span data-stu-id="6f4e7-175">NAT Packet Processing in NetX Duo</span></span>

<span data-ttu-id="6f4e7-176">NetX Duo NAT, bir IPv4 yönlendiricisinde kullanılmak üzere tasarlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-176">NetX Duo NAT is intended for use on an IPv4 router.</span></span> <span data-ttu-id="6f4e7-177">NAT 'nin çalışması için NetX Duo paketlerin NAT sunucusuna iletilmesi için yapılandırılmış olması gerekir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-177">For NAT to work, NetX Duo must be configured for forwarding packets to the NAT server.</span></span> <span data-ttu-id="6f4e7-178">Bunun nasıl yapılacağını öğrenmek için NetX Duo NAT yüklemesinde Bölüm 2 ' ye bakın.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-178">See Chapter 2 on NetX Duo NAT installation for how to do so.</span></span> <span data-ttu-id="6f4e7-179">NAT sunucusu daha sonra, ağ üzerindeki bir konağa ' tüketin ' (iletme girişimi) anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-179">The NAT server then indicates if it will ‘consume’ (attempt to forward) the packet to a host on either of its networks.</span></span> <span data-ttu-id="6f4e7-180">Paketi tüketmezse, paket normalde olduğu gibi paket işlemek için NetX Duo 'e ' döndürülür.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-180">If it will not consume the packet, the packet is ‘returned’ to NetX Duo to process the packet as it normally would.</span></span>

<span data-ttu-id="6f4e7-181">NAT sunucusu NetX Duo 'dan iletmek üzere bir paket aldığında, paketin gelen veya giden bir paket olup olmadığını belirler.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-181">When the NAT server receives a packet to forward from NetX Duo, it determines if the packet is inbound or outbound.</span></span>

<span data-ttu-id="6f4e7-182">Giden paketler için NAT sunucusu, paket IP üstbilgisi kaynak adresini ve bağlantı noktasını denetler.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-182">For outbound packets, the NAT server checks the packet IP header source address and port.</span></span> <span data-ttu-id="6f4e7-183">Çeviri tablosu, aynı hedef için daha önce bu konak tarafından gönderilen bir paket için bir girdi içermiyorsa, NAT, benzersiz bir genel kaynak IP adresi (bağlantı için bağlantı noktası) içeren yeni bir giriş oluşturur ve paket üst bilgilerini dış ağa göndermeden önce bu yeni IP adresi: bağlantı noktası ile değiştirir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-183">If the translation table does not contain an entry for a packet previously sent by this host for the same destination, NAT will create a new entry which will contain a unique global source IP address:port for the connection, and modify the packet headers with this new IP address:port before sending it onto the external network.</span></span>

<span data-ttu-id="6f4e7-184">Gelen paketler için NAT sunucusu, çeviri tablosunda bir dış IP adresi ile eşleşen önceki bir girişi arar: bağlantı noktası, paket hedefi IP adresiyle eşleşiyor: bağlantı noktası.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-184">For inbound packets, the NAT server looks for a previous entry in its translation table with an external IP address: port matching the packet destination IP address: port.</span></span> <span data-ttu-id="6f4e7-185">Eşleşme bulunmazsa, hedef adres: bağlantı noktası yerel ağdaki sunucu için dış adres değilse, paket atılır.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-185">If no match is found, it will discard the packet unless the destination address: port is the external address for server on the local network.</span></span> <span data-ttu-id="6f4e7-186">Bir eşleşme bulıyorsa, paket üstbilgisinin dış hedef IP adresini (bağlantı noktası) özel IP adresi: bağlantı noktası ile değiştirir ve yerel ağa hedeflenen özel ana bilgisayar üzerinde gönderir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-186">If it does find a match, it will replace the packet header’s external destination IP address: port with the private IP address: port and send the packet onto the local network to the intended private host.</span></span>

<span data-ttu-id="6f4e7-187">NetX Duo NAT, benzersiz yerel adres oluşturmak için bir dizi TCP, UDP ve ıCMP çeviri bağlantı noktası kullanır: dış konaklarla bağlanan yerel konaklar için bağlantı noktası bağlantıları.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-187">NetX Duo NAT uses a range of TCP, UDP and ICMP translation ports for creating unique local address: port connections for local hosts connecting with outside hosts.</span></span> <span data-ttu-id="6f4e7-188">*Nx_nat. h* 'de tanımlanan aşağıdaki kullanıcı yapılandırılabilir seçenekleri, her protokol için aralığı tanımlar:</span><span class="sxs-lookup"><span data-stu-id="6f4e7-188">The following user configurable options, defined in *nx_nat.h,* define the range for each protocol:</span></span>

```C
NX_NAT_START_TCP_PORT

NX_NAT_END_TCP_PORT

NX_NAT_START_UDP_PORT

NX_NAT_END_UDP_PORT

NX_NAT_START_ICMP_QUERY_ID

NX_NAT_END_ICMP_QUERY_ID
```

## <a name="nat-requirements-and-constraints"></a><span data-ttu-id="6f4e7-189">NAT gereksinimleri ve kısıtlamaları</span><span class="sxs-lookup"><span data-stu-id="6f4e7-189">NAT Requirements and Constraints</span></span>

<span data-ttu-id="6f4e7-190">NetX Duo NAT, NetX Duo 5,8 veya üstünü gerektirir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-190">NetX Duo NAT requires NetX Duo 5.8 or later.</span></span> <span data-ttu-id="6f4e7-191">NAT uygulaması, tek bir IP örneği oluşturulmasını ve iç ve dış fiziksel ağa yönelik bir arabirim gerektirir.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-191">The NAT application requires creation of a single IP instance and an interface to the internal and external physical network.</span></span>

<span data-ttu-id="6f4e7-192">Kısıtlamaları</span><span class="sxs-lookup"><span data-stu-id="6f4e7-192">Constraints:</span></span>

- <span data-ttu-id="6f4e7-193">NetX Duo NAT, TCP, UDP ve ıCMP 'yi destekler.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-193">NetX Duo NAT supports TCP, UDP and ICMP.</span></span> <span data-ttu-id="6f4e7-194">IGMP desteklenmez.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-194">IGMP is not supported.</span></span>
- <span data-ttu-id="6f4e7-195">NetX Duo NAT, IPv6 adreslemesini desteklemez.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-195">NetX Duo NAT does not support IPv6 addressing.</span></span>
- <span data-ttu-id="6f4e7-196">NETX Duo NAT, bu hizmetleri NAT işlemleriyle tümleştirebilse de DNS veya DHCP hizmetleri içermez.</span><span class="sxs-lookup"><span data-stu-id="6f4e7-196">NetX Duo NAT does not include DNS or DHCP services, although NetX Duo NAT can integrate those services with its NAT operations.</span></span>

## <a name="rfcs-supported-by-netx-duo-nat"></a><span data-ttu-id="6f4e7-197">NetX Duo NAT tarafından desteklenen RFC 'Ler</span><span class="sxs-lookup"><span data-stu-id="6f4e7-197">RFCs Supported by NetX Duo NAT</span></span>

<span data-ttu-id="6f4e7-198">NetX Duo NAT uygulamasında, aşağıdaki RFC 'lerde sunulan bilgiler temel alınarak verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="6f4e7-198">NetX Duo NAT implementation is based on information presented in the following RFCs:</span></span>

- <span data-ttu-id="6f4e7-199">RFC 2663: IP ağ adresi çeviricisi (NAT) terimleri ve konuları</span><span class="sxs-lookup"><span data-stu-id="6f4e7-199">RFC 2663: IP Network Address Translator (NAT) Terminology and Considerations</span></span>
- <span data-ttu-id="6f4e7-200">RFC 3022: geleneksel IP netowrk adres çeviricisi (geleneksel NAT)</span><span class="sxs-lookup"><span data-stu-id="6f4e7-200">RFC 3022: Traditional IP Netowrk Address Translator (Traditional NAT)</span></span>
- <span data-ttu-id="6f4e7-201">RFC 4787: tek noktaya yayın UDP için ağ adresi çevirisi (NAT) davranış gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="6f4e7-201">RFC 4787: Network Address Translation (NAT) Behavioral Requirements for Unicast UDP</span></span>
