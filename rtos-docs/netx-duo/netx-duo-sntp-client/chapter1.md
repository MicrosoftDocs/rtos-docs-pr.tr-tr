---
title: Bölüm 1-Azure RTOS NetX Duo SNTP 'e giriş
description: Azure RTOS NetX basit ağ zaman Protokolü (SNTP), Internet üzerinden saatleri eşitlemek için tasarlanan bir protokoldür.
author: philmea
ms.author: philmea
ms.date: 06/04/2020
ms.topic: article
ms.service: rtos
ms.openlocfilehash: b3e1170197c6c4981060459104da80e354fac5db
ms.sourcegitcommit: e3d42e1f2920ec9cb002634b542bc20754f9544e
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/22/2021
ms.locfileid: "104825751"
---
# <a name="chapter-1---introduction-to-azure-rtos-netx-duo-sntp"></a><span data-ttu-id="f5ab2-103">Bölüm 1-Azure RTOS NetX Duo SNTP 'e giriş</span><span class="sxs-lookup"><span data-stu-id="f5ab2-103">Chapter 1 - Introduction to Azure RTOS NetX Duo SNTP</span></span> 

<span data-ttu-id="f5ab2-104">Azure RTOS NetX basit ağ zaman Protokolü (SNTP), Internet üzerinden saatleri eşitlemek için tasarlanan bir protokoldür.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-104">The Azure RTOS NetX Simple Network Time Protocol (SNTP) is a protocol designed for synchronizing clocks over the Internet.</span></span> <span data-ttu-id="f5ab2-105">SNTP sürüm 4, ağ zaman Protokolü (NTP) tabanlı bir Basitleştirilmiş protokoldür.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-105">SNTP Version 4 is a simplified protocol based on the Network Time Protocol (NTP).</span></span> <span data-ttu-id="f5ab2-106">Basit, durumsuz bir protokolde zaman güncelleştirmelerini gerçekleştirmek için Kullanıcı Datagram Protokolü (UDP) hizmetlerinden yararlanır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-106">It utilizes User Datagram Protocol (UDP) services to perform time updates in a simple, stateless protocol.</span></span> <span data-ttu-id="f5ab2-107">NTP olarak karmaşık olmasa da, SNTP son derece güvenilir ve doğru.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-107">Though not as complex as NTP, SNTP is highly reliable and accurate.</span></span> <span data-ttu-id="f5ab2-108">Günümüzde Internet 'in çoğu yerde, SNTP, eşitleme kaynağı ve ağ yollarının özelliklerine bağlı olarak accuracies of 1-50 milisaniyesi sağlar.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-108">In most places of the Internet of today, SNTP provides accuracies of 1-50 milliseconds, depending on the characteristics of the synchronization source and network paths.</span></span> <span data-ttu-id="f5ab2-109">SNTP 'in zaman güncelleştirmelerini alma güvenilirliğini sağlamak için birçok seçeneği vardır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-109">SNTP has many options to provide reliability of receiving time updates.</span></span> <span data-ttu-id="f5ab2-110">Alternatif sunuculara geçiş yapma, yoklama algoritmalarının geri dönmesi ve otomatik zaman sunucu keşfi uygulamak, bir SNTP istemcisinin değişken Internet zaman hizmeti ortamını işlemesi için gereken yollardan biridir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-110">Ability to switch to alternative servers, applying back off polling algorithms and automatic time server discovery are just a few of the means for an SNTP client to handle a variable Internet time service environment.</span></span> <span data-ttu-id="f5ab2-111">Kesinliği, basitliği ve uygulama kolaylığını sağlar.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-111">What it lacks in precision it makes up for in simplicity and ease of implementation.</span></span> <span data-ttu-id="f5ab2-112">SNTP, öncelikli olarak ulusal saat ve sıklık dağıtımını yapma (örneğin, NTP sunucusu) hizmetlerine erişmek için kapsamlı mekanizmalar sağlamaya yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-112">SNTP is intended primarily for providing comprehensive mechanisms to access national time and frequency dissemination (e.g. NTP server) services.</span></span>

## <a name="netx-duo-sntp-client-requirements"></a><span data-ttu-id="f5ab2-113">NetX Duo SNTP Istemci gereksinimleri</span><span class="sxs-lookup"><span data-stu-id="f5ab2-113">NetX Duo SNTP Client Requirements</span></span>

<span data-ttu-id="f5ab2-114">NetX Duo SNTP Istemcisi bir IP örneğinin zaten oluşturulmuş olmasını gerektirir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-114">The NetX Duo SNTP Client requires that an IP instance has already been created.</span></span> <span data-ttu-id="f5ab2-115">Ayrıca, aynı IP örneğinde UDP etkinleştirilmeli ve bir SNTP sunucusuna zaman verileri göndermek için 123 *iyi bilinen* bağlantı noktasına erişimi olması gerekir, ancak alternatif bağlantı noktaları da çalışacaktır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-115">In addition, UDP must be enabled on that same IP instance and should have access to the *well-known* port 123 for sending time data to an SNTP Server, although alternative ports will work as well.</span></span> <span data-ttu-id="f5ab2-116">Yayın istemcileri, yayın sunucusunun gönderdiği UDP bağlantı noktasını, genellikle 123 ' ye bağlamalıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-116">Broadcast clients should bind the UDP port their broadcast server is sending on, usually 123.</span></span> <span data-ttu-id="f5ab2-117">NetX Duo SNTP Istemci uygulamasının bir veya daha fazla IP SNTP sunucu adresi olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-117">The NetX Duo SNTP Client application must have one or more IP SNTP Server addresses.</span></span>

## <a name="netx-duo-sntp-client-limitations"></a><span data-ttu-id="f5ab2-118">NetX Duo SNTP Istemci sınırlamaları</span><span class="sxs-lookup"><span data-stu-id="f5ab2-118">NetX Duo SNTP Client Limitations</span></span> 

<span data-ttu-id="f5ab2-119">SNTP Istemci API 'SI tarafından işlenen NTP zaman güncelleştirmelerinde yerel zaman gösterimindeki duyarlık, milisaniyelik çözünürlükle sınırlıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-119">Precision in local time representation in NTP time updates handled by the SNTP Client API is limited to millisecond resolution.</span></span>

<span data-ttu-id="f5ab2-120">SNTP Istemcisi istediğiniz zaman yalnızca tek bir SNTP sunucu adresini barındırır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-120">The SNTP Client only holds a single SNTP Server address at any time.</span></span> <span data-ttu-id="f5ab2-121">Bu sunucu artık geçerli değilse, uygulamanın SNTP Istemci görevini durdurması ve yayın ya da tek noktaya yayın SNTP iletişimini kullanarak başka bir SNTP sunucu adresiyle yeniden başlatılması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-121">If that Server appears to be no longer valid, the application must stop the SNTP Client task, and reinitialize it with another SNTP server address, using either broadcast or unicast SNTP communication.</span></span>

<span data-ttu-id="f5ab2-122">SNTP Istemcisi, manycast 'yi desteklemez.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-122">The SNTP Client does not support manycast.</span></span>

<span data-ttu-id="f5ab2-123">NetX Duo SNTP Istemcisi alınan paket verilerini doğrulamak için kimlik doğrulama mekanizmalarını desteklemez.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-123">NetX Duo SNTP Client does not support authentication mechanisms for verifying received packet data.</span></span>

## <a name="netx-duo-sntp-client-operation"></a><span data-ttu-id="f5ab2-124">NetX Duo SNTP Istemci Işlemi</span><span class="sxs-lookup"><span data-stu-id="f5ab2-124">NetX Duo SNTP Client Operation</span></span>

<span data-ttu-id="f5ab2-125">RFC 4330, SNTP istemcilerinin yalnızca yerel ağının en yüksek katman ve tercihen bir NTP veya SNTP istemcisinin eşitlemeye bağımlı olmadığı yapılandırmalarda çalışabilmesini öneriyor.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-125">RFC 4330 recommends that SNTP clients should operate only at the highest stratum of their local network and preferably in configurations where no NTP or SNTP client is dependent them for synchronization.</span></span> <span data-ttu-id="f5ab2-126">Katman düzeyi NTP zaman hiyerarşisinde, katman 1 ' in en üst düzey (bir kök saat sunucusu) ve 15 izin verilen en düşük düzeyde (örn. istemci) bulunduğu ana bilgisayar konumunu yansıtır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-126">Stratum level reflects the host position in the NTP time hierarchy where stratum 1 is the highest level (a root time server) and 15 is the lowest allowed level (e.g. Client).</span></span> <span data-ttu-id="f5ab2-127">SNTP Istemci varsayılan en düşük katman 2 ' dir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-127">The SNTP Client default minimum stratum is 2.</span></span>

<span data-ttu-id="f5ab2-128">NetX Duo SNTP Istemcisi, Internet üzerinden zaman alabilmesini sağlamak için iki temel moddan birinde, tek noktaya yayın veya Yayınla çalışabilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-128">The NetX Duo SNTP Client can operate in one of two basic modes, unicast or broadcast, to obtain time over the Internet.</span></span> <span data-ttu-id="f5ab2-129">Tek noktaya yayın modunda, Istemci SNTP sunucusunu düzenli aralıklarla yoklar ve bu sunucudan bir yanıt almayı bekler.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-129">In unicast mode, the Client polls its SNTP Server on regular intervals and waits to receive a reply from that Server.</span></span> <span data-ttu-id="f5ab2-130">Bir tane alındığında, Istemci, RFC 4330 tarafından önerilen bir ' Sanity denetimleri ' kümesi uygulayarak yanıtın geçerli bir zaman güncelleştirmesi içerdiğini doğrular.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-130">When one is received, the Client verifies that the reply contains a valid time update by applying a set of ‘sanity checks’ recommended by RFC 4330.</span></span> <span data-ttu-id="f5ab2-131">Istemci daha sonra, varsa, sunucu saatinin yerel saatine göre zaman farkını uygular.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-131">The Client then applies the time difference, if any, with the Server clock to its local clock.</span></span> <span data-ttu-id="f5ab2-132">Yayın modunda, istemci yalnızca zaman güncelleştirme yayınlarını dinler ve güncelleştirme zamanı verilerini doğrulamak üzere benzer bir sağlamlık denetimleri uyguladıktan sonra yerel saatini korur.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-132">In broadcast mode, the Client merely listens for time update broadcasts and maintains its local clock after applying a similar set of sanity checks to verify the update time data.</span></span> <span data-ttu-id="f5ab2-133">Sanity denetimleri, aşağıdaki **SNTP Sanity denetimleri** bölümünde ayrıntılı olarak açıklanmıştır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-133">Sanity checks are described in detail in the **SNTP Sanity Checks** section below.</span></span>

<span data-ttu-id="f5ab2-134">Istemci her iki modda da çalışmadan önce, işletim parametrelerini kurması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-134">Before the Client can run in either mode, it must establish its operating parameters.</span></span> <span data-ttu-id="f5ab2-135">Bu, sırasıyla tek noktaya veya yayın modlarında *nx_sntp_client_initialize_unicast* ya da *nx_sntp_client_initialize_broadcast* çağırarak yapılır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-135">This is done by calling either *nx_sntp_client_initialize_unicast* or *nx_sntp_client_initialize_broadcast* for unicast or broadcast modes, respectively.</span></span> <span data-ttu-id="f5ab2-136">Bu işlem, geçerli bir güncelleştirme olmadan en uzun süre atlama süresini, alınan birbirini izleyen geçersiz güncelleştirmelerin sınırını, tek noktaya yayın modu için bir yoklama aralığı, işlem modunu (örneğin, tek noktaya vs. Broadcast ve SNTP sunucusu) ayarlar.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-136">These serves set the time outs for maximum time lapse without a valid update, the limit on consecutive invalid updates received, a polling interval for unicast mode, operation mode e.g. unicast vs. broadcast, and SNTP Server.</span></span>

<span data-ttu-id="f5ab2-137">Alınan en fazla zaman atlama süresi veya en fazla geçersiz güncelleştirme aşılırsa, SNTP Istemcisi çalışmaya devam eder ancak geçerli SNTP sunucu durumunu geçersiz olarak ayarlar.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-137">If the maximum time lapse or maximum invalid updates received is exceeded, the SNTP Client continues to run but sets the current SNTP Server status to invalid.</span></span> <span data-ttu-id="f5ab2-138">Uygulama, SNTP sunucusunun hala geçerli güncelleştirmeler gönderdiğini doğrulamak için *nx_sntp_client_receiving_updates* HIZMETINI kullanarak SNTP istemcisini yoklayabilirler.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-138">The application can poll the SNTP Client using the *nx_sntp_client_receiving_updates* service to verify the SNTP Server is still sending valid updates.</span></span> <span data-ttu-id="f5ab2-139">Aksi takdirde, *nx_sntp_client_stop* HIZMETINI kullanarak SNTP istemci iş parçacığını durdurmalı ve başka bir SNTP sunucu adresi ayarlamak için iki başlatma hizmetinden birini çağırmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-139">If not, it should stop the SNTP Client thread using the *nx_sntp_client_stop* service and call either of the two initialize services to set another SNTP Server address.</span></span> <span data-ttu-id="f5ab2-140">SNTP Istemcisini yeniden başlatmak için uygulama *nx_sntp_client_run_broadcast* veya *nx_sntp_client_run_unicast* çağırır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-140">To restart the SNTP Client, the application calls *nx_sntp_client_run_broadcast* or *nx_sntp_client_run_unicast*.</span></span> <span data-ttu-id="f5ab2-141">Uygulamanın, başlatma çağrısında SNTP Istemci işletim modunu, istediğiniz şekilde tek noktaya veya yayına geçiş yapmak için değiştirebileceğini unutmayın.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-141">Note that the application can change SNTP Client operating mode in the initialize call to switch to unicast or broadcast as desired.</span></span>

### <a name="local-clock-operation"></a><span data-ttu-id="f5ab2-142">Yerel Saat Işlemi</span><span class="sxs-lookup"><span data-stu-id="f5ab2-142">Local Clock Operation</span></span>

<span data-ttu-id="f5ab2-143">Ana NTP saatindeki saniye sayısına veya ilk NTP dönemi içinde geçen saniye sayısına göre SNTP saati (örn. Ocak **1900 00:00:00** , 1 **1999 00:00:00**).</span><span class="sxs-lookup"><span data-stu-id="f5ab2-143">The SNTP time based on the number of seconds on the master NTP clock, or number of seconds elapsed in the first NTP epoch e.g. from Jan 1 **1900 00:00:00 to** Jan 1 **1999 00:00:00**.</span></span> <span data-ttu-id="f5ab2-144">01-01-1999 önem artışı, son geçen ikinci oluşma gerçekleşti.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-144">The significance of 01-01-1999 was when the last leap second occurred.</span></span> <span data-ttu-id="f5ab2-145">Bu değer aşağıdaki gibi tanımlanır:</span><span class="sxs-lookup"><span data-stu-id="f5ab2-145">This value is defined as follows:</span></span>

<span data-ttu-id="f5ab2-146">\#NTP_SECONDS_AT_01011999 0xBA368E80 tanımlama</span><span class="sxs-lookup"><span data-stu-id="f5ab2-146">\#define NTP_SECONDS_AT_01011999 0xBA368E80</span></span>

<span data-ttu-id="f5ab2-147">SNTP Istemcisi çalışmadan önce, uygulama isteğe bağlı olarak Istemcinin temel zaman olarak kullanacağı SNTP Istemci yerel saatini başlatabilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-147">Before the SNTP Client runs, the application can optionally initialize the SNTP Client local time for the Client to use as a baseline time.</span></span> <span data-ttu-id="f5ab2-148">Bunu yapmak için *nx_sntp_client_set_local_time* hizmetini kullanması gerekir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-148">To do so, it must use the *nx_sntp_client_set_local_time* service.</span></span> <span data-ttu-id="f5ab2-149">Bu süre, NTP biçimi, saniyeler ve kesir olarak zaman alır; burada kesir, NTP dar saat içinde milisaniyedir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-149">This takes the time in NTP format, seconds and fraction, where fraction is the milliseconds in the NTP condensed time.</span></span> <span data-ttu-id="f5ab2-150">İdeal olarak, uygulama bağımsız bir kaynaktan bir SNTP saati elde edebilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-150">Ideally the application can obtain an SNTP time from an independent source.</span></span> <span data-ttu-id="f5ab2-151">NetX Duo SNTP Istemcisinde bir NTP zamanına yıl, ay, tarih ve saat dönüştürme API 'SI yoktur.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-151">There is no API for converting year, month, date and time to an NTP time in the NetX Duo SNTP Client.</span></span> <span data-ttu-id="f5ab2-152">NTP saat biçiminin açıklaması için, *RFC4330 "IPv4, IPv6 ve OSI Için basit ağ zaman Protokolü (SNTP) sürüm 4* ' e bakın.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-152">For a description of NTP time format, refer to *RFC4330 “Simple Network Time Protocol (SNTP) Version 4 for IPv4, IPv6 and OSI”.*</span></span>

<span data-ttu-id="f5ab2-153">SNTP Istemcisi başladığında temel bir yerel saat sağlanmazsa, SNTP Istemcisi ilk güncelleştirmedeki yerel saatine göre, SNTP güncelleştirmelerini kabul eder.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-153">If no base local time is supplied when the SNTP Client starts up, the SNTP Client will accept the SNTP updates without comparing to its local time on the first update.</span></span> <span data-ttu-id="f5ab2-154">Bundan sonra, kendi yerel saatini değiştirip değiştirmediğine göre, en yüksek ve en düşük zaman güncelleştirme değerlerini uygular.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-154">Thereafter it will apply the maximum and minimum time update values to determine if it will modify its local time.</span></span>

<span data-ttu-id="f5ab2-155">Uygulama, SNTP Istemci yerel saatini elde etmek için *nx_sntp_client_get_local_time_extended* hizmetini kullanabilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-155">To obtain the SNTP Client local time, the application can use the *nx_sntp_client_get_local_time_extended* service.</span></span>

### <a name="sntp-sanity-checks"></a><span data-ttu-id="f5ab2-156">SNTP Sanity denetimleri</span><span class="sxs-lookup"><span data-stu-id="f5ab2-156">SNTP Sanity Checks</span></span> 

<span data-ttu-id="f5ab2-157">Istemci, aşağıdaki ölçütler için gelen paketi inceler:</span><span class="sxs-lookup"><span data-stu-id="f5ab2-157">The Client examines the incoming packet for the following criteria:</span></span>

  - <span data-ttu-id="f5ab2-158">Kaynak IP adresi geçerli sunucu IP adresi ile aynı olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-158">Source IP address must match the current server IP address.</span></span>

  - <span data-ttu-id="f5ab2-159">Gönderen kaynak bağlantı noktası, geçerli sunucu kaynağı bağlantı noktasıyla eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-159">Sender source port must match with the current server source port.</span></span>

  - <span data-ttu-id="f5ab2-160">Paket uzunluğu, bir SNTP zaman iletisini tutacak en düşük uzunluk olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-160">Packet length must be the minimum length to hold an SNTP time message.</span></span>

<span data-ttu-id="f5ab2-161">Sonra, zaman verileri Istemcinin daha sonra belirli bir ' Sanity denetimleri ' kümesi uyguladığı paket arabelleğinden ayıklanır:</span><span class="sxs-lookup"><span data-stu-id="f5ab2-161">Next, the time data is extracted from the packet buffer to which the Client then applies a set of specific ‘sanity checks’:</span></span>

  - <span data-ttu-id="f5ab2-162">3 olarak ayarlanan artık gösterge, sunucunun eşitlenmediğini gösterir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-162">The Leap Indicator set to 3 indicates the Server is not synchronized.</span></span> <span data-ttu-id="f5ab2-163">Istemci alternatif bir sunucu bulmayı denemelidir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-163">The Client should attempt to find an alternative server.</span></span>

  - <span data-ttu-id="f5ab2-164">Sıfıra ayarlanmış bir katman alanı, bir KISS ölüm (kod) paketi olarak bilinir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-164">A stratum field set to zero is known as a Kiss of Death (KOD) packet.</span></span> <span data-ttu-id="f5ab2-165">Bu durum için SMTP Istemci KOD işleyicisi, Kullanıcı tanımlı bir geri çağırmasıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-165">The SMTP Client KOD handler for this situation is a user defined callback.</span></span> <span data-ttu-id="f5ab2-166">Küçük örnek Tanıtım dosyası, bu durum için basit bir KOD işleyicisi içerir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-166">The small example demo file contains a simple KOD handler for this situation.</span></span> <span data-ttu-id="f5ab2-167">Başvuru KIMLIĞI alanı isteğe bağlı olarak, kod yanıtının nedenini belirten bir kod içerir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-167">The Reference ID field optionally contains a code indicating the reason for the KOD reply.</span></span> <span data-ttu-id="f5ab2-168">Herhangi bir hızda, KOD işleyicisi, SNTP sunucusundan bir KISS 'nin bir ölüm alma işlemlerinin nasıl yapılacağını belirtmelidir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-168">At any rate, the KOD handler must indicate how to handle receiving a kiss of death from the SNTP Server.</span></span> <span data-ttu-id="f5ab2-169">Genellikle, SNTP Istemcisini başka bir SNTP sunucusuyla yeniden başlatmak isteyeceksiniz.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-169">Typically it will want to reinitialize the SNTP Client with another SNTP Server.</span></span>

  - <span data-ttu-id="f5ab2-170">Sunucu SNTP sürümü, katman ve işlem modu istemci hizmetiyle eşleşmelidir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-170">The Server SNTP version, stratum and mode of operation must be matched to the Client service.</span></span>

  - <span data-ttu-id="f5ab2-171">Istemci, sunucu saati dağılım üst sınırı ile yapılandırıldıysa Istemci, yalnızca alınan ilk güncelleştirmede sunucu saati dağılımı denetler ve Istemci en yüksek değerini aşarsa, Istemci sunucuyu reddeder.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-171">If the Client is configured with a server clock dispersion maximum, the Client checks the server clock dispersion on the first update received only, and if it exceeds the Client maximum, the Client rejects the Server.</span></span>

  - <span data-ttu-id="f5ab2-172">Sunucu zaman damgası alanları da belirli denetimleri iletmelidir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-172">The Server time stamp fields must also pass specific checks.</span></span> <span data-ttu-id="f5ab2-173">Tek noktaya yayın sunucusu için, tüm zaman alanları doldurulmalıdır ve NULL olamaz.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-173">For the unicast Server, all time fields must be filled in and cannot be NULL.</span></span> <span data-ttu-id="f5ab2-174">Özgün zaman damgası, Istemcinin SNTP zaman ileti isteğindeki Iletim zaman damgasına eşit olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-174">The Origination time stamp must equal the Transmit time stamp in the Client’s SNTP time message request.</span></span> <span data-ttu-id="f5ab2-175">Bu, Istemciyi kötü amaçlı saldırganlar ve standart dışı sunucu davranışından korur.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-175">This protects the Client from malicious intruders and rogue Server behavior.</span></span> <span data-ttu-id="f5ab2-176">Yayın sunucusu yalnızca Iletme zaman damgasını doldurmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-176">The broadcast Server need only fill in the Transmit time stamp.</span></span> <span data-ttu-id="f5ab2-177">Istemciden hiçbir şey almadığından, doldurulacak alma veya alma alanı yoktur.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-177">Since it does not receive anything from the Client it has no Receive or Origination fields to fill in.</span></span>

    <span data-ttu-id="f5ab2-178">Başarısız bir sağlamlık denetimi, zaman güncelleştirmesini geçersiz bir saat güncelleştirmesi olarak markalımıştır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-178">A failed sanity check brands a time update as an invalid time update.</span></span> <span data-ttu-id="f5ab2-179">SNTP Istemci tasdikliği denetim hizmeti, aynı sunucudan alınan ardışık geçersiz zaman güncelleştirme sayısını izler.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-179">The SNTP Client sanity check service tracks the number of consecutive invalid time updates received from the same Server.</span></span>

<span data-ttu-id="f5ab2-180">SNTP Istemci iş parçacığı görevi, yerel SNTP Istemci zamanına uygulama için bir SNTP paketinin geçerliliğini denetlediğinde, SNTP Istemcisinin sayısını artırır ve `nx_sntp_client_invalid_time_updates.` Bu da çağırana bir hata durumu döndürür ancak bu, tüm iç işleme olur, böylece uygulama için hemen görünür olmaz.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-180">When SNTP Client thread task checks the validity of an SNTP packet for applying to the local SNTP Client time, it increments the count of the SNTP Client `nx_sntp_client_invalid_time_updates.` It also returns an error status to the caller but this is all internal processing so it is not immediately visible to the application.</span></span> <span data-ttu-id="f5ab2-181">Başarısız zaman güncelleştirmelerini algılamanın yolu, `nx_sntp_client_invalid_time_updates` SNTP sunucu zamanı güncelleştirmelerini aldıktan sonra SNTP istemcisinin değerini sorgulamadır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-181">The way to detect failed time updates is to query the value of the SNTP Client `nx_sntp_client_invalid_time_updates` after receiving SNTP Server time updates.</span></span>

<span data-ttu-id="f5ab2-182">Sunucu saati güncelleştirmesi, tasdiklik denetimlerini geçerse Istemci, zaman verilerini yerel saatine göre işlemeye çalışır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-182">If the Server time update passes the sanity checks, the Client then attempts to process the time data to its local time.</span></span> <span data-ttu-id="f5ab2-183">Istemci, gidiş dönüş hesaplaması için yapılandırılmışsa, örneğin bir güncelleştirme isteği bir kez alındığında, gidiş dönüş süresi hesaplanır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-183">If the Client is configured for round trip calculation, e.g. the time from sending an update request to the time one is received, the round trip time is calculated.</span></span> <span data-ttu-id="f5ab2-184">Bu değer durur ve sunucunun saatine eklenir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-184">This value is halved and then added to the Server’s time.</span></span>

<span data-ttu-id="f5ab2-185">Bundan sonra, geçerli SNTP sunucusundan alınan ilk güncelleştirmedir, SNTP Istemcisi sunucu ile Istemci yerel saati arasındaki farkı yoksayıp saymasının gerekip gerekmediğini belirler.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-185">Next, if this is the first update received from the current SNTP Server, the SNTP Client determines if it should ignore the difference between the Server and Client local time.</span></span> <span data-ttu-id="f5ab2-186">Bundan sonra, SNTP sunucusundan gelen tüm güncelleştirmeler Istemci yerel saatine göre farklılık olarak değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-186">Thereafter all updates from the SNTP Server are evaluated for the difference with the Client local time.</span></span>

<span data-ttu-id="f5ab2-187">Istemci ile sunucu saati arasındaki fark ile karşılaştırılır `NX_SNTP_CLIENT_MAX_TIME_ADJUSTMENT` .</span><span class="sxs-lookup"><span data-stu-id="f5ab2-187">The difference between Client and Server time is compared with `NX_SNTP_CLIENT_MAX_TIME_ADJUSTMENT`.</span></span> <span data-ttu-id="f5ab2-188">Bu değeri aşarsa, veriler oluşturulur. Fark, fark nedeniyle daha küçükse, `NX_SNTP_CLIENT_MIN_TIME_ADJUSTMENT` ayarlama gerektirecek kadar küçük olarak değerlendirilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-188">If it exceeds this value, the data is thrown out. If the difference is less than the `NX_SNTP_CLIENT_MIN_TIME_ADJUSTMENT` the difference is considered too small to require adjustment.</span></span>

<span data-ttu-id="f5ab2-189">Tüm bu denetimleri geçirerek, zaman güncelleştirme, SNTP Istemcisine, iç SNTP Istemci işlemede gecikme için bazı düzeltmeler ile uygulanır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-189">Passing all these checks, the time update is then applied to the SNTP Client with some corrections for delays in internal SNTP Client processing.</span></span>

### <a name="sntp-asynchronous-unicast-requests"></a><span data-ttu-id="f5ab2-190">SNTP zaman uyumsuz tek noktaya yayın Istekleri</span><span class="sxs-lookup"><span data-stu-id="f5ab2-190">SNTP Asynchronous Unicast Requests</span></span> 

<span data-ttu-id="f5ab2-191">SNTP Istemcisi, ana bilgisayar uygulamasının NTP sunucusundan geçerli saate yönelik zaman uyumsuz bir tek noktaya yayın isteği göndermesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-191">The SNTP Client allows the host application to asynchronously send a unicast request for the current time from the NTP server.</span></span>

```C
UINT _nx_sntp_client_request_unicast_time(
NX_SNTP_CLIENT *client_ptr, 
UINT wait_option)
```

<span data-ttu-id="f5ab2-192">Bekle seçeneği, yanıt için beklenecek süre sonu ' dur.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-192">The wait option is the expiration to wait for a response.</span></span>

<span data-ttu-id="f5ab2-193">NTP sunucusu yanıt verirse, paket, SNTP Istemci yerel saatini güncelleştirmeden önce, önceki bölümde açıklandığı gibi aynı işleme ve tasity denetimlerine tabi.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-193">If the NTP Server responds, the packet is subjected to the same processing and sanity checks as described in the previous section before updating the SNTP Client local time.</span></span>

<span data-ttu-id="f5ab2-194">Çağrı başarılı tamamlamayı döndürürse, uygulama güncelleştirilmiş yerel saat için *nx_sntp_client_utility_display_date_time* veya *nx_sntp_client_get_local_time_extended* çağırabilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-194">If the call returns successful completion, the application can call *nx_sntp_client_utility_display_date_time* or *nx_sntp_client_get_local_time_extended* for the updated local time.</span></span>

<span data-ttu-id="f5ab2-195">Bu tek noktaya yayın istekleri, sonraki tek noktaya yayın isteğini göndermek için normal SNTP Istemci zamanlamasını veya yayın modunda, sonraki NTP yayınını ne zaman bekleeceğini engellemez.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-195">These unicast requests do not interfere with the normal SNTP Client schedule for sending the next unicast request, or if in broadcast mode, when to expect the next NTP broadcast.</span></span>

### <a name="periodic-local-time-updates"></a><span data-ttu-id="f5ab2-196">Düzenli yerel saat güncelleştirmeleri</span><span class="sxs-lookup"><span data-stu-id="f5ab2-196">Periodic Local Time Updates</span></span>

<span data-ttu-id="f5ab2-197">NX_SNTP_CLIENT_MAX_TIME_ADJUSTMENT seçeneğinde (milisaniye olarak), yerel saate göre en yüksek ayarlama ayarlanır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-197">The maximum adjustment to the local time is set in the NX_SNTP_CLIENT_MAX_TIME_ADJUSTMENT option (in milliseconds).</span></span> <span data-ttu-id="f5ab2-198">Tek noktaya yayın SNTP Istemci işlemleri için yoklama güncelleştirme aralığı NX_SNTP_CLIENT_UNICAST_POLL_INTERVAL seçeneğinde ayarlanır (saniye cinsinden).</span><span class="sxs-lookup"><span data-stu-id="f5ab2-198">The polling update interval for unicast SNTP Client operations is set in the NX_SNTP_CLIENT_UNICAST_POLL_INTERVAL option (in seconds).</span></span> <span data-ttu-id="f5ab2-199">Yoklama aralığı, en yüksek ayarlamadan büyükse, ilk sunucu güncelleştirmesinden sonra sonraki sunucu güncelleştirmeleri reddedilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-199">If the polling interval is greater than the maximum adjustment, then subsequent server updates after the first server update will be rejected.</span></span> <span data-ttu-id="f5ab2-200">Bunu engellemek için, SNTP Istemcisi, düzenli aralıklarla NX_SNTP_UPDATE_TIMEOUT_INTERVAL olarak tanımlanan yerel saati güncelleştirir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-200">To prevent this, the SNTP Client will update the local time periodically defined as NX_SNTP_UPDATE_TIMEOUT_INTERVAL.</span></span> 

<span data-ttu-id="f5ab2-201">Panonuz RTC ve sunucu saati (SNTP Istemci yerel saatinin olarak ayarlanması gereken) arasında bir fark varsa, RTC 'nin SNTP Istemci saatine eşitilmesi gerekir (bu kullanıcı kılavuzunda bu işlemi göstermemelisiniz).</span><span class="sxs-lookup"><span data-stu-id="f5ab2-201">If there is a difference in time between the on board RTC and the server time (which the SNTP Client local time should be set to), the RTC should be synched to the SNTP Client time (we do not demonstrate that in this User Guide).</span></span>

<span data-ttu-id="f5ab2-202">SNTP sunucu güncelleştirmeleri saat başına birden çok kez gerçekleşmediğinden, SNTP Istemcisinin sunucu güncelleştirmeleri veya sunucu durumu için bu değerden daha sık olarak yoklanmasından çok yararlı değildir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-202">Since SNTP server updates should not occur more often than once per hour, it is not useful to poll the SNTP Client for server updates or server status more often than that.</span></span> <span data-ttu-id="f5ab2-203">Ancak, SNTP Istemcisinin, en yüksek zaman ayarlama parametresinden NX_SNTP_CLIENT_MAX_TIME_LAPSE daha fazla düşmemek için, kendi yerel saatini genellikle güncelleştirmesi gerekir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-203">However, the SNTP Client should update its local clock often enough not to fall further than the maximum time adjustment parameter NX_SNTP_CLIENT_MAX_TIME_LAPSE.</span></span>

<span data-ttu-id="f5ab2-204">Alternatif olarak, en yüksek ayarlama NX_SNTP_CLIENT_MAX_TIME_LAPSE tek noktaya yayın yoklama güncelleştirmesinden (veya beklenen yayın aralıklarıyla) daha büyük olarak ayarlanabilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-204">Alternatively, the maximum adjustment NX_SNTP_CLIENT_MAX_TIME_LAPSE can be set to greater than the unicast polling update (or anticipated broadcast intervals).</span></span> <span data-ttu-id="f5ab2-205">İkinci, bağımsız bir gerçek zaman saatinin gereksinimini ortadan kaldırır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-205">The latter eliminates the need for an independent real time clock.</span></span> <span data-ttu-id="f5ab2-206">Ancak, SNTP protokolünün amacı yerel RTC veya ağ zaman güncelleştirmelerinde toplam güvenüyi önlemek için kullanılır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-206">However, the intention of SNTP protocol is to avoid total reliance on either local RTC or network time updates.</span></span> <span data-ttu-id="f5ab2-207">Diğer bir deyişle, SNTP sunucu güncelleştirmeleri yerel saat düzeninde DRFT 'i engellemeye yöneliktir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-207">Further, the SNTP Server updates are intended to prevent drift in the local time clock.</span></span>

## <a name="multiple-network-interfaces"></a><span data-ttu-id="f5ab2-208">Birden çok ağ arabirimi</span><span class="sxs-lookup"><span data-stu-id="f5ab2-208">Multiple Network Interfaces</span></span>

<span data-ttu-id="f5ab2-209">NetX Duo SNTP Istemcisi, bu ağlar IP örneğiyle kaydedildiği sürece ikincil ağlarda çalışacak şekilde yapılandırılabilir.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-209">NetX Duo SNTP Client can be configured to run on secondary networks as long as those networks are registered with the IP instance.</span></span> <span data-ttu-id="f5ab2-210">İkincil ağların nasıl kaydedileceği hakkında daha fazla bilgi için bkz. NetX Duo veya NetX Kullanıcı Kılavuzu.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-210">See the NetX Duo or NetX User Guide for more information on how to register secondary networks.</span></span>

<span data-ttu-id="f5ab2-211">*Nx_sntp_client_create* çağrısında, üçüncü girişi IFACE_INDEX, SNTP istemcisinin zaman güncelleştirmelerini alacağı ağ dizinine ayarlayın.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-211">In the *nx_sntp_client_create* call, set the third input, iface_index, to the index of the network for the SNTP Client to receive time updates on.</span></span> <span data-ttu-id="f5ab2-212">Birincil arabirim her zaman dizin 0 ' dır.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-212">The primary interface is always at index 0.</span></span> <span data-ttu-id="f5ab2-213">NetX Duo SNTP Istemcisi, aynı anda birden çok ağ arabirimindeki zaman güncelleştirmelerini desteklemez.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-213">NetX Duo SNTP Client cannot support time updates simultaneously on multiple network interface.</span></span>

## <a name="sntp-and-ntp-rfcs"></a><span data-ttu-id="f5ab2-214">SNTP ve NTP RFC 'Leri</span><span class="sxs-lookup"><span data-stu-id="f5ab2-214">SNTP and NTP RFCs</span></span>

<span data-ttu-id="f5ab2-215">NetX Duo SNTP istemcisi, IPv4, IPv6 ve OSı için RFC4330 "basit ağ zaman Protokolü (SNTP) sürüm 4" ve ilgili RFC 'Ler ile uyumludur.</span><span class="sxs-lookup"><span data-stu-id="f5ab2-215">NetX Duo SNTP client is compliant with RFC4330 “Simple Network Time Protocol (SNTP) Version 4 for IPv4, IPv6 and OSI” and related RFCs.</span></span>